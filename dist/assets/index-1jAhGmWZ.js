(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ng(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ig={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b=Symbol.for("react.transitional.element"),zb=Symbol.for("react.fragment");function rg(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:$b,type:e,key:i,ref:t!==void 0?t:null,props:n}}yl.Fragment=zb;yl.jsx=rg;yl.jsxs=rg;ig.exports=yl;var f=ig.exports,sg={exports:{}},Q={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Md=Symbol.for("react.transitional.element"),Fb=Symbol.for("react.portal"),Jb=Symbol.for("react.fragment"),Yb=Symbol.for("react.strict_mode"),Kb=Symbol.for("react.profiler"),Wb=Symbol.for("react.consumer"),Xb=Symbol.for("react.context"),Qb=Symbol.for("react.forward_ref"),Zb=Symbol.for("react.suspense"),ew=Symbol.for("react.memo"),ag=Symbol.for("react.lazy"),tw=Symbol.for("react.activity"),uh=Symbol.iterator;function nw(e){return e===null||typeof e!="object"?null:(e=uh&&e[uh]||e["@@iterator"],typeof e=="function"?e:null)}var og={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lg=Object.assign,ug={};function zr(e,t,n){this.props=e,this.context=t,this.refs=ug,this.updater=n||og}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cg(){}cg.prototype=zr.prototype;function Dd(e,t,n){this.props=e,this.context=t,this.refs=ug,this.updater=n||og}var Ud=Dd.prototype=new cg;Ud.constructor=Dd;lg(Ud,zr.prototype);Ud.isPureReactComponent=!0;var ch=Array.isArray;function oc(){}var Se={H:null,A:null,T:null,S:null},dg=Object.prototype.hasOwnProperty;function Ld(e,t,n){var i=n.ref;return{$$typeof:Md,type:e,key:t,ref:i!==void 0?i:null,props:n}}function iw(e,t){return Ld(e.type,t,e.props)}function Od(e){return typeof e=="object"&&e!==null&&e.$$typeof===Md}function rw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dh=/\/+/g;function lu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rw(""+e.key):t.toString(36)}function sw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(oc,oc):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function nr(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Md:case Fb:a=!0;break;case ag:return a=e._init,nr(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+lu(e,0):i,ch(r)?(n="",a!=null&&(n=a.replace(dh,"$&/")+"/"),nr(r,t,n,"",function(c){return c})):r!=null&&(Od(r)&&(r=iw(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(dh,"$&/")+"/")+a)),t.push(r)),1;a=0;var o=i===""?".":i+":";if(ch(e))for(var l=0;l<e.length;l++)i=e[l],s=o+lu(i,l),a+=nr(i,t,n,s,r);else if(l=nw(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=o+lu(i,l++),a+=nr(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return nr(sw(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function Da(e,t,n){if(e==null)return e;var i=[],r=0;return nr(e,i,"","",function(s){return t.call(n,s,r++)}),i}function aw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ow={map:Da,forEach:function(e,t,n){Da(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Da(e,function(){t++}),t},toArray:function(e){return Da(e,function(t){return t})||[]},only:function(e){if(!Od(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Activity=tw;Q.Children=ow;Q.Component=zr;Q.Fragment=Jb;Q.Profiler=Kb;Q.PureComponent=Dd;Q.StrictMode=Yb;Q.Suspense=Zb;Q.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se;Q.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Se.H.useMemoCache(e)}};Q.cache=function(e){return function(){return e.apply(null,arguments)}};Q.cacheSignal=function(){return null};Q.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=lg({},e.props),r=e.key;if(t!=null)for(s in t.key!==void 0&&(r=""+t.key),t)!dg.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(i[s]=t[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return Ld(e.type,r,i)};Q.createContext=function(e){return e={$$typeof:Xb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Wb,_context:e},e};Q.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)dg.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Ld(e,s,r)};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:Qb,render:e}};Q.isValidElement=Od;Q.lazy=function(e){return{$$typeof:ag,_payload:{_status:-1,_result:e},_init:aw}};Q.memo=function(e,t){return{$$typeof:ew,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=Se.T,n={};Se.T=n;try{var i=e(),r=Se.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(oc,fh)}catch(s){fh(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),Se.T=t}};Q.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()};Q.use=function(e){return Se.H.use(e)};Q.useActionState=function(e,t,n){return Se.H.useActionState(e,t,n)};Q.useCallback=function(e,t){return Se.H.useCallback(e,t)};Q.useContext=function(e){return Se.H.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e,t){return Se.H.useDeferredValue(e,t)};Q.useEffect=function(e,t){return Se.H.useEffect(e,t)};Q.useEffectEvent=function(e){return Se.H.useEffectEvent(e)};Q.useId=function(){return Se.H.useId()};Q.useImperativeHandle=function(e,t,n){return Se.H.useImperativeHandle(e,t,n)};Q.useInsertionEffect=function(e,t){return Se.H.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return Se.H.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return Se.H.useMemo(e,t)};Q.useOptimistic=function(e,t){return Se.H.useOptimistic(e,t)};Q.useReducer=function(e,t,n){return Se.H.useReducer(e,t,n)};Q.useRef=function(e){return Se.H.useRef(e)};Q.useState=function(e){return Se.H.useState(e)};Q.useSyncExternalStore=function(e,t,n){return Se.H.useSyncExternalStore(e,t,n)};Q.useTransition=function(){return Se.H.useTransition()};Q.version="19.2.4";sg.exports=Q;var T=sg.exports;const lc=ng(T);var fg={exports:{}},xl={},hg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,H){var U=D.length;D.push(H);e:for(;0<U;){var K=U-1>>>1,ce=D[K];if(0<r(ce,H))D[K]=H,D[U]=ce,U=K;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var H=D[0],U=D.pop();if(U!==H){D[0]=U;e:for(var K=0,ce=D.length,Ze=ce>>>1;K<Ze;){var j=2*(K+1)-1,nt=D[j],vt=j+1,dn=D[vt];if(0>r(nt,U))vt<ce&&0>r(dn,nt)?(D[K]=dn,D[vt]=U,K=vt):(D[K]=nt,D[j]=U,K=j);else if(vt<ce&&0>r(dn,U))D[K]=dn,D[vt]=U,K=vt;else break e}}return H}function r(D,H){var U=D.sortIndex-H.sortIndex;return U!==0?U:D.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,p=null,m=3,g=!1,v=!1,b=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function S(D){for(var H=n(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=D)i(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function E(D){if(b=!1,S(D),!v)if(n(l)!==null)v=!0,A||(A=!0,Y());else{var H=n(c);H!==null&&ye(E,H.startTime-D)}}var A=!1,C=-1,R=5,k=-1;function M(){return _?!0:!(e.unstable_now()-k<R)}function G(){if(_=!1,A){var D=e.unstable_now();k=D;var H=!0;try{e:{v=!1,b&&(b=!1,x(C),C=-1),g=!0;var U=m;try{t:{for(S(D),p=n(l);p!==null&&!(p.expirationTime>D&&M());){var K=p.callback;if(typeof K=="function"){p.callback=null,m=p.priorityLevel;var ce=K(p.expirationTime<=D);if(D=e.unstable_now(),typeof ce=="function"){p.callback=ce,S(D),H=!0;break t}p===n(l)&&i(l),S(D)}else i(l);p=n(l)}if(p!==null)H=!0;else{var Ze=n(c);Ze!==null&&ye(E,Ze.startTime-D),H=!1}}break e}finally{p=null,m=U,g=!1}H=void 0}}finally{H?Y():A=!1}}}var Y;if(typeof w=="function")Y=function(){w(G)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=G,Y=function(){se.postMessage(null)}}else Y=function(){y(G,0)};function ye(D,H){C=y(function(){D(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var U=m;m=H;try{return D()}finally{m=U}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=m;m=D;try{return H()}finally{m=U}},e.unstable_scheduleCallback=function(D,H,U){var K=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?K+U:K):U=K,D){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=U+ce,D={id:h++,callback:H,priorityLevel:D,startTime:U,expirationTime:ce,sortIndex:-1},U>K?(D.sortIndex=U,t(c,D),n(l)===null&&D===n(c)&&(b?(x(C),C=-1):b=!0,ye(E,U-K))):(D.sortIndex=ce,t(l,D),v||g||(v=!0,A||(A=!0,Y()))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var H=m;return function(){var U=m;m=H;try{return D.apply(this,arguments)}finally{m=U}}}})(mg);hg.exports=mg;var lw=hg.exports,pg={exports:{}},lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=T;function gg(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Bn(){}var at={d:{f:Bn,r:function(){throw Error(gg(522))},D:Bn,C:Bn,L:Bn,m:Bn,X:Bn,S:Bn,M:Bn},p:0,findDOMNode:null},cw=Symbol.for("react.portal");function dw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var ks=uw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bl(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=at;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(gg(299));return dw(e,t,null,n)};lt.flushSync=function(e){var t=ks.T,n=at.p;try{if(ks.T=null,at.p=2,e)return e()}finally{ks.T=t,at.p=n,at.d.f()}};lt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,at.d.C(e,t))};lt.prefetchDNS=function(e){typeof e=="string"&&at.d.D(e)};lt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=bl(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?at.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&at.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};lt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=bl(t.as,t.crossOrigin);at.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&at.d.M(e)};lt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=bl(n,t.crossOrigin);at.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};lt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=bl(t.as,t.crossOrigin);at.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else at.d.m(e)};lt.requestFormReset=function(e){at.d.r(e)};lt.unstable_batchedUpdates=function(e,t){return e(t)};lt.useFormState=function(e,t,n){return ks.H.useFormState(e,t,n)};lt.useFormStatus=function(){return ks.H.useHostTransitionStatus()};lt.version="19.2.4";function vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vg)}catch(e){console.error(e)}}vg(),pg.exports=lt;var fw=pg.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var He=lw,yg=T,hw=fw;function N(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ma(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wg(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hh(e){if(ma(e)!==e)throw Error(N(188))}function mw(e){var t=e.alternate;if(!t){if(t=ma(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return hh(r),e;if(s===i)return hh(r),t;s=s.sibling}throw Error(N(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(N(189))}}if(n.alternate!==i)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function _g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_g(e),t!==null)return t;e=e.sibling}return null}var Te=Object.assign,pw=Symbol.for("react.element"),Ua=Symbol.for("react.transitional.element"),ws=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),Sg=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),Tg=Symbol.for("react.consumer"),wn=Symbol.for("react.context"),Pd=Symbol.for("react.forward_ref"),cc=Symbol.for("react.suspense"),dc=Symbol.for("react.suspense_list"),jd=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),fc=Symbol.for("react.activity"),gw=Symbol.for("react.memo_cache_sentinel"),mh=Symbol.iterator;function os(e){return e===null||typeof e!="object"?null:(e=mh&&e[mh]||e["@@iterator"],typeof e=="function"?e:null)}var vw=Symbol.for("react.client.reference");function hc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===vw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ur:return"Fragment";case uc:return"Profiler";case Sg:return"StrictMode";case cc:return"Suspense";case dc:return"SuspenseList";case fc:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ws:return"Portal";case wn:return e.displayName||"Context";case Tg:return(e._context.displayName||"Context")+".Consumer";case Pd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jd:return t=e.displayName||null,t!==null?t:hc(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return hc(e(t))}catch{}}return null}var _s=Array.isArray,F=yg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=hw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ii={pending:!1,data:null,method:null,action:null},mc=[],cr=-1;function ln(e){return{current:e}}function $e(e){0>cr||(e.current=mc[cr],mc[cr]=null,cr--)}function be(e,t){cr++,mc[cr]=e.current,e.current=t}var on=ln(null),$s=ln(null),ei=ln(null),Ro=ln(null);function Io(e,t){switch(be(ei,t),be($s,e),be(on,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bm(t),e=$y(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$e(on),be(on,e)}function Ur(){$e(on),$e($s),$e(ei)}function pc(e){e.memoizedState!==null&&be(Ro,e);var t=on.current,n=$y(t,e.type);t!==n&&(be($s,e),be(on,n))}function Mo(e){$s.current===e&&($e(on),$e($s)),Ro.current===e&&($e(Ro),ta._currentValue=Ii)}var uu,ph;function wi(e){if(uu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uu=t&&t[1]||"",ph=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uu+e+ph}var cu=!1;function du(e,t){if(!e||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(g){var m=g}Reflect.construct(e,[],p)}else{try{p.call()}catch(g){m=g}e.call(p.prototype)}}else{try{throw Error()}catch(g){m=g}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=i&&0<=r);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?wi(n):""}function yw(e,t){switch(e.tag){case 26:case 27:case 5:return wi(e.type);case 16:return wi("Lazy");case 13:return e.child!==t&&t!==null?wi("Suspense Fallback"):wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return du(e.type,!1);case 11:return du(e.type.render,!1);case 1:return du(e.type,!0);case 31:return wi("Activity");default:return""}}function gh(e){try{var t="",n=null;do t+=yw(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var gc=Object.prototype.hasOwnProperty,Gd=He.unstable_scheduleCallback,fu=He.unstable_cancelCallback,xw=He.unstable_shouldYield,bw=He.unstable_requestPaint,Tt=He.unstable_now,ww=He.unstable_getCurrentPriorityLevel,Eg=He.unstable_ImmediatePriority,Cg=He.unstable_UserBlockingPriority,Do=He.unstable_NormalPriority,_w=He.unstable_LowPriority,Ag=He.unstable_IdlePriority,Sw=He.log,Tw=He.unstable_setDisableYieldValue,pa=null,Et=null;function Kn(e){if(typeof Sw=="function"&&Tw(e),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(pa,e)}catch{}}var Ct=Math.clz32?Math.clz32:Aw,Ew=Math.log,Cw=Math.LN2;function Aw(e){return e>>>=0,e===0?32:31-(Ew(e)/Cw|0)|0}var La=256,Oa=262144,Pa=4194304;function _i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=_i(i):(a&=o,a!==0?r=_i(a):n||(n=o&~e,n!==0&&(r=_i(n))))):(o=i&~s,o!==0?r=_i(o):a!==0?r=_i(a):n||(n=i&~e,n!==0&&(r=_i(n)))),r===0?0:t!==0&&t!==r&&!(t&s)&&(s=r&-r,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:r}function ga(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kg(){var e=Pa;return Pa<<=1,!(Pa&62914560)&&(Pa=4194304),e}function hu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function va(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Nw(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Ct(n),p=1<<h;o[h]=0,l[h]=-1;var m=c[h];if(m!==null)for(c[h]=null,h=0;h<m.length;h++){var g=m[h];g!==null&&(g.lane&=-536870913)}n&=~p}i!==0&&Ng(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(a&~t))}function Ng(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ct(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Rg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ct(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Ig(e,t){var n=t&-t;return n=n&42?1:Bd(n),n&(e.suspendedLanes|t)?0:n}function Bd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Mg(){var e=ue.p;return e!==0?e:(e=window.event,e===void 0?32:tx(e.type))}function vh(e,t){var n=ue.p;try{return ue.p=e,t()}finally{ue.p=n}}var hi=Math.random().toString(36).slice(2),Ke="__reactFiber$"+hi,pt="__reactProps$"+hi,Fr="__reactContainer$"+hi,vc="__reactEvents$"+hi,Rw="__reactListeners$"+hi,Iw="__reactHandles$"+hi,yh="__reactResources$"+hi,ya="__reactMarker$"+hi;function qd(e){delete e[Ke],delete e[pt],delete e[vc],delete e[Rw],delete e[Iw]}function dr(e){var t=e[Ke];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fr]||n[Ke]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Em(e);e!==null;){if(n=e[Ke])return n;e=Em(e)}return t}e=n,n=e.parentNode}return null}function Jr(e){if(e=e[Ke]||e[Fr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ss(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(N(33))}function Tr(e){var t=e[yh];return t||(t=e[yh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[ya]=!0}var Dg=new Set,Ug={};function qi(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(Ug[e]=t,e=0;e<t.length;e++)Dg.add(t[e])}var Mw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xh={},bh={};function Dw(e){return gc.call(bh,e)?!0:gc.call(xh,e)?!1:Mw.test(e)?bh[e]=!0:(xh[e]=!0,!1)}function uo(e,t,n){if(Dw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ja(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function hn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uw(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yc(e){if(!e._valueTracker){var t=Lg(e)?"checked":"value";e._valueTracker=Uw(e,t,""+e[t])}}function Og(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Lg(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Uo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lw=/[\n"\\]/g;function Lt(e){return e.replace(Lw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function xc(e,t,n,i,r,s,a,o){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Mt(t)):e.value!==""+Mt(t)&&(e.value=""+Mt(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?bc(e,a,Mt(t)):n!=null?bc(e,a,Mt(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+Mt(o):e.removeAttribute("name")}function Pg(e,t,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){yc(e);return}n=n!=null?""+Mt(n):"",t=t!=null?""+Mt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a),yc(e)}function bc(e,t,n){t==="number"&&Uo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Er(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Mt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function jg(e,t,n){if(t!=null&&(t=""+Mt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Mt(n):""}function Gg(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(N(92));if(_s(i)){if(1<i.length)throw Error(N(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Mt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),yc(e)}function Or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ow=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wh(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Ow.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Bg(e,t,n){if(t!=null&&typeof t!="object")throw Error(N(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&wh(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&wh(e,s,t[s])}function Vd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function co(e){return jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _n(){}var wc=null;function $d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fr=null,Cr=null;function _h(e){var t=Jr(e);if(t&&(e=t.stateNode)){var n=e[pt]||null;e:switch(e=t.stateNode,t.type){case"input":if(xc(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[pt]||null;if(!r)throw Error(N(90));xc(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Og(i)}break e;case"textarea":jg(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Er(e,!!n.multiple,t,!1)}}}var mu=!1;function Hg(e,t,n){if(mu)return e(t,n);mu=!0;try{var i=e(t);return i}finally{if(mu=!1,(fr!==null||Cr!==null)&&(Dl(),fr&&(t=fr,e=Cr,Cr=fr=null,_h(t),e)))for(t=0;t<e.length;t++)_h(e[t])}}function zs(e,t){var n=e.stateNode;if(n===null)return null;var i=n[pt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_c=!1;if(kn)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){_c=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{_c=!1}var Wn=null,zd=null,fo=null;function qg(){if(fo)return fo;var e,t=zd,n=t.length,i,r="value"in Wn?Wn.value:Wn.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[s-i];i++);return fo=r.slice(e,1<i?1-i:void 0)}function ho(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ga(){return!0}function Sh(){return!1}function gt(e){function t(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ga:Sh,this.isPropagationStopped=Sh,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),t}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=gt(Vi),xa=Te({},Vi,{view:0,detail:0}),Gw=gt(xa),pu,gu,us,Sl=Te({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(pu=e.screenX-us.screenX,gu=e.screenY-us.screenY):gu=pu=0,us=e),pu)},movementY:function(e){return"movementY"in e?e.movementY:gu}}),Th=gt(Sl),Bw=Te({},Sl,{dataTransfer:0}),Hw=gt(Bw),qw=Te({},xa,{relatedTarget:0}),vu=gt(qw),Vw=Te({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),$w=gt(Vw),zw=Te({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fw=gt(zw),Jw=Te({},Vi,{data:0}),Eh=gt(Jw),Yw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ww={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ww[e])?!!t[e]:!1}function Fd(){return Xw}var Qw=Te({},xa,{key:function(e){if(e.key){var t=Yw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fd,charCode:function(e){return e.type==="keypress"?ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zw=gt(Qw),e_=Te({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ch=gt(e_),t_=Te({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fd}),n_=gt(t_),i_=Te({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),r_=gt(i_),s_=Te({},Sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a_=gt(s_),o_=Te({},Vi,{newState:0,oldState:0}),l_=gt(o_),u_=[9,13,27,32],Jd=kn&&"CompositionEvent"in window,Ns=null;kn&&"documentMode"in document&&(Ns=document.documentMode);var c_=kn&&"TextEvent"in window&&!Ns,Vg=kn&&(!Jd||Ns&&8<Ns&&11>=Ns),Ah=" ",kh=!1;function $g(e,t){switch(e){case"keyup":return u_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function d_(e,t){switch(e){case"compositionend":return zg(t);case"keypress":return t.which!==32?null:(kh=!0,Ah);case"textInput":return e=t.data,e===Ah&&kh?null:e;default:return null}}function f_(e,t){if(hr)return e==="compositionend"||!Jd&&$g(e,t)?(e=qg(),fo=zd=Wn=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vg&&t.locale!=="ko"?null:t.data;default:return null}}var h_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h_[e.type]:t==="textarea"}function Fg(e,t,n,i){fr?Cr?Cr.push(i):Cr=[i]:fr=i,t=Qo(t,"onChange"),0<t.length&&(n=new _l("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Rs=null,Fs=null;function m_(e){Hy(e,0)}function Tl(e){var t=Ss(e);if(Og(t))return e}function Rh(e,t){if(e==="change")return t}var Jg=!1;if(kn){var yu;if(kn){var xu="oninput"in document;if(!xu){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),xu=typeof Ih.oninput=="function"}yu=xu}else yu=!1;Jg=yu&&(!document.documentMode||9<document.documentMode)}function Mh(){Rs&&(Rs.detachEvent("onpropertychange",Yg),Fs=Rs=null)}function Yg(e){if(e.propertyName==="value"&&Tl(Fs)){var t=[];Fg(t,Fs,e,$d(e)),Hg(m_,t)}}function p_(e,t,n){e==="focusin"?(Mh(),Rs=t,Fs=n,Rs.attachEvent("onpropertychange",Yg)):e==="focusout"&&Mh()}function g_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tl(Fs)}function v_(e,t){if(e==="click")return Tl(t)}function y_(e,t){if(e==="input"||e==="change")return Tl(t)}function x_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:x_;function Js(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!gc.call(t,r)||!kt(e[r],t[r]))return!1}return!0}function Dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uh(e,t){var n=Dh(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dh(n)}}function Kg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Uo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uo(e.document)}return t}function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var b_=kn&&"documentMode"in document&&11>=document.documentMode,mr=null,Sc=null,Is=null,Tc=!1;function Lh(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tc||mr==null||mr!==Uo(i)||(i=mr,"selectionStart"in i&&Yd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Is&&Js(Is,i)||(Is=i,i=Qo(Sc,"onSelect"),0<i.length&&(t=new _l("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mr)))}function yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pr={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionrun:yi("Transition","TransitionRun"),transitionstart:yi("Transition","TransitionStart"),transitioncancel:yi("Transition","TransitionCancel"),transitionend:yi("Transition","TransitionEnd")},bu={},Xg={};kn&&(Xg=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function $i(e){if(bu[e])return bu[e];if(!pr[e])return e;var t=pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Xg)return bu[e]=t[n];return e}var Qg=$i("animationend"),Zg=$i("animationiteration"),ev=$i("animationstart"),w_=$i("transitionrun"),__=$i("transitionstart"),S_=$i("transitioncancel"),tv=$i("transitionend"),nv=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function Qt(e,t){nv.set(e,t),qi(t,[e])}var Lo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},It=[],gr=0,Kd=0;function El(){for(var e=gr,t=Kd=gr=0;t<e;){var n=It[t];It[t++]=null;var i=It[t];It[t++]=null;var r=It[t];It[t++]=null;var s=It[t];if(It[t++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&iv(n,r,s)}}function Cl(e,t,n,i){It[gr++]=e,It[gr++]=t,It[gr++]=n,It[gr++]=i,Kd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Wd(e,t,n,i){return Cl(e,t,n,i),Oo(e)}function zi(e,t){return Cl(e,null,null,t),Oo(e)}function iv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,r&&t!==null&&(r=31-Ct(n),e=s.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),s):null}function Oo(e){if(50<Bs)throw Bs=0,Fc=null,Error(N(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vr={};function T_(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,n,i){return new T_(e,t,n,i)}function Xd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tn(e,t){var n=e.alternate;return n===null?(n=wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function rv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function mo(e,t,n,i,r,s){var a=0;if(i=e,typeof e=="function")Xd(e)&&(a=1);else if(typeof e=="string")a=NS(e,n,on.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case fc:return e=wt(31,n,t,r),e.elementType=fc,e.lanes=s,e;case ur:return Mi(n.children,r,s,t);case Sg:a=8,r|=24;break;case uc:return e=wt(12,n,t,r|2),e.elementType=uc,e.lanes=s,e;case cc:return e=wt(13,n,t,r),e.elementType=cc,e.lanes=s,e;case dc:return e=wt(19,n,t,r),e.elementType=dc,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wn:a=10;break e;case Tg:a=9;break e;case Pd:a=11;break e;case jd:a=14;break e;case Hn:a=16,i=null;break e}a=29,n=Error(N(130,e===null?"null":typeof e,"")),i=null}return t=wt(a,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Mi(e,t,n,i){return e=wt(7,e,i,t),e.lanes=n,e}function wu(e,t,n){return e=wt(6,e,null,t),e.lanes=n,e}function sv(e){var t=wt(18,null,null,0);return t.stateNode=e,t}function _u(e,t,n){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oh=new WeakMap;function Ot(e,t){if(typeof e=="object"&&e!==null){var n=Oh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:gh(t)},Oh.set(e,t),t)}return{value:e,source:t,stack:gh(t)}}var yr=[],xr=0,Po=null,Ys=0,Dt=[],Ut=0,ui=null,rn=1,sn="";function xn(e,t){yr[xr++]=Ys,yr[xr++]=Po,Po=e,Ys=t}function av(e,t,n){Dt[Ut++]=rn,Dt[Ut++]=sn,Dt[Ut++]=ui,ui=e;var i=rn;e=sn;var r=32-Ct(i)-1;i&=~(1<<r),n+=1;var s=32-Ct(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rn=1<<32-Ct(t)+r|n<<r|i,sn=s+e}else rn=1<<s|n<<r|i,sn=e}function Qd(e){e.return!==null&&(xn(e,1),av(e,1,0))}function Zd(e){for(;e===Po;)Po=yr[--xr],yr[xr]=null,Ys=yr[--xr],yr[xr]=null;for(;e===ui;)ui=Dt[--Ut],Dt[Ut]=null,sn=Dt[--Ut],Dt[Ut]=null,rn=Dt[--Ut],Dt[Ut]=null}function ov(e,t){Dt[Ut++]=rn,Dt[Ut++]=sn,Dt[Ut++]=ui,rn=t.id,sn=t.overflow,ui=e}var We=null,_e=null,re=!1,ti=null,Pt=!1,Cc=Error(N(519));function ci(e){var t=Error(N(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ks(Ot(t,e)),Cc}function Ph(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ke]=e,t[pt]=i,n){case"dialog":te("cancel",t),te("close",t);break;case"iframe":case"object":case"embed":te("load",t);break;case"video":case"audio":for(n=0;n<Zs.length;n++)te(Zs[n],t);break;case"source":te("error",t);break;case"img":case"image":case"link":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"input":te("invalid",t),Pg(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":te("invalid",t);break;case"textarea":te("invalid",t),Gg(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Vy(t.textContent,n)?(i.popover!=null&&(te("beforetoggle",t),te("toggle",t)),i.onScroll!=null&&te("scroll",t),i.onScrollEnd!=null&&te("scrollend",t),i.onClick!=null&&(t.onclick=_n),t=!0):t=!1,t||ci(e,!0)}function jh(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Pt=!1;return;case 27:case 3:Pt=!0;return;default:We=We.return}}function Yi(e){if(e!==We)return!1;if(!re)return jh(e),re=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Xc(e.type,e.memoizedProps)),n=!n),n&&_e&&ci(e),jh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));_e=Tm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));_e=Tm(e)}else t===27?(t=_e,mi(e.type)?(e=td,td=null,_e=e):_e=t):_e=We?Gt(e.stateNode.nextSibling):null;return!0}function Oi(){_e=We=null,re=!1}function Su(){var e=ti;return e!==null&&(ht===null?ht=e:ht.push.apply(ht,e),ti=null),e}function Ks(e){ti===null?ti=[e]:ti.push(e)}var Ac=ln(null),Fi=null,Sn=null;function $n(e,t,n){be(Ac,t._currentValue),t._currentValue=n}function En(e){e._currentValue=Ac.current,$e(Ac)}function kc(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Nc(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<t.length;l++)if(o.context===t[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),kc(s.return,n,e),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(N(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),kc(a,n,e),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Yr(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(N(387));if(a=a.memoizedProps,a!==null){var o=r.type;kt(r.pendingProps.value,a.value)||(e!==null?e.push(o):e=[o])}}else if(r===Ro.current){if(a=r.alternate,a===null)throw Error(N(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(ta):e=[ta])}r=r.return}e!==null&&Nc(t,e,n,i),t.flags|=262144}function jo(e){for(e=e.firstContext;e!==null;){if(!kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Fi=e,Sn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xe(e){return lv(Fi,e)}function Ba(e,t){return Fi===null&&Pi(e),lv(e,t)}function lv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Sn===null){if(e===null)throw Error(N(308));Sn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sn=Sn.next=t;return n}var E_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},C_=He.unstable_scheduleCallback,A_=He.unstable_NormalPriority,Oe={$$typeof:wn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new E_,data:new Map,refCount:0}}function ba(e){e.refCount--,e.refCount===0&&C_(A_,function(){e.controller.abort()})}var Ms=null,Rc=0,Pr=0,Ar=null;function k_(e,t){if(Ms===null){var n=Ms=[];Rc=0,Pr=Cf(),Ar={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Rc++,t.then(Gh,Gh),t}function Gh(){if(--Rc===0&&Ms!==null){Ar!==null&&(Ar.status="fulfilled");var e=Ms;Ms=null,Pr=0,Ar=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function N_(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Bh=F.S;F.S=function(e,t){_y=Tt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&k_(e,t),Bh!==null&&Bh(e,t)};var Di=ln(null);function tf(){var e=Di.current;return e!==null?e:ve.pooledCache}function po(e,t){t===null?be(Di,Di.current):be(Di,t.pool)}function uv(){var e=tf();return e===null?null:{parent:Oe._currentValue,pool:e}}var Kr=Error(N(460)),nf=Error(N(474)),Al=Error(N(542)),Go={then:function(){}};function Hh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(_n,_n),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e;default:if(typeof t.status=="string")t.then(_n,_n);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(N(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e}throw Ui=t,Kr}}function Si(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ui=n,Kr):n}}var Ui=null;function qh(){if(Ui===null)throw Error(N(459));var e=Ui;return Ui=null,e}function Vh(e){if(e===Kr||e===Al)throw Error(N(483))}var kr=null,Ws=0;function Ha(e){var t=Ws;return Ws+=1,kr===null&&(kr=[]),cv(kr,e,t)}function cs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qa(e,t){throw t.$$typeof===pw?Error(N(525)):(e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dv(e){function t(y,x){if(e){var w=y.deletions;w===null?(y.deletions=[x],y.flags|=16):w.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function i(y){for(var x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function r(y,x){return y=Tn(y,x),y.index=0,y.sibling=null,y}function s(y,x,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<x?(y.flags|=67108866,x):w):(y.flags|=67108866,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function o(y,x,w,S){return x===null||x.tag!==6?(x=wu(w,y.mode,S),x.return=y,x):(x=r(x,w),x.return=y,x)}function l(y,x,w,S){var E=w.type;return E===ur?h(y,x,w.props.children,S,w.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hn&&Si(E)===x.type)?(x=r(x,w.props),cs(x,w),x.return=y,x):(x=mo(w.type,w.key,w.props,null,y.mode,S),cs(x,w),x.return=y,x)}function c(y,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=_u(w,y.mode,S),x.return=y,x):(x=r(x,w.children||[]),x.return=y,x)}function h(y,x,w,S,E){return x===null||x.tag!==7?(x=Mi(w,y.mode,S,E),x.return=y,x):(x=r(x,w),x.return=y,x)}function p(y,x,w){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=wu(""+x,y.mode,w),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ua:return w=mo(x.type,x.key,x.props,null,y.mode,w),cs(w,x),w.return=y,w;case ws:return x=_u(x,y.mode,w),x.return=y,x;case Hn:return x=Si(x),p(y,x,w)}if(_s(x)||os(x))return x=Mi(x,y.mode,w,null),x.return=y,x;if(typeof x.then=="function")return p(y,Ha(x),w);if(x.$$typeof===wn)return p(y,Ba(y,x),w);qa(y,x)}return null}function m(y,x,w,S){var E=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return E!==null?null:o(y,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ua:return w.key===E?l(y,x,w,S):null;case ws:return w.key===E?c(y,x,w,S):null;case Hn:return w=Si(w),m(y,x,w,S)}if(_s(w)||os(w))return E!==null?null:h(y,x,w,S,null);if(typeof w.then=="function")return m(y,x,Ha(w),S);if(w.$$typeof===wn)return m(y,x,Ba(y,w),S);qa(y,w)}return null}function g(y,x,w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(w)||null,o(x,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ua:return y=y.get(S.key===null?w:S.key)||null,l(x,y,S,E);case ws:return y=y.get(S.key===null?w:S.key)||null,c(x,y,S,E);case Hn:return S=Si(S),g(y,x,w,S,E)}if(_s(S)||os(S))return y=y.get(w)||null,h(x,y,S,E,null);if(typeof S.then=="function")return g(y,x,w,Ha(S),E);if(S.$$typeof===wn)return g(y,x,w,Ba(x,S),E);qa(x,S)}return null}function v(y,x,w,S){for(var E=null,A=null,C=x,R=x=0,k=null;C!==null&&R<w.length;R++){C.index>R?(k=C,C=null):k=C.sibling;var M=m(y,C,w[R],S);if(M===null){C===null&&(C=k);break}e&&C&&M.alternate===null&&t(y,C),x=s(M,x,R),A===null?E=M:A.sibling=M,A=M,C=k}if(R===w.length)return n(y,C),re&&xn(y,R),E;if(C===null){for(;R<w.length;R++)C=p(y,w[R],S),C!==null&&(x=s(C,x,R),A===null?E=C:A.sibling=C,A=C);return re&&xn(y,R),E}for(C=i(C);R<w.length;R++)k=g(C,y,R,w[R],S),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?R:k.key),x=s(k,x,R),A===null?E=k:A.sibling=k,A=k);return e&&C.forEach(function(G){return t(y,G)}),re&&xn(y,R),E}function b(y,x,w,S){if(w==null)throw Error(N(151));for(var E=null,A=null,C=x,R=x=0,k=null,M=w.next();C!==null&&!M.done;R++,M=w.next()){C.index>R?(k=C,C=null):k=C.sibling;var G=m(y,C,M.value,S);if(G===null){C===null&&(C=k);break}e&&C&&G.alternate===null&&t(y,C),x=s(G,x,R),A===null?E=G:A.sibling=G,A=G,C=k}if(M.done)return n(y,C),re&&xn(y,R),E;if(C===null){for(;!M.done;R++,M=w.next())M=p(y,M.value,S),M!==null&&(x=s(M,x,R),A===null?E=M:A.sibling=M,A=M);return re&&xn(y,R),E}for(C=i(C);!M.done;R++,M=w.next())M=g(C,y,R,M.value,S),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?R:M.key),x=s(M,x,R),A===null?E=M:A.sibling=M,A=M);return e&&C.forEach(function(Y){return t(y,Y)}),re&&xn(y,R),E}function _(y,x,w,S){if(typeof w=="object"&&w!==null&&w.type===ur&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ua:e:{for(var E=w.key;x!==null;){if(x.key===E){if(E=w.type,E===ur){if(x.tag===7){n(y,x.sibling),S=r(x,w.props.children),S.return=y,y=S;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hn&&Si(E)===x.type){n(y,x.sibling),S=r(x,w.props),cs(S,w),S.return=y,y=S;break e}n(y,x);break}else t(y,x);x=x.sibling}w.type===ur?(S=Mi(w.props.children,y.mode,S,w.key),S.return=y,y=S):(S=mo(w.type,w.key,w.props,null,y.mode,S),cs(S,w),S.return=y,y=S)}return a(y);case ws:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(y,x.sibling),S=r(x,w.children||[]),S.return=y,y=S;break e}else{n(y,x);break}else t(y,x);x=x.sibling}S=_u(w,y.mode,S),S.return=y,y=S}return a(y);case Hn:return w=Si(w),_(y,x,w,S)}if(_s(w))return v(y,x,w,S);if(os(w)){if(E=os(w),typeof E!="function")throw Error(N(150));return w=E.call(w),b(y,x,w,S)}if(typeof w.then=="function")return _(y,x,Ha(w),S);if(w.$$typeof===wn)return _(y,x,Ba(y,w),S);qa(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,x!==null&&x.tag===6?(n(y,x.sibling),S=r(x,w),S.return=y,y=S):(n(y,x),S=wu(w,y.mode,S),S.return=y,y=S),a(y)):n(y,x)}return function(y,x,w,S){try{Ws=0;var E=_(y,x,w,S);return kr=null,E}catch(C){if(C===Kr||C===Al)throw C;var A=wt(29,C,null,y.mode);return A.lanes=S,A.return=y,A}finally{}}}var ji=dv(!0),fv=dv(!1),qn=!1;function rf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Oo(e),iv(e,null,n),t}return Cl(e,i,t,n),Oo(e)}function Ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rg(e,n)}}function Tu(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Mc=!1;function Us(){if(Mc){var e=Ar;if(e!==null)throw e}}function Ls(e,t,n,i){Mc=!1;var r=e.updateQueue;qn=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;a=0,h=c=l=null,o=s;do{var m=o.lane&-536870913,g=m!==o.lane;if(g?(ie&m)===m:(i&m)===m){m!==0&&m===Pr&&(Mc=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var v=e,b=o;m=t;var _=n;switch(b.tag){case 1:if(v=b.payload,typeof v=="function"){p=v.call(_,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,m=typeof v=="function"?v.call(_,p,m):v,m==null)break e;p=Te({},p,m);break e;case 2:qn=!0}}m=o.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=r.callbacks,g===null?r.callbacks=[m]:g.push(m))}else g={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,l=p):h=h.next=g,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(l=p),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),fi|=a,e.lanes=a,e.memoizedState=p}}function hv(e,t){if(typeof e!="function")throw Error(N(191,e));e.call(t)}function mv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hv(n[e],t)}var jr=ln(null),Bo=ln(0);function $h(e,t){e=Mn,be(Bo,e),be(jr,t),Mn=e|t.baseLanes}function Dc(){be(Bo,Mn),be(jr,jr.current)}function sf(){Mn=Bo.current,$e(jr),$e(Bo)}var Nt=ln(null),jt=null;function zn(e){var t=e.alternate;be(Ie,Ie.current&1),be(Nt,e),jt===null&&(t===null||jr.current!==null||t.memoizedState!==null)&&(jt=e)}function Uc(e){be(Ie,Ie.current),be(Nt,e),jt===null&&(jt=e)}function pv(e){e.tag===22?(be(Ie,Ie.current),be(Nt,e),jt===null&&(jt=e)):Fn()}function Fn(){be(Ie,Ie.current),be(Nt,Nt.current)}function bt(e){$e(Nt),jt===e&&(jt=null),$e(Ie)}var Ie=ln(0);function Ho(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Zc(n)||ed(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nn=0,ee=null,pe=null,Ue=null,qo=!1,Nr=!1,Gi=!1,Vo=0,Xs=0,Rr=null,R_=0;function Ae(){throw Error(N(321))}function af(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function of(e,t,n,i,r,s){return Nn=s,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=e===null||e.memoizedState===null?Fv:yf,Gi=!1,s=n(i,r),Gi=!1,Nr&&(s=vv(t,n,i,r)),gv(e),s}function gv(e){F.H=Qs;var t=pe!==null&&pe.next!==null;if(Nn=0,Ue=pe=ee=null,qo=!1,Xs=0,Rr=null,t)throw Error(N(300));e===null||je||(e=e.dependencies,e!==null&&jo(e)&&(je=!0))}function vv(e,t,n,i){ee=e;var r=0;do{if(Nr&&(Rr=null),Xs=0,Nr=!1,25<=r)throw Error(N(301));if(r+=1,Ue=pe=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}F.H=Jv,s=t(n,i)}while(Nr);return s}function I_(){var e=F.H,t=e.useState()[0];return t=typeof t.then=="function"?wa(t):t,e=e.useState()[0],(pe!==null?pe.memoizedState:null)!==e&&(ee.flags|=1024),t}function lf(){var e=Vo!==0;return Vo=0,e}function uf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function cf(e){if(qo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}qo=!1}Nn=0,Ue=pe=ee=null,Nr=!1,Xs=Vo=0,Rr=null}function rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ee.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Me(){if(pe===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=Ue===null?ee.memoizedState:Ue.next;if(t!==null)Ue=t,pe=e;else{if(e===null)throw ee.alternate===null?Error(N(467)):Error(N(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Ue===null?ee.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wa(e){var t=Xs;return Xs+=1,Rr===null&&(Rr=[]),e=cv(Rr,e,t),t=ee,(Ue===null?t.memoizedState:Ue.next)===null&&(t=t.alternate,F.H=t===null||t.memoizedState===null?Fv:yf),e}function Nl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wa(e);if(e.$$typeof===wn)return Xe(e)}throw Error(N(438,String(e)))}function df(e){var t=null,n=ee.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=ee.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=kl(),ee.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=gw;return t.index++,n}function Rn(e,t){return typeof t=="function"?t(e):t}function go(e){var t=Me();return ff(t,pe,e)}function ff(e,t,n){var i=e.queue;if(i===null)throw Error(N(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var o=a=null,l=null,c=t,h=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(ie&p)===p:(Nn&p)===p){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Pr&&(h=!0);else if((Nn&m)===m){c=c.next,m===Pr&&(h=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=p,a=s):l=l.next=p,ee.lanes|=m,fi|=m;p=c.action,Gi&&n(s,p),s=c.hasEagerState?c.eagerState:n(s,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=m,a=s):l=l.next=m,ee.lanes|=p,fi|=p;c=c.next}while(c!==null&&c!==t);if(l===null?a=s:l.next=o,!kt(s,e.memoizedState)&&(je=!0,h&&(n=Ar,n!==null)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Eu(e){var t=Me(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);kt(s,t.memoizedState)||(je=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function yv(e,t,n){var i=ee,r=Me(),s=re;if(s){if(n===void 0)throw Error(N(407));n=n()}else n=t();var a=!kt((pe||r).memoizedState,n);if(a&&(r.memoizedState=n,je=!0),r=r.queue,hf(wv.bind(null,i,r,e),[e]),r.getSnapshot!==t||a||Ue!==null&&Ue.memoizedState.tag&1){if(i.flags|=2048,Gr(9,{destroy:void 0},bv.bind(null,i,r,n,t),null),ve===null)throw Error(N(349));s||Nn&127||xv(i,t,n)}return n}function xv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ee.updateQueue,t===null?(t=kl(),ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bv(e,t,n,i){t.value=n,t.getSnapshot=i,_v(t)&&Sv(e)}function wv(e,t,n){return n(function(){_v(t)&&Sv(e)})}function _v(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function Sv(e){var t=zi(e,2);t!==null&&mt(t,e,2)}function Lc(e){var t=rt();if(typeof e=="function"){var n=e;if(e=n(),Gi){Kn(!0);try{n()}finally{Kn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t}function Tv(e,t,n,i){return e.baseState=n,ff(e,pe,typeof i=="function"?i:Rn)}function M_(e,t,n,i,r){if(Il(e))throw Error(N(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};F.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,Ev(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ev(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=F.T,a={};F.T=a;try{var o=n(r,i),l=F.S;l!==null&&l(a,o),zh(e,t,o)}catch(c){Oc(e,t,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),F.T=s}}else try{s=n(r,i),zh(e,t,s)}catch(c){Oc(e,t,c)}}function zh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Fh(e,t,i)},function(i){return Oc(e,t,i)}):Fh(e,t,n)}function Fh(e,t,n){t.status="fulfilled",t.value=n,Cv(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ev(e,n)))}function Oc(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Cv(t),t=t.next;while(t!==i)}e.action=null}function Cv(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Av(e,t){return t}function Jh(e,t){if(re){var n=ve.formState;if(n!==null){e:{var i=ee;if(re){if(_e){t:{for(var r=_e,s=Pt;r.nodeType!==8;){if(!s){r=null;break t}if(r=Gt(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){_e=Gt(r.nextSibling),i=r.data==="F!";break e}}ci(i)}i=!1}i&&(t=n[0])}}return n=rt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Av,lastRenderedState:t},n.queue=i,n=Vv.bind(null,ee,i),i.dispatch=n,i=Lc(!1),s=vf.bind(null,ee,!1,i.queue),i=rt(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=M_.bind(null,ee,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Yh(e){var t=Me();return kv(t,pe,e)}function kv(e,t,n){if(t=ff(e,t,Av)[0],e=go(Rn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=wa(t)}catch(a){throw a===Kr?Al:a}else i=t;t=Me();var r=t.queue,s=r.dispatch;return n!==t.memoizedState&&(ee.flags|=2048,Gr(9,{destroy:void 0},D_.bind(null,r,n),null)),[i,s,e]}function D_(e,t){e.action=t}function Kh(e){var t=Me(),n=pe;if(n!==null)return kv(t,n,e);Me(),t=t.memoizedState,n=Me();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Gr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=ee.updateQueue,t===null&&(t=kl(),ee.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Nv(){return Me().memoizedState}function vo(e,t,n,i){var r=rt();ee.flags|=e,r.memoizedState=Gr(1|t,{destroy:void 0},n,i===void 0?null:i)}function Rl(e,t,n,i){var r=Me();i=i===void 0?null:i;var s=r.memoizedState.inst;pe!==null&&i!==null&&af(i,pe.memoizedState.deps)?r.memoizedState=Gr(t,s,n,i):(ee.flags|=e,r.memoizedState=Gr(1|t,s,n,i))}function Wh(e,t){vo(8390656,8,e,t)}function hf(e,t){Rl(2048,8,e,t)}function U_(e){ee.flags|=4;var t=ee.updateQueue;if(t===null)t=kl(),ee.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Rv(e){var t=Me().memoizedState;return U_({ref:t,nextImpl:e}),function(){if(le&2)throw Error(N(440));return t.impl.apply(void 0,arguments)}}function Iv(e,t){return Rl(4,2,e,t)}function Mv(e,t){return Rl(4,4,e,t)}function Dv(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uv(e,t,n){n=n!=null?n.concat([e]):null,Rl(4,4,Dv.bind(null,t,e),n)}function mf(){}function Lv(e,t){var n=Me();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&af(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ov(e,t){var n=Me();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&af(t,i[1]))return i[0];if(i=e(),Gi){Kn(!0);try{e()}finally{Kn(!1)}}return n.memoizedState=[i,t],i}function pf(e,t,n){return n===void 0||Nn&1073741824&&!(ie&261930)?e.memoizedState=t:(e.memoizedState=n,e=Ty(),ee.lanes|=e,fi|=e,n)}function Pv(e,t,n,i){return kt(n,t)?n:jr.current!==null?(e=pf(e,n,i),kt(e,t)||(je=!0),e):!(Nn&42)||Nn&1073741824&&!(ie&261930)?(je=!0,e.memoizedState=n):(e=Ty(),ee.lanes|=e,fi|=e,t)}function jv(e,t,n,i,r){var s=ue.p;ue.p=s!==0&&8>s?s:8;var a=F.T,o={};F.T=o,vf(e,!1,t,n);try{var l=r(),c=F.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=N_(l,i);Os(e,t,h,At(e))}else Os(e,t,i,At(e))}catch(p){Os(e,t,{then:function(){},status:"rejected",reason:p},At())}finally{ue.p=s,a!==null&&o.types!==null&&(a.types=o.types),F.T=a}}function L_(){}function Pc(e,t,n,i){if(e.tag!==5)throw Error(N(476));var r=Gv(e).queue;jv(e,r,t,Ii,n===null?L_:function(){return Bv(e),n(i)})}function Gv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ii,baseState:Ii,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:Ii},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bv(e){var t=Gv(e);t.next===null&&(t=e.alternate.memoizedState),Os(e,t.next.queue,{},At())}function gf(){return Xe(ta)}function Hv(){return Me().memoizedState}function qv(){return Me().memoizedState}function O_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=At();e=ni(n);var i=ii(t,e,n);i!==null&&(mt(i,t,n),Ds(i,t,n)),t={cache:ef()},e.payload=t;return}t=t.return}}function P_(e,t,n){var i=At();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Il(e)?$v(t,n):(n=Wd(e,t,n,i),n!==null&&(mt(n,e,i),zv(n,t,i)))}function Vv(e,t,n){var i=At();Os(e,t,n,i)}function Os(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Il(e))$v(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,kt(o,a))return Cl(e,t,r,0),ve===null&&El(),!1}catch{}finally{}if(n=Wd(e,t,r,i),n!==null)return mt(n,e,i),zv(n,t,i),!0}return!1}function vf(e,t,n,i){if(i={lane:2,revertLane:Cf(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Il(e)){if(t)throw Error(N(479))}else t=Wd(e,n,i,2),t!==null&&mt(t,e,2)}function Il(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function $v(e,t){Nr=qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zv(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rg(e,n)}}var Qs={readContext:Xe,use:Nl,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae};Qs.useEffectEvent=Ae;var Fv={readContext:Xe,use:Nl,useCallback:function(e,t){return rt().memoizedState=[e,t===void 0?null:t],e},useContext:Xe,useEffect:Wh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vo(4194308,4,Dv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vo(4194308,4,e,t)},useInsertionEffect:function(e,t){vo(4,2,e,t)},useMemo:function(e,t){var n=rt();t=t===void 0?null:t;var i=e();if(Gi){Kn(!0);try{e()}finally{Kn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=rt();if(n!==void 0){var r=n(t);if(Gi){Kn(!0);try{n(t)}finally{Kn(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=P_.bind(null,ee,e),[i.memoizedState,e]},useRef:function(e){var t=rt();return e={current:e},t.memoizedState=e},useState:function(e){e=Lc(e);var t=e.queue,n=Vv.bind(null,ee,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:mf,useDeferredValue:function(e,t){var n=rt();return pf(n,e,t)},useTransition:function(){var e=Lc(!1);return e=jv.bind(null,ee,e.queue,!0,!1),rt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ee,r=rt();if(re){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),ve===null)throw Error(N(349));ie&127||xv(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Wh(wv.bind(null,i,s,e),[e]),i.flags|=2048,Gr(9,{destroy:void 0},bv.bind(null,i,s,n,t),null),n},useId:function(){var e=rt(),t=ve.identifierPrefix;if(re){var n=sn,i=rn;n=(i&~(1<<32-Ct(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Vo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=R_++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:gf,useFormState:Jh,useActionState:Jh,useOptimistic:function(e){var t=rt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=vf.bind(null,ee,!0,n),n.dispatch=t,[e,t]},useMemoCache:df,useCacheRefresh:function(){return rt().memoizedState=O_.bind(null,ee)},useEffectEvent:function(e){var t=rt(),n={impl:e};return t.memoizedState=n,function(){if(le&2)throw Error(N(440));return n.impl.apply(void 0,arguments)}}},yf={readContext:Xe,use:Nl,useCallback:Lv,useContext:Xe,useEffect:hf,useImperativeHandle:Uv,useInsertionEffect:Iv,useLayoutEffect:Mv,useMemo:Ov,useReducer:go,useRef:Nv,useState:function(){return go(Rn)},useDebugValue:mf,useDeferredValue:function(e,t){var n=Me();return Pv(n,pe.memoizedState,e,t)},useTransition:function(){var e=go(Rn)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:wa(e),t]},useSyncExternalStore:yv,useId:Hv,useHostTransitionStatus:gf,useFormState:Yh,useActionState:Yh,useOptimistic:function(e,t){var n=Me();return Tv(n,pe,e,t)},useMemoCache:df,useCacheRefresh:qv};yf.useEffectEvent=Rv;var Jv={readContext:Xe,use:Nl,useCallback:Lv,useContext:Xe,useEffect:hf,useImperativeHandle:Uv,useInsertionEffect:Iv,useLayoutEffect:Mv,useMemo:Ov,useReducer:Eu,useRef:Nv,useState:function(){return Eu(Rn)},useDebugValue:mf,useDeferredValue:function(e,t){var n=Me();return pe===null?pf(n,e,t):Pv(n,pe.memoizedState,e,t)},useTransition:function(){var e=Eu(Rn)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:wa(e),t]},useSyncExternalStore:yv,useId:Hv,useHostTransitionStatus:gf,useFormState:Kh,useActionState:Kh,useOptimistic:function(e,t){var n=Me();return pe!==null?Tv(n,pe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:df,useCacheRefresh:qv};Jv.useEffectEvent=Rv;function Cu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jc={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=At(),r=ni(i);r.payload=t,n!=null&&(r.callback=n),t=ii(e,r,i),t!==null&&(mt(t,e,i),Ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=At(),r=ni(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=ii(e,r,i),t!==null&&(mt(t,e,i),Ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=At(),i=ni(n);i.tag=2,t!=null&&(i.callback=t),t=ii(e,i,n),t!==null&&(mt(t,e,n),Ds(t,e,n))}};function Xh(e,t,n,i,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Js(n,i)||!Js(r,s):!0}function Qh(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function Bi(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Te({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function Yv(e){Lo(e)}function Kv(e){console.error(e)}function Wv(e){Lo(e)}function $o(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Zh(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Gc(e,t,n){return n=ni(n),n.tag=3,n.payload={element:null},n.callback=function(){$o(e,t)},n}function Xv(e){return e=ni(e),e.tag=3,e}function Qv(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Zh(t,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Zh(t,n,i),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function j_(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Yr(t,n,r,!0),n=Nt.current,n!==null){switch(n.tag){case 31:case 13:return jt===null?Ko():n.alternate===null&&Ne===0&&(Ne=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Go?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Pu(e,i,r)),!1;case 22:return n.flags|=65536,i===Go?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Pu(e,i,r)),!1}throw Error(N(435,n.tag))}return Pu(e,i,r),Ko(),!1}if(re)return t=Nt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==Cc&&(e=Error(N(422),{cause:i}),Ks(Ot(e,n)))):(i!==Cc&&(t=Error(N(423),{cause:i}),Ks(Ot(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Ot(i,n),r=Gc(e.stateNode,i,r),Tu(e,r),Ne!==4&&(Ne=2)),!1;var s=Error(N(520),{cause:i});if(s=Ot(s,n),Gs===null?Gs=[s]:Gs.push(s),Ne!==4&&(Ne=2),t===null)return!0;i=Ot(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Gc(n.stateNode,i,e),Tu(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ri===null||!ri.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Xv(r),Qv(r,e,n,i),Tu(n,r),!1}n=n.return}while(n!==null);return!1}var xf=Error(N(461)),je=!1;function Ye(e,t,n,i){t.child=e===null?fv(t,null,n,i):ji(t,e.child,n,i)}function em(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Pi(t),i=of(e,t,n,a,s,r),o=lf(),e!==null&&!je?(uf(e,t,r),In(e,t,r)):(re&&o&&Qd(t),t.flags|=1,Ye(e,t,i,r),t.child)}function tm(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Xd(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Zv(e,t,s,i,r)):(e=mo(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!bf(e,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Js,n(a,i)&&e.ref===t.ref)return In(e,t,r)}return t.flags|=1,e=Tn(s,i),e.ref=t.ref,e.return=t,t.child=e}function Zv(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Js(s,i)&&e.ref===t.ref)if(je=!1,t.pendingProps=i=s,bf(e,r))e.flags&131072&&(je=!0);else return t.lanes=e.lanes,In(e,t,r)}return Bc(e,t,n,i,r)}function ey(e,t,n,i){var r=i.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(i=t.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,t.child=null;return nm(e,t,s,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&po(t,s!==null?s.cachePool:null),s!==null?$h(t,s):Dc(),pv(t);else return i=t.lanes=536870912,nm(e,t,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(po(t,s.cachePool),$h(t,s),Fn(),t.memoizedState=null):(e!==null&&po(t,null),Dc(),Fn());return Ye(e,t,r,n),t.child}function Ts(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nm(e,t,n,i,r){var s=tf();return s=s===null?null:{parent:Oe._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&po(t,null),Dc(),pv(t),e!==null&&Yr(e,t,i,!0),t.childLanes=r,null}function yo(e,t){return t=zo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function im(e,t,n){return ji(t,e.child,null,n),e=yo(t,t.pendingProps),e.flags|=2,bt(t),t.memoizedState=null,e}function G_(e,t,n){var i=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(re){if(i.mode==="hidden")return e=yo(t,i),t.lanes=536870912,Ts(null,e);if(Uc(t),(e=_e)?(e=Fy(e,Pt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ui!==null?{id:rn,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},n=sv(e),n.return=t,t.child=n,We=t,_e=null)):e=null,e===null)throw ci(t);return t.lanes=536870912,null}return yo(t,i)}var s=e.memoizedState;if(s!==null){var a=s.dehydrated;if(Uc(t),r)if(t.flags&256)t.flags&=-257,t=im(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(N(558));else if(je||Yr(e,t,n,!1),r=(n&e.childLanes)!==0,je||r){if(i=ve,i!==null&&(a=Ig(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,zi(e,a),mt(i,e,a),xf;Ko(),t=im(e,t,n)}else e=s.treeContext,_e=Gt(a.nextSibling),We=t,re=!0,ti=null,Pt=!1,e!==null&&ov(t,e),t=yo(t,i),t.flags|=4096;return t}return e=Tn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function xo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(N(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Bc(e,t,n,i,r){return Pi(t),n=of(e,t,n,i,void 0,r),i=lf(),e!==null&&!je?(uf(e,t,r),In(e,t,r)):(re&&i&&Qd(t),t.flags|=1,Ye(e,t,n,r),t.child)}function rm(e,t,n,i,r,s){return Pi(t),t.updateQueue=null,n=vv(t,i,n,r),gv(e),i=lf(),e!==null&&!je?(uf(e,t,s),In(e,t,s)):(re&&i&&Qd(t),t.flags|=1,Ye(e,t,n,s),t.child)}function sm(e,t,n,i,r){if(Pi(t),t.stateNode===null){var s=vr,a=n.contextType;typeof a=="object"&&a!==null&&(s=Xe(a)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=jc,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},rf(t),a=n.contextType,s.context=typeof a=="object"&&a!==null?Xe(a):vr,s.state=t.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Cu(t,n,a,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&jc.enqueueReplaceState(s,s.state,null),Ls(t,i,s,r),Us(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var o=t.memoizedProps,l=Bi(n,o);s.props=l;var c=s.context,h=n.contextType;a=vr,typeof h=="object"&&h!==null&&(a=Xe(h));var p=n.getDerivedStateFromProps;h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&Qh(t,s,i,a),qn=!1;var m=t.memoizedState;s.state=m,Ls(t,i,s,r),Us(),c=t.memoizedState,o||m!==c||qn?(typeof p=="function"&&(Cu(t,n,p,i),c=t.memoizedState),(l=qn||Xh(t,n,l,i,m,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Ic(e,t),a=t.memoizedProps,h=Bi(n,a),s.props=h,p=t.pendingProps,m=s.context,c=n.contextType,l=vr,typeof c=="object"&&c!==null&&(l=Xe(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Qh(t,s,i,l),qn=!1,m=t.memoizedState,s.state=m,Ls(t,i,s,r),Us();var g=t.memoizedState;a!==p||m!==g||qn||e!==null&&e.dependencies!==null&&jo(e.dependencies)?(typeof o=="function"&&(Cu(t,n,o,i),g=t.memoizedState),(h=qn||Xh(t,n,h,i,m,g,l)||e!==null&&e.dependencies!==null&&jo(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),s.props=i,s.state=g,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,xo(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=ji(t,e.child,null,r),t.child=ji(t,null,n,r)):Ye(e,t,n,r),t.memoizedState=s.state,e=t.child):e=In(e,t,r),e}function am(e,t,n,i){return Oi(),t.flags|=256,Ye(e,t,n,i),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(e){return{baseLanes:e,cachePool:uv()}}function Nu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=St),e}function ty(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),a&&(r=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(re){if(r?zn(t):Fn(),(e=_e)?(e=Fy(e,Pt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ui!==null?{id:rn,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},n=sv(e),n.return=t,t.child=n,We=t,_e=null)):e=null,e===null)throw ci(t);return ed(e)?t.lanes=32:t.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(Fn(),r=t.mode,o=zo({mode:"hidden",children:o},r),i=Mi(i,r,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,i=t.child,i.memoizedState=ku(n),i.childLanes=Nu(e,a,n),t.memoizedState=Au,Ts(null,i)):(zn(t),Hc(t,o))}var l=e.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)t.flags&256?(zn(t),t.flags&=-257,t=Ru(e,t,n)):t.memoizedState!==null?(Fn(),t.child=e.child,t.flags|=128,t=null):(Fn(),o=i.fallback,r=t.mode,i=zo({mode:"visible",children:i.children},r),o=Mi(o,r,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ji(t,e.child,null,n),i=t.child,i.memoizedState=ku(n),i.childLanes=Nu(e,a,n),t.memoizedState=Au,t=Ts(null,i));else if(zn(t),ed(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(N(419)),i.stack="",i.digest=a,Ks({value:i,source:null,stack:null}),t=Ru(e,t,n)}else if(je||Yr(e,t,n,!1),a=(n&e.childLanes)!==0,je||a){if(a=ve,a!==null&&(i=Ig(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,zi(e,i),mt(a,e,i),xf;Zc(o)||Ko(),t=Ru(e,t,n)}else Zc(o)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,_e=Gt(o.nextSibling),We=t,re=!0,ti=null,Pt=!1,e!==null&&ov(t,e),t=Hc(t,i.children),t.flags|=4096);return t}return r?(Fn(),o=i.fallback,r=t.mode,l=e.child,c=l.sibling,i=Tn(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Tn(c,o):(o=Mi(o,r,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,Ts(null,i),i=t.child,o=e.child.memoizedState,o===null?o=ku(n):(r=o.cachePool,r!==null?(l=Oe._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=uv(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Nu(e,a,n),t.memoizedState=Au,Ts(e.child,i)):(zn(t),n=e.child,e=n.sibling,n=Tn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Hc(e,t){return t=zo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zo(e,t){return e=wt(22,e,null,t),e.lanes=0,e}function Ru(e,t,n){return ji(t,e.child,null,n),e=Hc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function om(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),kc(e.return,t,n)}function Iu(e,t,n,i,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function ny(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Ie.current,o=(a&2)!==0;if(o?(a=a&1|2,t.flags|=128):a&=1,be(Ie,a),Ye(e,t,i,n),i=re?Ys:0,!o&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&om(e,n,t);else if(e.tag===19)om(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Ho(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Iu(t,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ho(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Iu(t,!0,n,null,s,i);break;case"together":Iu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Yr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=Tn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&jo(e)))}function B_(e,t,n){switch(t.tag){case 3:Io(t,t.stateNode.containerInfo),$n(t,Oe,e.memoizedState.cache),Oi();break;case 27:case 5:pc(t);break;case 4:Io(t,t.stateNode.containerInfo);break;case 10:$n(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Uc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(zn(t),t.flags|=128,null):n&t.child.childLanes?ty(e,t,n):(zn(t),e=In(e,t,n),e!==null?e.sibling:null);zn(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Yr(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return ny(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),be(Ie,Ie.current),i)break;return null;case 22:return t.lanes=0,ey(e,t,n,t.pendingProps);case 24:$n(t,Oe,e.memoizedState.cache)}return In(e,t,n)}function iy(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)je=!0;else{if(!bf(e,n)&&!(t.flags&128))return je=!1,B_(e,t,n);je=!!(e.flags&131072)}else je=!1,re&&t.flags&1048576&&av(t,Ys,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Si(t.elementType),t.type=e,typeof e=="function")Xd(e)?(i=Bi(e,i),t.tag=1,t=sm(null,t,e,i,n)):(t.tag=0,t=Bc(null,t,e,i,n));else{if(e!=null){var r=e.$$typeof;if(r===Pd){t.tag=11,t=em(null,t,e,i,n);break e}else if(r===jd){t.tag=14,t=tm(null,t,e,i,n);break e}}throw t=hc(e)||e,Error(N(306,t,""))}}return t;case 0:return Bc(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Bi(i,t.pendingProps),sm(e,t,i,r,n);case 3:e:{if(Io(t,t.stateNode.containerInfo),e===null)throw Error(N(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,Ic(e,t),Ls(t,i,null,n);var a=t.memoizedState;if(i=a.cache,$n(t,Oe,i),i!==s.cache&&Nc(t,[Oe],n,!0),Us(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=am(e,t,i,n);break e}else if(i!==r){r=Ot(Error(N(424)),t),Ks(r),t=am(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(_e=Gt(e.firstChild),We=t,re=!0,ti=null,Pt=!0,n=fv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Oi(),i===r){t=In(e,t,n);break e}Ye(e,t,i,n)}t=t.child}return t;case 26:return xo(e,t),e===null?(n=Am(t.type,null,t.pendingProps,null))?t.memoizedState=n:re||(n=t.type,e=t.pendingProps,i=Zo(ei.current).createElement(n),i[Ke]=t,i[pt]=e,Qe(i,n,e),Ve(i),t.stateNode=i):t.memoizedState=Am(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pc(t),e===null&&re&&(i=t.stateNode=Jy(t.type,t.pendingProps,ei.current),We=t,Pt=!0,r=_e,mi(t.type)?(td=r,_e=Gt(i.firstChild)):_e=r),Ye(e,t,t.pendingProps.children,n),xo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&re&&((r=i=_e)&&(i=gS(i,t.type,t.pendingProps,Pt),i!==null?(t.stateNode=i,We=t,_e=Gt(i.firstChild),Pt=!1,r=!0):r=!1),r||ci(t)),pc(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Xc(r,s)?i=null:a!==null&&Xc(r,a)&&(t.flags|=32),t.memoizedState!==null&&(r=of(e,t,I_,null,null,n),ta._currentValue=r),xo(e,t),Ye(e,t,i,n),t.child;case 6:return e===null&&re&&((e=n=_e)&&(n=vS(n,t.pendingProps,Pt),n!==null?(t.stateNode=n,We=t,_e=null,e=!0):e=!1),e||ci(t)),null;case 13:return ty(e,t,n);case 4:return Io(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ji(t,null,i,n):Ye(e,t,i,n),t.child;case 11:return em(e,t,t.type,t.pendingProps,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,$n(t,t.type,i.value),Ye(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Pi(t),r=Xe(r),i=i(r),t.flags|=1,Ye(e,t,i,n),t.child;case 14:return tm(e,t,t.type,t.pendingProps,n);case 15:return Zv(e,t,t.type,t.pendingProps,n);case 19:return ny(e,t,n);case 31:return G_(e,t,n);case 22:return ey(e,t,n,t.pendingProps);case 24:return Pi(t),i=Xe(Oe),e===null?(r=tf(),r===null&&(r=ve,s=ef(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},rf(t),$n(t,Oe,r)):(e.lanes&n&&(Ic(e,t),Ls(t,null,null,n),Us()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),$n(t,Oe,i)):(i=s.cache,$n(t,Oe,i),i!==r.cache&&Nc(t,[Oe],n,!0))),Ye(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function mn(e){e.flags|=4}function Mu(e,t,n,i,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Ay())e.flags|=8192;else throw Ui=Go,nf}else e.flags&=-16777217}function lm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Wy(t))if(Ay())e.flags|=8192;else throw Ui=Go,nf}function Va(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?kg():536870912,e.lanes|=t,Br|=t)}function ds(e,t){if(!re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function we(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function H_(e,t,n){var i=t.pendingProps;switch(Zd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(t),null;case 1:return we(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),En(Oe),Ur(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Yi(t)?mn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Su())),we(t),null;case 26:var r=t.type,s=t.memoizedState;return e===null?(mn(t),s!==null?(we(t),lm(t,s)):(we(t),Mu(t,r,null,i,n))):s?s!==e.memoizedState?(mn(t),we(t),lm(t,s)):(we(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&mn(t),we(t),Mu(t,r,e,i,n)),null;case 27:if(Mo(t),n=ei.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&mn(t);else{if(!i){if(t.stateNode===null)throw Error(N(166));return we(t),null}e=on.current,Yi(t)?Ph(t):(e=Jy(r,i,n),t.stateNode=e,mn(t))}return we(t),null;case 5:if(Mo(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&mn(t);else{if(!i){if(t.stateNode===null)throw Error(N(166));return we(t),null}if(s=on.current,Yi(t))Ph(t);else{var a=Zo(ei.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ke]=t,s[pt]=i;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(Qe(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&mn(t)}}return we(t),Mu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&mn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(N(166));if(e=ei.current,Yi(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=We,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ke]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Vy(e.nodeValue,n)),e||ci(t,!0)}else e=Zo(e).createTextNode(i),e[Ke]=t,t.stateNode=e}return we(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Yi(t),n!==null){if(e===null){if(!i)throw Error(N(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(557));e[Ke]=t}else Oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),e=!1}else n=Su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(bt(t),t):(bt(t),null);if(t.flags&128)throw Error(N(558))}return we(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Yi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(N(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[Ke]=t}else Oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),r=!1}else r=Su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(bt(t),t):(bt(t),null)}return bt(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Va(t,t.updateQueue),we(t),null);case 4:return Ur(),e===null&&Af(t.stateNode.containerInfo),we(t),null;case 10:return En(t.type),we(t),null;case 19:if($e(Ie),i=t.memoizedState,i===null)return we(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)ds(i,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ho(e),s!==null){for(t.flags|=128,ds(i,!1),e=s.updateQueue,t.updateQueue=e,Va(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)rv(n,e),n=n.sibling;return be(Ie,Ie.current&1|2),re&&xn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Tt()>Jo&&(t.flags|=128,r=!0,ds(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ho(s),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Va(t,e),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!re)return we(t),null}else 2*Tt()-i.renderingStartTime>Jo&&n!==536870912&&(t.flags|=128,r=!0,ds(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Tt(),e.sibling=null,n=Ie.current,be(Ie,r?n&1|2:n&1),re&&xn(t,i.treeForkCount),e):(we(t),null);case 22:case 23:return bt(t),sf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(we(t),t.subtreeFlags&6&&(t.flags|=8192)):we(t),n=t.updateQueue,n!==null&&Va(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&$e(Di),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),En(Oe),we(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function q_(e,t){switch(Zd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return En(Oe),Ur(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Mo(t),null;case 31:if(t.memoizedState!==null){if(bt(t),t.alternate===null)throw Error(N(340));Oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(bt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Ie),null;case 4:return Ur(),null;case 10:return En(t.type),null;case 22:case 23:return bt(t),sf(),e!==null&&$e(Di),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return En(Oe),null;case 25:return null;default:return null}}function ry(e,t){switch(Zd(t),t.tag){case 3:En(Oe),Ur();break;case 26:case 27:case 5:Mo(t);break;case 4:Ur();break;case 31:t.memoizedState!==null&&bt(t);break;case 13:bt(t);break;case 19:$e(Ie);break;case 10:En(t.type);break;case 22:case 23:bt(t),sf(),e!==null&&$e(Di);break;case 24:En(Oe)}}function _a(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){he(t,t.return,o)}}function di(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(h){he(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){he(t,t.return,h)}}function sy(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{mv(t,n)}catch(i){he(e,e.return,i)}}}function ay(e,t,n){n.props=Bi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){he(e,t,i)}}function Ps(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){he(e,t,r)}}function an(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){he(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){he(e,t,r)}else n.current=null}function oy(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){he(e,e.return,r)}}function Du(e,t,n){try{var i=e.stateNode;cS(i,e.type,n,t),i[pt]=t}catch(r){he(e,e.return,r)}}function ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mi(e.type)||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_n));else if(i!==4&&(i===27&&mi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(qc(e,t,n),e=e.sibling;e!==null;)qc(e,t,n),e=e.sibling}function Fo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&mi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Fo(e,t,n),e=e.sibling;e!==null;)Fo(e,t,n),e=e.sibling}function uy(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Qe(t,i,n),t[Ke]=e,t[pt]=n}catch(s){he(e,e.return,s)}}var bn=!1,Le=!1,Lu=!1,um=typeof WeakSet=="function"?WeakSet:Set,qe=null;function V_(e,t){if(e=e.containerInfo,Kc=il,e=Wg(e),Yd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,p=e,m=null;t:for(;;){for(var g;p!==n||r!==0&&p.nodeType!==3||(o=a+r),p!==s||i!==0&&p.nodeType!==3||(l=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++c===r&&(o=a),m===s&&++h===i&&(l=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wc={focusedElem:e,selectionRange:n},il=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){switch(t=qe,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var v=Bi(n.type,r);e=i.getSnapshotBeforeUpdate(v,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(b){he(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Qc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(N(163))}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}}function cy(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:gn(e,n),i&4&&_a(5,n);break;case 1:if(gn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){he(n,n.return,a)}else{var r=Bi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){he(n,n.return,a)}}i&64&&sy(n),i&512&&Ps(n,n.return);break;case 3:if(gn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{mv(e,t)}catch(a){he(n,n.return,a)}}break;case 27:t===null&&i&4&&uy(n);case 26:case 5:gn(e,n),t===null&&i&4&&oy(n),i&512&&Ps(n,n.return);break;case 12:gn(e,n);break;case 31:gn(e,n),i&4&&hy(e,n);break;case 13:gn(e,n),i&4&&my(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Q_.bind(null,n),yS(e,n))));break;case 22:if(i=n.memoizedState!==null||bn,!i){t=t!==null&&t.memoizedState!==null||Le,r=bn;var s=Le;bn=i,(Le=t)&&!s?vn(e,n,(n.subtreeFlags&8772)!==0):gn(e,n),bn=r,Le=s}break;case 30:break;default:gn(e,n)}}function dy(e){var t=e.alternate;t!==null&&(e.alternate=null,dy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ee=null,ft=!1;function pn(e,t,n){for(n=n.child;n!==null;)fy(e,t,n),n=n.sibling}function fy(e,t,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(pa,n)}catch{}switch(n.tag){case 26:Le||an(n,t),pn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Le||an(n,t);var i=Ee,r=ft;mi(n.type)&&(Ee=n.stateNode,ft=!1),pn(e,t,n),Hs(n.stateNode),Ee=i,ft=r;break;case 5:Le||an(n,t);case 6:if(i=Ee,r=ft,Ee=null,pn(e,t,n),Ee=i,ft=r,Ee!==null)if(ft)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(n.stateNode)}catch(s){he(n,t,s)}else try{Ee.removeChild(n.stateNode)}catch(s){he(n,t,s)}break;case 18:Ee!==null&&(ft?(e=Ee,_m(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),$r(e)):_m(Ee,n.stateNode));break;case 4:i=Ee,r=ft,Ee=n.stateNode.containerInfo,ft=!0,pn(e,t,n),Ee=i,ft=r;break;case 0:case 11:case 14:case 15:di(2,n,t),Le||di(4,n,t),pn(e,t,n);break;case 1:Le||(an(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ay(n,t,i)),pn(e,t,n);break;case 21:pn(e,t,n);break;case 22:Le=(i=Le)||n.memoizedState!==null,pn(e,t,n),Le=i;break;default:pn(e,t,n)}}function hy(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{$r(e)}catch(n){he(t,t.return,n)}}}function my(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$r(e)}catch(n){he(t,t.return,n)}}function $_(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new um),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new um),t;default:throw Error(N(435,e.tag))}}function $a(e,t){var n=$_(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var r=Z_.bind(null,e,i);i.then(r,r)}})}function ct(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(mi(o.type)){Ee=o.stateNode,ft=!1;break e}break;case 5:Ee=o.stateNode,ft=!1;break e;case 3:case 4:Ee=o.stateNode.containerInfo,ft=!0;break e}o=o.return}if(Ee===null)throw Error(N(160));fy(s,a,r),Ee=null,ft=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)py(t,e),t=t.sibling}var Ft=null;function py(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ct(t,e),dt(e),i&4&&(di(3,e,e.return),_a(3,e),di(5,e,e.return));break;case 1:ct(t,e),dt(e),i&512&&(Le||n===null||an(n,n.return)),i&64&&bn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Ft;if(ct(t,e),dt(e),i&512&&(Le||n===null||an(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[ya]||s[Ke]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Qe(s,i,n),s[Ke]=e,Ve(s),i=s;break e;case"link":var a=Nm("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Qe(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Nm("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Qe(s,i,n),r.head.appendChild(s);break;default:throw Error(N(468,i))}s[Ke]=e,Ve(s),i=s}e.stateNode=i}else Rm(r,e.type,e.stateNode);else e.stateNode=km(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Rm(r,e.type,e.stateNode):km(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Du(e,e.memoizedProps,n.memoizedProps)}break;case 27:ct(t,e),dt(e),i&512&&(Le||n===null||an(n,n.return)),n!==null&&i&4&&Du(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ct(t,e),dt(e),i&512&&(Le||n===null||an(n,n.return)),e.flags&32){r=e.stateNode;try{Or(r,"")}catch(v){he(e,e.return,v)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Du(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Lu=!0);break;case 6:if(ct(t,e),dt(e),i&4){if(e.stateNode===null)throw Error(N(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(v){he(e,e.return,v)}}break;case 3:if(_o=null,r=Ft,Ft=el(t.containerInfo),ct(t,e),Ft=r,dt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(v){he(e,e.return,v)}Lu&&(Lu=!1,gy(e));break;case 4:i=Ft,Ft=el(e.stateNode.containerInfo),ct(t,e),dt(e),Ft=i;break;case 12:ct(t,e),dt(e);break;case 31:ct(t,e),dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,$a(e,i)));break;case 13:ct(t,e),dt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ml=Tt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,$a(e,i)));break;case 22:r=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=bn,h=Le;if(bn=c||r,Le=h||l,ct(t,e),Le=h,bn=c,dt(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||l||bn||Le||Ti(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){he(l,l.return,v)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(v){he(l,l.return,v)}}}else if(t.tag===18){if(n===null){l=t;try{var g=l.stateNode;r?Sm(g,!0):Sm(l.stateNode,!1)}catch(v){he(l,l.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,$a(e,n))));break;case 19:ct(t,e),dt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,$a(e,i)));break;case 30:break;case 21:break;default:ct(t,e),dt(e)}}function dt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(ly(i)){n=i;break}i=i.return}if(n==null)throw Error(N(160));switch(n.tag){case 27:var r=n.stateNode,s=Uu(e);Fo(e,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Or(a,""),n.flags&=-33);var o=Uu(e);Fo(e,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Uu(e);qc(e,c,l);break;default:throw Error(N(161))}}catch(h){he(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gy(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function gn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cy(e,t.alternate,t),t=t.sibling}function Ti(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:di(4,t,t.return),Ti(t);break;case 1:an(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ay(t,t.return,n),Ti(t);break;case 27:Hs(t.stateNode);case 26:case 5:an(t,t.return),Ti(t);break;case 22:t.memoizedState===null&&Ti(t);break;case 30:Ti(t);break;default:Ti(t)}e=e.sibling}}function vn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:vn(r,s,n),_a(4,s);break;case 1:if(vn(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){he(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)hv(l[r],o)}catch(c){he(i,i.return,c)}}n&&a&64&&sy(s),Ps(s,s.return);break;case 27:uy(s);case 26:case 5:vn(r,s,n),n&&i===null&&a&4&&oy(s),Ps(s,s.return);break;case 12:vn(r,s,n);break;case 31:vn(r,s,n),n&&a&4&&hy(r,s);break;case 13:vn(r,s,n),n&&a&4&&my(r,s);break;case 22:s.memoizedState===null&&vn(r,s,n),Ps(s,s.return);break;case 30:break;default:vn(r,s,n)}t=t.sibling}}function wf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ba(n))}function _f(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ba(e))}function Vt(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vy(e,t,n,i),t=t.sibling}function vy(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Vt(e,t,n,i),r&2048&&_a(9,t);break;case 1:Vt(e,t,n,i);break;case 3:Vt(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ba(e)));break;case 12:if(r&2048){Vt(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){he(t,t.return,l)}}else Vt(e,t,n,i);break;case 31:Vt(e,t,n,i);break;case 13:Vt(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,t.memoizedState!==null?s._visibility&2?Vt(e,t,n,i):js(e,t):s._visibility&2?Vt(e,t,n,i):(s._visibility|=2,ir(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),r&2048&&wf(a,t);break;case 24:Vt(e,t,n,i),r&2048&&_f(t.alternate,t);break;default:Vt(e,t,n,i)}}function ir(e,t,n,i,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:ir(s,a,o,l,r),_a(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?ir(s,a,o,l,r):js(s,a):(h._visibility|=2,ir(s,a,o,l,r)),r&&c&2048&&wf(a.alternate,a);break;case 24:ir(s,a,o,l,r),r&&c&2048&&_f(a.alternate,a);break;default:ir(s,a,o,l,r)}t=t.sibling}}function js(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:js(n,i),r&2048&&wf(i.alternate,i);break;case 24:js(n,i),r&2048&&_f(i.alternate,i);break;default:js(n,i)}t=t.sibling}}var Es=8192;function Ki(e,t,n){if(e.subtreeFlags&Es)for(e=e.child;e!==null;)yy(e,t,n),e=e.sibling}function yy(e,t,n){switch(e.tag){case 26:Ki(e,t,n),e.flags&Es&&e.memoizedState!==null&&RS(n,Ft,e.memoizedState,e.memoizedProps);break;case 5:Ki(e,t,n);break;case 3:case 4:var i=Ft;Ft=el(e.stateNode.containerInfo),Ki(e,t,n),Ft=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Es,Es=16777216,Ki(e,t,n),Es=i):Ki(e,t,n));break;default:Ki(e,t,n)}}function xy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function fs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];qe=i,wy(i,e)}xy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)by(e),e=e.sibling}function by(e){switch(e.tag){case 0:case 11:case 15:fs(e),e.flags&2048&&di(9,e,e.return);break;case 3:fs(e);break;case 12:fs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,bo(e)):fs(e);break;default:fs(e)}}function bo(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];qe=i,wy(i,e)}xy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:di(8,t,t.return),bo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,bo(t));break;default:bo(t)}e=e.sibling}}function wy(e,t){for(;qe!==null;){var n=qe;switch(n.tag){case 0:case 11:case 15:di(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ba(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,qe=i;else e:for(n=e;qe!==null;){i=qe;var r=i.sibling,s=i.return;if(dy(i),i===n){qe=null;break e}if(r!==null){r.return=s,qe=r;break e}qe=s}}}var z_={getCacheForType:function(e){var t=Xe(Oe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Xe(Oe).controller.signal}},F_=typeof WeakMap=="function"?WeakMap:Map,le=0,ve=null,ne=null,ie=0,fe=0,xt=null,Xn=!1,Wr=!1,Sf=!1,Mn=0,Ne=0,fi=0,Li=0,Tf=0,St=0,Br=0,Gs=null,ht=null,Vc=!1,Ml=0,_y=0,Jo=1/0,Yo=null,ri=null,Be=0,si=null,Hr=null,Cn=0,$c=0,zc=null,Sy=null,Bs=0,Fc=null;function At(){return le&2&&ie!==0?ie&-ie:F.T!==null?Cf():Mg()}function Ty(){if(St===0)if(!(ie&536870912)||re){var e=Oa;Oa<<=1,!(Oa&3932160)&&(Oa=262144),St=e}else St=536870912;return e=Nt.current,e!==null&&(e.flags|=32),St}function mt(e,t,n){(e===ve&&(fe===2||fe===9)||e.cancelPendingCommit!==null)&&(qr(e,0),Qn(e,ie,St,!1)),va(e,n),(!(le&2)||e!==ve)&&(e===ve&&(!(le&2)&&(Li|=n),Ne===4&&Qn(e,ie,St,!1)),un(e))}function Ey(e,t,n){if(le&6)throw Error(N(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ga(e,t),r=i?K_(e,t):Ou(e,t,!0),s=i;do{if(r===0){Wr&&!i&&Qn(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!J_(n)){r=Ou(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;e:{var o=e;r=Gs;var l=o.current.memoizedState.isDehydrated;if(l&&(qr(o,a).flags|=256),a=Ou(o,a,!1),a!==2){if(Sf&&!l){o.errorRecoveryDisabledLanes|=s,Li|=s,r=4;break e}s=ht,ht=r,s!==null&&(ht===null?ht=s:ht.push.apply(ht,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){qr(e,0),Qn(e,t,0,!0);break}e:{switch(i=e,s=r,s){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:Qn(i,t,St,!Xn);break e;case 2:ht=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(r=Ml+300-Tt(),10<r)){if(Qn(i,t,St,!Xn),wl(i,0,!0)!==0)break e;Cn=t,i.timeoutHandle=zy(cm.bind(null,i,n,ht,Yo,Vc,t,St,Li,Br,Xn,s,"Throttled",-0,0),r);break e}cm(i,n,ht,Yo,Vc,t,St,Li,Br,Xn,s,null,-0,0)}}break}while(!0);un(e)}function cm(e,t,n,i,r,s,a,o,l,c,h,p,m,g){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},yy(t,s,p);var v=(s&62914560)===s?Ml-Tt():(s&4194048)===s?_y-Tt():0;if(v=IS(p,v),v!==null){Cn=s,e.cancelPendingCommit=v(fm.bind(null,e,t,s,n,i,r,a,o,l,h,p,null,m,g)),Qn(e,s,a,!c);return}}fm(e,t,s,n,i,r,a,o,l)}function J_(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!kt(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t,n,i){t&=~Tf,t&=~Li,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Ct(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&Ng(e,n,t)}function Dl(){return le&6?!0:(Sa(0),!1)}function Ef(){if(ne!==null){if(fe===0)var e=ne.return;else e=ne,Sn=Fi=null,cf(e),kr=null,Ws=0,e=ne;for(;e!==null;)ry(e.alternate,e),e=e.return;ne=null}}function qr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hS(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Cn=0,Ef(),ve=e,ne=n=Tn(e.current,null),ie=t,fe=0,xt=null,Xn=!1,Wr=ga(e,t),Sf=!1,Br=St=Tf=Li=fi=Ne=0,ht=Gs=null,Vc=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Ct(i),s=1<<r;t|=e[r],i&=~s}return Mn=t,El(),n}function Cy(e,t){ee=null,F.H=Qs,t===Kr||t===Al?(t=qh(),fe=3):t===nf?(t=qh(),fe=4):fe=t===xf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xt=t,ne===null&&(Ne=1,$o(e,Ot(t,e.current)))}function Ay(){var e=Nt.current;return e===null?!0:(ie&4194048)===ie?jt===null:(ie&62914560)===ie||ie&536870912?e===jt:!1}function ky(){var e=F.H;return F.H=Qs,e===null?Qs:e}function Ny(){var e=F.A;return F.A=z_,e}function Ko(){Ne=4,Xn||(ie&4194048)!==ie&&Nt.current!==null||(Wr=!0),!(fi&134217727)&&!(Li&134217727)||ve===null||Qn(ve,ie,St,!1)}function Ou(e,t,n){var i=le;le|=2;var r=ky(),s=Ny();(ve!==e||ie!==t)&&(Yo=null,qr(e,t)),t=!1;var a=Ne;e:do try{if(fe!==0&&ne!==null){var o=ne,l=xt;switch(fe){case 8:Ef(),a=6;break e;case 3:case 2:case 9:case 6:Nt.current===null&&(t=!0);var c=fe;if(fe=0,xt=null,br(e,o,l,c),n&&Wr){a=0;break e}break;default:c=fe,fe=0,xt=null,br(e,o,l,c)}}Y_(),a=Ne;break}catch(h){Cy(e,h)}while(!0);return t&&e.shellSuspendCounter++,Sn=Fi=null,le=i,F.H=r,F.A=s,ne===null&&(ve=null,ie=0,El()),a}function Y_(){for(;ne!==null;)Ry(ne)}function K_(e,t){var n=le;le|=2;var i=ky(),r=Ny();ve!==e||ie!==t?(Yo=null,Jo=Tt()+500,qr(e,t)):Wr=ga(e,t);e:do try{if(fe!==0&&ne!==null){t=ne;var s=xt;t:switch(fe){case 1:fe=0,xt=null,br(e,t,s,1);break;case 2:case 9:if(Hh(s)){fe=0,xt=null,dm(t);break}t=function(){fe!==2&&fe!==9||ve!==e||(fe=7),un(e)},s.then(t,t);break e;case 3:fe=7;break e;case 4:fe=5;break e;case 7:Hh(s)?(fe=0,xt=null,dm(t)):(fe=0,xt=null,br(e,t,s,7));break;case 5:var a=null;switch(ne.tag){case 26:a=ne.memoizedState;case 5:case 27:var o=ne;if(a?Wy(a):o.stateNode.complete){fe=0,xt=null;var l=o.sibling;if(l!==null)ne=l;else{var c=o.return;c!==null?(ne=c,Ul(c)):ne=null}break t}}fe=0,xt=null,br(e,t,s,5);break;case 6:fe=0,xt=null,br(e,t,s,6);break;case 8:Ef(),Ne=6;break e;default:throw Error(N(462))}}W_();break}catch(h){Cy(e,h)}while(!0);return Sn=Fi=null,F.H=i,F.A=r,le=n,ne!==null?0:(ve=null,ie=0,El(),Ne)}function W_(){for(;ne!==null&&!xw();)Ry(ne)}function Ry(e){var t=iy(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,t===null?Ul(e):ne=t}function dm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=rm(n,t,t.pendingProps,t.type,void 0,ie);break;case 11:t=rm(n,t,t.pendingProps,t.type.render,t.ref,ie);break;case 5:cf(t);default:ry(n,t),t=ne=rv(t,Mn),t=iy(n,t,Mn)}e.memoizedProps=e.pendingProps,t===null?Ul(e):ne=t}function br(e,t,n,i){Sn=Fi=null,cf(t),kr=null,Ws=0;var r=t.return;try{if(j_(e,r,t,n,ie)){Ne=1,$o(e,Ot(n,e.current)),ne=null;return}}catch(s){if(r!==null)throw ne=r,s;Ne=1,$o(e,Ot(n,e.current)),ne=null;return}t.flags&32768?(re||i===1?e=!0:Wr||ie&536870912?e=!1:(Xn=e=!0,(i===2||i===9||i===3||i===6)&&(i=Nt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Iy(t,e)):Ul(t)}function Ul(e){var t=e;do{if(t.flags&32768){Iy(t,Xn);return}e=t.return;var n=H_(t.alternate,t,Mn);if(n!==null){ne=n;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);Ne===0&&(Ne=5)}function Iy(e,t){do{var n=q_(e.alternate,e);if(n!==null){n.flags&=32767,ne=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ne=e;return}ne=e=n}while(e!==null);Ne=6,ne=null}function fm(e,t,n,i,r,s,a,o,l){e.cancelPendingCommit=null;do Ll();while(Be!==0);if(le&6)throw Error(N(327));if(t!==null){if(t===e.current)throw Error(N(177));if(s=t.lanes|t.childLanes,s|=Kd,Nw(e,n,s,a,o,l),e===ve&&(ne=ve=null,ie=0),Hr=t,si=e,Cn=n,$c=s,zc=r,Sy=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,eS(Do,function(){return Oy(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=F.T,F.T=null,r=ue.p,ue.p=2,a=le,le|=4;try{V_(e,t,n)}finally{le=a,ue.p=r,F.T=i}}Be=1,My(),Dy(),Uy()}}function My(){if(Be===1){Be=0;var e=si,t=Hr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=F.T,F.T=null;var i=ue.p;ue.p=2;var r=le;le|=4;try{py(t,e);var s=Wc,a=Wg(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Kg(o.ownerDocument.documentElement,o)){if(l!==null&&Yd(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var p=o.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var g=m.getSelection(),v=o.textContent.length,b=Math.min(l.start,v),_=l.end===void 0?b:Math.min(l.end,v);!g.extend&&b>_&&(a=_,_=b,b=a);var y=Uh(o,b),x=Uh(o,_);if(y&&x&&(g.rangeCount!==1||g.anchorNode!==y.node||g.anchorOffset!==y.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var w=p.createRange();w.setStart(y.node,y.offset),g.removeAllRanges(),b>_?(g.addRange(w),g.extend(x.node,x.offset)):(w.setEnd(x.node,x.offset),g.addRange(w))}}}}for(p=[],g=o;g=g.parentNode;)g.nodeType===1&&p.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<p.length;o++){var S=p[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}il=!!Kc,Wc=Kc=null}finally{le=r,ue.p=i,F.T=n}}e.current=t,Be=2}}function Dy(){if(Be===2){Be=0;var e=si,t=Hr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=F.T,F.T=null;var i=ue.p;ue.p=2;var r=le;le|=4;try{cy(e,t.alternate,t)}finally{le=r,ue.p=i,F.T=n}}Be=3}}function Uy(){if(Be===4||Be===3){Be=0,bw();var e=si,t=Hr,n=Cn,i=Sy;t.subtreeFlags&10256||t.flags&10256?Be=5:(Be=0,Hr=si=null,Ly(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ri=null),Hd(n),t=t.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(pa,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=F.T,r=ue.p,ue.p=2,F.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{F.T=t,ue.p=r}}Cn&3&&Ll(),un(e),r=e.pendingLanes,n&261930&&r&42?e===Fc?Bs++:(Bs=0,Fc=e):Bs=0,Sa(0)}}function Ly(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ba(t)))}function Ll(){return My(),Dy(),Uy(),Oy()}function Oy(){if(Be!==5)return!1;var e=si,t=$c;$c=0;var n=Hd(Cn),i=F.T,r=ue.p;try{ue.p=32>n?32:n,F.T=null,n=zc,zc=null;var s=si,a=Cn;if(Be=0,Hr=si=null,Cn=0,le&6)throw Error(N(331));var o=le;if(le|=4,by(s.current),vy(s,s.current,a,n),le=o,Sa(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(pa,s)}catch{}return!0}finally{ue.p=r,F.T=i,Ly(e,t)}}function hm(e,t,n){t=Ot(n,t),t=Gc(e.stateNode,t,2),e=ii(e,t,2),e!==null&&(va(e,2),un(e))}function he(e,t,n){if(e.tag===3)hm(e,e,n);else for(;t!==null;){if(t.tag===3){hm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ri===null||!ri.has(i))){e=Ot(n,e),n=Xv(2),i=ii(t,n,2),i!==null&&(Qv(n,i,t,e),va(i,2),un(i));break}}t=t.return}}function Pu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new F_;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Sf=!0,r.add(n),e=X_.bind(null,e,t,n),t.then(e,e))}function X_(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ve===e&&(ie&n)===n&&(Ne===4||Ne===3&&(ie&62914560)===ie&&300>Tt()-Ml?!(le&2)&&qr(e,0):Tf|=n,Br===ie&&(Br=0)),un(e)}function Py(e,t){t===0&&(t=kg()),e=zi(e,t),e!==null&&(va(e,t),un(e))}function Q_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Py(e,n)}function Z_(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(N(314))}i!==null&&i.delete(t),Py(e,n)}function eS(e,t){return Gd(e,t)}var Wo=null,rr=null,Jc=!1,Xo=!1,ju=!1,Zn=0;function un(e){e!==rr&&e.next===null&&(rr===null?Wo=rr=e:rr=rr.next=e),Xo=!0,Jc||(Jc=!0,nS())}function Sa(e,t){if(!ju&&Xo){ju=!0;do for(var n=!1,i=Wo;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-Ct(42|e)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,mm(i,s))}else s=ie,s=wl(i,i===ve?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||ga(i,s)||(n=!0,mm(i,s));i=i.next}while(n);ju=!1}}function tS(){jy()}function jy(){Xo=Jc=!1;var e=0;Zn!==0&&fS()&&(e=Zn);for(var t=Tt(),n=null,i=Wo;i!==null;){var r=i.next,s=Gy(i,t);s===0?(i.next=null,n===null?Wo=r:n.next=r,r===null&&(rr=n)):(n=i,(e!==0||s&3)&&(Xo=!0)),i=r}Be!==0&&Be!==5||Sa(e),Zn!==0&&(Zn=0)}function Gy(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var a=31-Ct(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=kw(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(t=ve,n=ie,n=wl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(fe===2||fe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&fu(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ga(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&fu(i),Hd(n)){case 2:case 8:n=Cg;break;case 32:n=Do;break;case 268435456:n=Ag;break;default:n=Do}return i=By.bind(null,e),n=Gd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&fu(i),e.callbackPriority=2,e.callbackNode=null,2}function By(e,t){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ll()&&e.callbackNode!==n)return null;var i=ie;return i=wl(e,e===ve?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Ey(e,i,t),Gy(e,Tt()),e.callbackNode!=null&&e.callbackNode===n?By.bind(null,e):null)}function mm(e,t){if(Ll())return null;Ey(e,t,!0)}function nS(){mS(function(){le&6?Gd(Eg,tS):jy()})}function Cf(){if(Zn===0){var e=Pr;e===0&&(e=La,La<<=1,!(La&261888)&&(La=256)),Zn=e}return Zn}function pm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:co(""+e)}function gm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function iS(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=pm((r[pt]||null).action),a=i.submitter;a&&(t=(t=a[pt]||null)?pm(t.formAction):a.getAttribute("formAction"),t!==null&&(s=t,a=null));var o=new _l("action","action",null,i,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Zn!==0){var l=a?gm(r,a):new FormData(r);Pc(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?gm(r,a):new FormData(r),Pc(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var Gu=0;Gu<Ec.length;Gu++){var Bu=Ec[Gu],rS=Bu.toLowerCase(),sS=Bu[0].toUpperCase()+Bu.slice(1);Qt(rS,"on"+sS)}Qt(Qg,"onAnimationEnd");Qt(Zg,"onAnimationIteration");Qt(ev,"onAnimationStart");Qt("dblclick","onDoubleClick");Qt("focusin","onFocus");Qt("focusout","onBlur");Qt(w_,"onTransitionRun");Qt(__,"onTransitionStart");Qt(S_,"onTransitionCancel");Qt(tv,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zs));function Hy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Lo(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Lo(h)}r.currentTarget=null,s=l}}}}function te(e,t){var n=t[vc];n===void 0&&(n=t[vc]=new Set);var i=e+"__bubble";n.has(i)||(qy(t,e,2,!1),n.add(i))}function Hu(e,t,n){var i=0;t&&(i|=4),qy(n,e,i,t)}var za="_reactListening"+Math.random().toString(36).slice(2);function Af(e){if(!e[za]){e[za]=!0,Dg.forEach(function(n){n!=="selectionchange"&&(aS.has(n)||Hu(n,!1,e),Hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[za]||(t[za]=!0,Hu("selectionchange",!1,t))}}function qy(e,t,n,i){switch(tx(t)){case 2:var r=US;break;case 8:r=LS;break;default:r=If}n=r.bind(null,t,n,e),r=void 0,!_c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function qu(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=dr(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}Hg(function(){var c=s,h=$d(n),p=[];e:{var m=nv.get(e);if(m!==void 0){var g=_l,v=e;switch(e){case"keypress":if(ho(n)===0)break e;case"keydown":case"keyup":g=Zw;break;case"focusin":v="focus",g=vu;break;case"focusout":v="blur",g=vu;break;case"beforeblur":case"afterblur":g=vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=n_;break;case Qg:case Zg:case ev:g=$w;break;case tv:g=r_;break;case"scroll":case"scrollend":g=Gw;break;case"wheel":g=a_;break;case"copy":case"cut":case"paste":g=Fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ch;break;case"toggle":case"beforetoggle":g=l_}var b=(t&4)!==0,_=!b&&(e==="scroll"||e==="scrollend"),y=b?m!==null?m+"Capture":null:m;b=[];for(var x=c,w;x!==null;){var S=x;if(w=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||w===null||y===null||(S=zs(x,y),S!=null&&b.push(ea(x,S,w))),_)break;x=x.return}0<b.length&&(m=new g(m,v,null,n,h),p.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==wc&&(v=n.relatedTarget||n.fromElement)&&(dr(v)||v[Fr]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?dr(v):null,v!==null&&(_=ma(v),b=v.tag,v!==_||b!==5&&b!==27&&b!==6)&&(v=null)):(g=null,v=c),g!==v)){if(b=Th,S="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(b=Ch,S="onPointerLeave",y="onPointerEnter",x="pointer"),_=g==null?m:Ss(g),w=v==null?m:Ss(v),m=new b(S,x+"leave",g,n,h),m.target=_,m.relatedTarget=w,S=null,dr(h)===c&&(b=new b(y,x+"enter",v,n,h),b.target=w,b.relatedTarget=_,S=b),_=S,g&&v)t:{for(b=oS,y=g,x=v,w=0,S=y;S;S=b(S))w++;S=0;for(var E=x;E;E=b(E))S++;for(;0<w-S;)y=b(y),w--;for(;0<S-w;)x=b(x),S--;for(;w--;){if(y===x||x!==null&&y===x.alternate){b=y;break t}y=b(y),x=b(x)}b=null}else b=null;g!==null&&vm(p,m,g,b,!1),v!==null&&_!==null&&vm(p,_,v,b,!0)}}e:{if(m=c?Ss(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=Rh;else if(Nh(m))if(Jg)A=y_;else{A=g_;var C=p_}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&Vd(c.elementType)&&(A=Rh):A=v_;if(A&&(A=A(e,c))){Fg(p,A,n,h);break e}C&&C(e,m,c),e==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&bc(m,"number",m.value)}switch(C=c?Ss(c):window,e){case"focusin":(Nh(C)||C.contentEditable==="true")&&(mr=C,Sc=c,Is=null);break;case"focusout":Is=Sc=mr=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,Lh(p,n,h);break;case"selectionchange":if(b_)break;case"keydown":case"keyup":Lh(p,n,h)}var R;if(Jd)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else hr?$g(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Vg&&n.locale!=="ko"&&(hr||k!=="onCompositionStart"?k==="onCompositionEnd"&&hr&&(R=qg()):(Wn=h,zd="value"in Wn?Wn.value:Wn.textContent,hr=!0)),C=Qo(c,k),0<C.length&&(k=new Eh(k,e,null,n,h),p.push({event:k,listeners:C}),R?k.data=R:(R=zg(n),R!==null&&(k.data=R)))),(R=c_?d_(e,n):f_(e,n))&&(k=Qo(c,"onBeforeInput"),0<k.length&&(C=new Eh("onBeforeInput","beforeinput",null,n,h),p.push({event:C,listeners:k}),C.data=R)),iS(p,e,c,n,h)}Hy(p,t)})}function ea(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qo(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=zs(e,n),r!=null&&i.unshift(ea(e,r,s)),r=zs(e,t),r!=null&&i.push(ea(e,r,s))),e.tag===3)return i;e=e.return}return[]}function oS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vm(e,t,n,i,r){for(var s=t._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=zs(n,s),c!=null&&a.unshift(ea(n,c,l))):r||(c=zs(n,s),c!=null&&a.push(ea(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var lS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function ym(e){return(typeof e=="string"?e:""+e).replace(lS,`
`).replace(uS,"")}function Vy(e,t){return t=ym(t),ym(e)===t}function me(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Or(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Or(e,""+i);break;case"className":ja(e,"class",i);break;case"tabIndex":ja(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ja(e,n,i);break;case"style":Bg(e,i,s);break;case"data":if(t!=="object"){ja(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=co(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&me(e,t,"name",r.name,r,null),me(e,t,"formEncType",r.formEncType,r,null),me(e,t,"formMethod",r.formMethod,r,null),me(e,t,"formTarget",r.formTarget,r,null)):(me(e,t,"encType",r.encType,r,null),me(e,t,"method",r.method,r,null),me(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=co(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=_n);break;case"onScroll":i!=null&&te("scroll",e);break;case"onScrollEnd":i!=null&&te("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(N(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=co(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":te("beforetoggle",e),te("toggle",e),uo(e,"popover",i);break;case"xlinkActuate":hn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":hn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":hn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":hn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":hn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":hn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":hn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":hn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":hn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":uo(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Pw.get(n)||n,uo(e,n,i))}}function Yc(e,t,n,i,r,s){switch(n){case"style":Bg(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(N(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Or(e,i):(typeof i=="number"||typeof i=="bigint")&&Or(e,""+i);break;case"onScroll":i!=null&&te("scroll",e);break;case"onScrollEnd":i!=null&&te("scrollend",e);break;case"onClick":i!=null&&(e.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ug.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[pt]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):uo(e,n,i)}}}function Qe(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",e),te("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:me(e,t,s,a,n,null)}}r&&me(e,t,"srcSet",n.srcSet,n,null),i&&me(e,t,"src",n.src,n,null);return;case"input":te("invalid",e);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,t));break;default:me(e,t,i,h,n,null)}}Pg(e,s,o,l,c,a,r,!1);return;case"select":te("invalid",e),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:me(e,t,r,o,n,null)}t=s,n=a,e.multiple=!!i,t!=null?Er(e,!!i,t,!1):n!=null&&Er(e,!!i,n,!0);return;case"textarea":te("invalid",e),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(N(91));break;default:me(e,t,a,o,n,null)}Gg(e,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:me(e,t,l,i,n,null)}return;case"dialog":te("beforetoggle",e),te("toggle",e),te("cancel",e),te("close",e);break;case"iframe":case"object":te("load",e);break;case"video":case"audio":for(i=0;i<Zs.length;i++)te(Zs[i],e);break;case"image":te("error",e),te("load",e);break;case"details":te("toggle",e);break;case"embed":case"source":case"link":te("error",e),te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:me(e,t,c,i,n,null)}return;default:if(Vd(t)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Yc(e,t,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&me(e,t,o,i,n,null))}function cS(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(g in n){var p=n[g];if(n.hasOwnProperty(g)&&p!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(g)||me(e,t,g,null,i,p)}}for(var m in i){var g=i[m];if(p=n[m],i.hasOwnProperty(m)&&(g!=null||p!=null))switch(m){case"type":s=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(N(137,t));break;default:g!==p&&me(e,t,m,g,i,p)}}xc(e,a,o,l,c,h,s,r);return;case"select":g=a=o=m=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(s)||me(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":m=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&me(e,t,r,s,i,l)}t=o,n=a,i=g,m!=null?Er(e,!!n,m,!1):!!i!=!!n&&(t!=null?Er(e,!!n,t,!0):Er(e,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:me(e,t,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(N(91));break;default:r!==s&&me(e,t,a,r,i,s)}jg(e,m,g);return;case"option":for(var v in n)if(m=n[v],n.hasOwnProperty(v)&&m!=null&&!i.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:me(e,t,v,null,i,m)}for(l in i)if(m=i[l],g=n[l],i.hasOwnProperty(l)&&m!==g&&(m!=null||g!=null))switch(l){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:me(e,t,l,m,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&me(e,t,b,null,i,m);for(c in i)if(m=i[c],g=n[c],i.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(N(137,t));break;default:me(e,t,c,m,i,g)}return;default:if(Vd(t)){for(var _ in n)m=n[_],n.hasOwnProperty(_)&&m!==void 0&&!i.hasOwnProperty(_)&&Yc(e,t,_,void 0,i,m);for(h in i)m=i[h],g=n[h],!i.hasOwnProperty(h)||m===g||m===void 0&&g===void 0||Yc(e,t,h,m,i,g);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y)&&me(e,t,y,null,i,m);for(p in i)m=i[p],g=n[p],!i.hasOwnProperty(p)||m===g||m==null&&g==null||me(e,t,p,m,i,g)}function xm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&xm(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,p=l.initiatorType;h&&xm(p)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,t+=8*(s+a)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Kc=null,Wc=null;function Zo(e){return e.nodeType===9?e:e.ownerDocument}function bm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $y(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Xc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vu=null;function fS(){var e=window.event;return e&&e.type==="popstate"?e===Vu?!1:(Vu=e,!0):(Vu=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,wm=typeof Promise=="function"?Promise:void 0,mS=typeof queueMicrotask=="function"?queueMicrotask:typeof wm<"u"?function(e){return wm.resolve(null).then(e).catch(pS)}:zy;function pS(e){setTimeout(function(){throw e})}function mi(e){return e==="head"}function _m(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(r),$r(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Hs(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Hs(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[ya]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Hs(e.ownerDocument.body);n=r}while(n);$r(t)}function Sm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Qc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Qc(n),qd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function gS(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ya])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Gt(e.nextSibling),e===null)break}return null}function vS(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Gt(e.nextSibling),e===null))return null;return e}function Fy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Gt(e.nextSibling),e===null))return null;return e}function Zc(e){return e.data==="$?"||e.data==="$~"}function ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yS(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var td=null;function Tm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Gt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Em(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Jy(e,t,n){switch(t=Zo(n),e){case"html":if(e=t.documentElement,!e)throw Error(N(452));return e;case"head":if(e=t.head,!e)throw Error(N(453));return e;case"body":if(e=t.body,!e)throw Error(N(454));return e;default:throw Error(N(451))}}function Hs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qd(e)}var Ht=new Map,Cm=new Set;function el(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ln=ue.d;ue.d={f:xS,r:bS,D:wS,C:_S,L:SS,m:TS,X:CS,S:ES,M:AS};function xS(){var e=Ln.f(),t=Dl();return e||t}function bS(e){var t=Jr(e);t!==null&&t.tag===5&&t.type==="form"?Bv(t):Ln.r(e)}var Xr=typeof document>"u"?null:document;function Yy(e,t,n){var i=Xr;if(i&&typeof t=="string"&&t){var r=Lt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Cm.has(r)||(Cm.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Qe(t,"link",e),Ve(t),i.head.appendChild(t)))}}function wS(e){Ln.D(e),Yy("dns-prefetch",e,null)}function _S(e,t){Ln.C(e,t),Yy("preconnect",e,t)}function SS(e,t,n){Ln.L(e,t,n);var i=Xr;if(i&&e&&t){var r='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Lt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Lt(n.imageSizes)+'"]')):r+='[href="'+Lt(e)+'"]';var s=r;switch(t){case"style":s=Vr(e);break;case"script":s=Qr(e)}Ht.has(s)||(e=Te({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ht.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Ta(s))||t==="script"&&i.querySelector(Ea(s))||(t=i.createElement("link"),Qe(t,"link",e),Ve(t),i.head.appendChild(t)))}}function TS(e,t){Ln.m(e,t);var n=Xr;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Lt(i)+'"][href="'+Lt(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Qr(e)}if(!Ht.has(s)&&(e=Te({rel:"modulepreload",href:e},t),Ht.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ea(s)))return}i=n.createElement("link"),Qe(i,"link",e),Ve(i),n.head.appendChild(i)}}}function ES(e,t,n){Ln.S(e,t,n);var i=Xr;if(i&&e){var r=Tr(i).hoistableStyles,s=Vr(e);t=t||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Ta(s)))o.loading=5;else{e=Te({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ht.get(s))&&kf(e,n);var l=a=i.createElement("link");Ve(l),Qe(l,"link",e),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,wo(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function CS(e,t){Ln.X(e,t);var n=Xr;if(n&&e){var i=Tr(n).hoistableScripts,r=Qr(e),s=i.get(r);s||(s=n.querySelector(Ea(r)),s||(e=Te({src:e,async:!0},t),(t=Ht.get(r))&&Nf(e,t),s=n.createElement("script"),Ve(s),Qe(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function AS(e,t){Ln.M(e,t);var n=Xr;if(n&&e){var i=Tr(n).hoistableScripts,r=Qr(e),s=i.get(r);s||(s=n.querySelector(Ea(r)),s||(e=Te({src:e,async:!0,type:"module"},t),(t=Ht.get(r))&&Nf(e,t),s=n.createElement("script"),Ve(s),Qe(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Am(e,t,n,i){var r=(r=ei.current)?el(r):null;if(!r)throw Error(N(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Vr(n.href),n=Tr(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Vr(n.href);var s=Tr(r).hoistableStyles,a=s.get(e);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=r.querySelector(Ta(e)))&&!s._p&&(a.instance=s,a.state.loading=5),Ht.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ht.set(e,n),s||kS(r,e,n,a.state))),t&&i===null)throw Error(N(528,""));return a}if(t&&i!==null)throw Error(N(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qr(n),n=Tr(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,e))}}function Vr(e){return'href="'+Lt(e)+'"'}function Ta(e){return'link[rel="stylesheet"]['+e+"]"}function Ky(e){return Te({},e,{"data-precedence":e.precedence,precedence:null})}function kS(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Qe(t,"link",n),Ve(t),e.head.appendChild(t))}function Qr(e){return'[src="'+Lt(e)+'"]'}function Ea(e){return"script[async]"+e}function km(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Lt(n.href)+'"]');if(i)return t.instance=i,Ve(i),i;var r=Te({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Ve(i),Qe(i,"style",r),wo(i,n.precedence,e),t.instance=i;case"stylesheet":r=Vr(n.href);var s=e.querySelector(Ta(r));if(s)return t.state.loading|=4,t.instance=s,Ve(s),s;i=Ky(n),(r=Ht.get(r))&&kf(i,r),s=(e.ownerDocument||e).createElement("link"),Ve(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Qe(s,"link",i),t.state.loading|=4,wo(s,n.precedence,e),t.instance=s;case"script":return s=Qr(n.src),(r=e.querySelector(Ea(s)))?(t.instance=r,Ve(r),r):(i=n,(r=Ht.get(s))&&(i=Te({},n),Nf(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),Ve(r),Qe(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,wo(i,n.precedence,e));return t.instance}function wo(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Nf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var _o=null;function Nm(e,t,n){if(_o===null){var i=new Map,r=_o=new Map;r.set(n,i)}else r=_o,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[ya]||s[Ke]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function Rm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function NS(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wy(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function RS(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Vr(i.href),s=t.querySelector(Ta(r));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=tl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Ve(s);return}s=t.ownerDocument||t,i=Ky(i),(r=Ht.get(r))&&kf(i,r),s=s.createElement("link"),Ve(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Qe(s,"link",i),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=tl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var $u=0;function IS(e,t){return e.stylesheets&&e.count===0&&So(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&So(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&$u===0&&($u=62500*dS());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&So(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>$u?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function tl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)So(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var nl=null;function So(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,nl=new Map,t.forEach(MS,e),nl=null,tl.call(e))}function MS(e,t){if(!(t.state.loading&4)){var n=nl.get(e);if(n)var i=n.get(null);else{n=new Map,nl.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=t.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=tl.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var ta={$$typeof:wn,Provider:null,Consumer:null,_currentValue:Ii,_currentValue2:Ii,_threadCount:0};function DS(e,t,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.hiddenUpdates=hu(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Xy(e,t,n,i,r,s,a,o,l,c,h,p){return e=new DS(e,t,n,a,l,c,h,p,o),t=1,s===!0&&(t|=24),s=wt(3,null,null,t),e.current=s,s.stateNode=e,t=ef(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},rf(s),e}function Qy(e){return e?(e=vr,e):vr}function Zy(e,t,n,i,r,s){r=Qy(r),i.context===null?i.context=r:i.pendingContext=r,i=ni(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=ii(e,i,t),n!==null&&(mt(n,e,t),Ds(n,e,t))}function Im(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rf(e,t){Im(e,t),(e=e.alternate)&&Im(e,t)}function ex(e){if(e.tag===13||e.tag===31){var t=zi(e,67108864);t!==null&&mt(t,e,67108864),Rf(e,67108864)}}function Mm(e){if(e.tag===13||e.tag===31){var t=At();t=Bd(t);var n=zi(e,t);n!==null&&mt(n,e,t),Rf(e,t)}}var il=!0;function US(e,t,n,i){var r=F.T;F.T=null;var s=ue.p;try{ue.p=2,If(e,t,n,i)}finally{ue.p=s,F.T=r}}function LS(e,t,n,i){var r=F.T;F.T=null;var s=ue.p;try{ue.p=8,If(e,t,n,i)}finally{ue.p=s,F.T=r}}function If(e,t,n,i){if(il){var r=nd(i);if(r===null)qu(e,t,i,rl,n),Dm(e,i);else if(PS(r,e,t,n,i))i.stopPropagation();else if(Dm(e,i),t&4&&-1<OS.indexOf(e)){for(;r!==null;){var s=Jr(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=_i(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Ct(a);o.entanglements[1]|=l,a&=~l}un(s),!(le&6)&&(Jo=Tt()+500,Sa(0))}}break;case 31:case 13:o=zi(s,2),o!==null&&mt(o,s,2),Dl(),Rf(s,2)}if(s=nd(i),s===null&&qu(e,t,i,rl,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qu(e,t,i,null,n)}}function nd(e){return e=$d(e),Mf(e)}var rl=null;function Mf(e){if(rl=null,e=dr(e),e!==null){var t=ma(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=bg(t),e!==null)return e;e=null}else if(n===31){if(e=wg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rl=e,null}function tx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ww()){case Eg:return 2;case Cg:return 8;case Do:case _w:return 32;case Ag:return 268435456;default:return 32}default:return 32}}var id=!1,ai=null,oi=null,li=null,na=new Map,ia=new Map,Jn=[],OS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dm(e,t){switch(e){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":na.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(t.pointerId)}}function hs(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Jr(t),t!==null&&ex(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function PS(e,t,n,i,r){switch(t){case"focusin":return ai=hs(ai,e,t,n,i,r),!0;case"dragenter":return oi=hs(oi,e,t,n,i,r),!0;case"mouseover":return li=hs(li,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return na.set(s,hs(na.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ia.set(s,hs(ia.get(s)||null,e,t,n,i,r)),!0}return!1}function nx(e){var t=dr(e.target);if(t!==null){var n=ma(t);if(n!==null){if(t=n.tag,t===13){if(t=bg(n),t!==null){e.blockedOn=t,vh(e.priority,function(){Mm(n)});return}}else if(t===31){if(t=wg(n),t!==null){e.blockedOn=t,vh(e.priority,function(){Mm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function To(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);wc=i,n.target.dispatchEvent(i),wc=null}else return t=Jr(n),t!==null&&ex(t),e.blockedOn=n,!1;t.shift()}return!0}function Um(e,t,n){To(e)&&n.delete(t)}function jS(){id=!1,ai!==null&&To(ai)&&(ai=null),oi!==null&&To(oi)&&(oi=null),li!==null&&To(li)&&(li=null),na.forEach(Um),ia.forEach(Um)}function Fa(e,t){e.blockedOn===t&&(e.blockedOn=null,id||(id=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,jS)))}var Ja=null;function Lm(e){Ja!==e&&(Ja=e,He.unstable_scheduleCallback(He.unstable_NormalPriority,function(){Ja===e&&(Ja=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Mf(i||n)===null)continue;break}var s=Jr(n);s!==null&&(e.splice(t,3),t-=3,Pc(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function $r(e){function t(l){return Fa(l,e)}ai!==null&&Fa(ai,e),oi!==null&&Fa(oi,e),li!==null&&Fa(li,e),na.forEach(t),ia.forEach(t);for(var n=0;n<Jn.length;n++){var i=Jn[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Jn.length&&(n=Jn[0],n.blockedOn===null);)nx(n),n.blockedOn===null&&Jn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[pt]||null;if(typeof s=="function")a||Lm(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[pt]||null)o=a.formAction;else if(Mf(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),Lm(n)}}}function ix(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Df(e){this._internalRoot=e}Ol.prototype.render=Df.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));var n=t.current,i=At();Zy(n,i,e,t,null,null)};Ol.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zy(e.current,2,null,e,null,null),Dl(),t[Fr]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jn.length&&t!==0&&t<Jn[n].priority;n++);Jn.splice(n,0,e),n===0&&nx(e)}};var Om=yg.version;if(Om!=="19.2.4")throw Error(N(527,Om,"19.2.4"));ue.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=mw(t),e=e!==null?_g(e):null,e=e===null?null:e.stateNode,e};var GS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{pa=Ya.inject(GS),Et=Ya}catch{}}xl.createRoot=function(e,t){if(!xg(e))throw Error(N(299));var n=!1,i="",r=Yv,s=Kv,a=Wv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Xy(e,1,!1,null,null,n,i,null,r,s,a,ix),e[Fr]=t.current,Af(e),new Df(t)};xl.hydrateRoot=function(e,t,n){if(!xg(e))throw Error(N(299));var i=!1,r="",s=Yv,a=Kv,o=Wv,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),t=Xy(e,1,!0,t,n??null,i,r,l,s,a,o,ix),t.context=Qy(null),n=t.current,i=At(),i=Bd(i),r=ni(i),r.callback=null,ii(n,r,i),n=i,t.current.lanes=n,va(t,n),un(t),e[Fr]=t.current,Af(e),new Ol(t)};xl.version="19.2.4";function rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rx)}catch(e){console.error(e)}}rx(),fg.exports=xl;var BS=fg.exports;const HS=ng(BS);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pm="popstate";function qS(e={}){function t(i,r){let{pathname:s,search:a,hash:o}=i.location;return rd("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ra(r)}return $S(t,n,null,e)}function Ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VS(){return Math.random().toString(36).substring(2,10)}function jm(e,t){return{usr:e.state,key:e.key,idx:t}}function rd(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Zr(t):t,state:n,key:t&&t.key||i||VS()}}function ra({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function $S(e,t,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function p(){o="POP";let _=h(),y=_==null?null:_-c;c=_,l&&l({action:o,location:b.location,delta:y})}function m(_,y){o="PUSH";let x=rd(b.location,_,y);c=h()+1;let w=jm(x,c),S=b.createHref(x);try{a.pushState(w,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(S)}s&&l&&l({action:o,location:b.location,delta:1})}function g(_,y){o="REPLACE";let x=rd(b.location,_,y);c=h();let w=jm(x,c),S=b.createHref(x);a.replaceState(w,"",S),s&&l&&l({action:o,location:b.location,delta:0})}function v(_){return zS(_)}let b={get action(){return o},get location(){return e(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Pm,p),l=_,()=>{r.removeEventListener(Pm,p),l=null}},createHref(_){return t(r,_)},createURL:v,encodeLocation(_){let y=v(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:g,go(_){return a.go(_)}};return b}function zS(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ce(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:ra(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function sx(e,t,n="/"){return FS(e,t,n,!1)}function FS(e,t,n,i){let r=typeof t=="string"?Zr(t):t,s=Dn(r.pathname||"/",n);if(s==null)return null;let a=ax(e);JS(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=rT(s);o=nT(a[l],c,i)}return o}function ax(e,t=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;Ce(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let p=An([i,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(Ce(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ax(a.children,t,m,p,l)),!(a.path==null&&!a.index)&&t.push({path:p,score:eT(p,a.index),routesMeta:m})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of ox(a.path))s(a,o,!0,c)}),t}function ox(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=ox(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function JS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tT(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var YS=/^:[\w-]+$/,KS=3,WS=2,XS=1,QS=10,ZS=-2,Gm=e=>e==="*";function eT(e,t){let n=e.split("/"),i=n.length;return n.some(Gm)&&(i+=ZS),t&&(i+=WS),n.filter(r=>!Gm(r)).reduce((r,s)=>r+(YS.test(s)?KS:s===""?XS:QS),i)}function tT(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function nT(e,t,n=!1){let{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=sl({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!p&&c&&n&&!i[i.length-1].route.index&&(p=sl({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:An([s,p.pathname]),pathnameBase:lT(An([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=An([s,p.pathnameBase]))}return a}function sl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=iT(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:p},m)=>{if(h==="*"){let v=o[m]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=o[m];return p&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:e}}function iT(e,t=!1,n=!0){Xt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function rT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Dn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var sT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function aT(e,t="/"){let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Zr(e):e,s;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?s=Bm(n.substring(1),"/"):s=Bm(n,t)):s=t,{pathname:s,search:uT(i),hash:cT(r)}}function Bm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function zu(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oT(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Uf(e){let t=oT(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Lf(e,t,n,i=!1){let r;typeof e=="string"?r=Zr(e):(r={...e},Ce(!r.pathname||!r.pathname.includes("?"),zu("?","pathname","search",r)),Ce(!r.pathname||!r.pathname.includes("#"),zu("#","pathname","hash",r)),Ce(!r.search||!r.search.includes("#"),zu("#","search","hash",r)));let s=e===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let p=t.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}o=p>=0?t[p]:"/"}let l=aT(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var An=e=>e.join("/").replace(/\/\/+/g,"/"),lT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,dT=class{constructor(e,t,n,i=!1){this.status=e,this.statusText=t||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function fT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function hT(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var lx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ux(e,t){let n=e;if(typeof n!="string"||!sT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(lx)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),o=Dn(a.pathname,t);a.origin===s.origin&&o!=null?n=o+a.search+a.hash:r=!0}catch{Xt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cx=["POST","PUT","PATCH","DELETE"];new Set(cx);var mT=["GET",...cx];new Set(mT);var es=T.createContext(null);es.displayName="DataRouter";var Pl=T.createContext(null);Pl.displayName="DataRouterState";var pT=T.createContext(!1),dx=T.createContext({isTransitioning:!1});dx.displayName="ViewTransition";var gT=T.createContext(new Map);gT.displayName="Fetchers";var vT=T.createContext(null);vT.displayName="Await";var Rt=T.createContext(null);Rt.displayName="Navigation";var Ca=T.createContext(null);Ca.displayName="Location";var cn=T.createContext({outlet:null,matches:[],isDataRoute:!1});cn.displayName="Route";var Of=T.createContext(null);Of.displayName="RouteError";var fx="REACT_ROUTER_ERROR",yT="REDIRECT",xT="ROUTE_ERROR_RESPONSE";function bT(e){if(e.startsWith(`${fx}:${yT}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function wT(e){if(e.startsWith(`${fx}:${xT}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new dT(t.status,t.statusText,t.data)}catch{}}function _T(e,{relative:t}={}){Ce(ts(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(Rt),{hash:r,pathname:s,search:a}=Aa(e,{relative:t}),o=s;return n!=="/"&&(o=s==="/"?n:An([n,s])),i.createHref({pathname:o,search:a,hash:r})}function ts(){return T.useContext(Ca)!=null}function Zt(){return Ce(ts(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Ca).location}var hx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mx(e){T.useContext(Rt).static||T.useLayoutEffect(e)}function jl(){let{isDataRoute:e}=T.useContext(cn);return e?LT():ST()}function ST(){Ce(ts(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(es),{basename:t,navigator:n}=T.useContext(Rt),{matches:i}=T.useContext(cn),{pathname:r}=Zt(),s=JSON.stringify(Uf(i)),a=T.useRef(!1);return mx(()=>{a.current=!0}),T.useCallback((l,c={})=>{if(Xt(a.current,hx),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=Lf(l,JSON.parse(s),r,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:An([t,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[t,n,s,r,e])}T.createContext(null);function Aa(e,{relative:t}={}){let{matches:n}=T.useContext(cn),{pathname:i}=Zt(),r=JSON.stringify(Uf(n));return T.useMemo(()=>Lf(e,JSON.parse(r),i,t==="path"),[e,r,i,t])}function TT(e,t){return px(e,t)}function px(e,t,n,i,r){var x;Ce(ts(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=T.useContext(Rt),{matches:a}=T.useContext(cn),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",p=o&&o.route;{let w=p&&p.path||"";vx(c,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let m=Zt(),g;if(t){let w=typeof t=="string"?Zr(t):t;Ce(h==="/"||((x=w.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),g=w}else g=m;let v=g.pathname||"/",b=v;if(h!=="/"){let w=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=sx(e,{pathname:b});Xt(p||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Xt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=NT(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:An([h,s.encodeLocation?s.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:An([h,s.encodeLocation?s.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),a,n,i,r);return t&&y?T.createElement(Ca.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function ET(){let e=UT(),t=fT(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:s},"ErrorBoundary")," or"," ",T.createElement("code",{style:s},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:r},n):null,a)}var CT=T.createElement(ET,null),gx=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=wT(e.digest);n&&(e=n)}let t=e!==void 0?T.createElement(cn.Provider,{value:this.props.routeContext},T.createElement(Of.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?T.createElement(AT,{error:e},t):t}};gx.contextType=pT;var Fu=new WeakMap;function AT({children:e,error:t}){let{basename:n}=T.useContext(Rt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=bT(t.digest);if(i){let r=Fu.get(t);if(r)throw r;let s=ux(i.location,n);if(lx&&!Fu.get(t))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw Fu.set(t,a),a}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function kT({routeContext:e,match:t,children:n}){let i=T.useContext(es);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(cn.Provider,{value:e},n)}function NT(e,t=[],n=null,i=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Ce(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=h),p.route.id){let{loaderData:m,errors:g}=n,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!g||g[p.route.id]===void 0);if(p.route.lazy||v){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,p)=>{var m,g;i(h,{location:n.location,params:((g=(m=n.matches)==null?void 0:m[0])==null?void 0:g.params)??{},unstable_pattern:hT(n.matches),errorInfo:p})}:void 0;return s.reduceRight((h,p,m)=>{let g,v=!1,b=null,_=null;n&&(g=a&&p.route.id?a[p.route.id]:void 0,b=p.route.errorElement||CT,o&&(l<0&&m===0?(vx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):l===m&&(v=!0,_=p.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,m+1)),x=()=>{let w;return g?w=b:v?w=_:p.route.Component?w=T.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=h,T.createElement(kT,{match:p,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?T.createElement(gx,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:c}):x()},null)}function Pf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RT(e){let t=T.useContext(es);return Ce(t,Pf(e)),t}function IT(e){let t=T.useContext(Pl);return Ce(t,Pf(e)),t}function MT(e){let t=T.useContext(cn);return Ce(t,Pf(e)),t}function jf(e){let t=MT(e),n=t.matches[t.matches.length-1];return Ce(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function DT(){return jf("useRouteId")}function UT(){var i;let e=T.useContext(Of),t=IT("useRouteError"),n=jf("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function LT(){let{router:e}=RT("useNavigate"),t=jf("useNavigate"),n=T.useRef(!1);return mx(()=>{n.current=!0}),T.useCallback(async(r,s={})=>{Xt(n.current,hx),n.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...s}))},[e,t])}var Hm={};function vx(e,t,n){!t&&!Hm[e]&&(Hm[e]=!0,Xt(!1,n))}T.memo(OT);function OT({routes:e,future:t,state:n,onError:i}){return px(e,void 0,n,i,t)}function al({to:e,replace:t,state:n,relative:i}){Ce(ts(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=T.useContext(Rt);Xt(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=T.useContext(cn),{pathname:a}=Zt(),o=jl(),l=Lf(e,Uf(s),a,i==="path"),c=JSON.stringify(l);return T.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:i})},[o,c,i,t,n]),null}function Ei(e){Ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PT({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){Ce(!ts(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:o,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[o,r,s,a]);typeof n=="string"&&(n=Zr(n));let{pathname:c="/",search:h="",hash:p="",state:m=null,key:g="default"}=n,v=T.useMemo(()=>{let b=Dn(c,o);return b==null?null:{location:{pathname:b,search:h,hash:p,state:m,key:g},navigationType:i}},[o,c,h,p,m,g,i]);return Xt(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:T.createElement(Rt.Provider,{value:l},T.createElement(Ca.Provider,{children:t,value:v}))}function jT({children:e,location:t}){return TT(sd(e),t)}function sd(e,t=[]){let n=[];return T.Children.forEach(e,(i,r)=>{if(!T.isValidElement(i))return;let s=[...t,r];if(i.type===T.Fragment){n.push.apply(n,sd(i.props.children,s));return}Ce(i.type===Ei,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ce(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=sd(i.props.children,s)),n.push(a)}),n}var Eo="get",Co="application/x-www-form-urlencoded";function Gl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function GT(e){return Gl(e)&&e.tagName.toLowerCase()==="button"}function BT(e){return Gl(e)&&e.tagName.toLowerCase()==="form"}function HT(e){return Gl(e)&&e.tagName.toLowerCase()==="input"}function qT(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function VT(e,t){return e.button===0&&(!t||t==="_self")&&!qT(e)}var Ka=null;function $T(){if(Ka===null)try{new FormData(document.createElement("form"),0),Ka=!1}catch{Ka=!0}return Ka}var zT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ju(e){return e!=null&&!zT.has(e)?(Xt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Co}"`),null):e}function FT(e,t){let n,i,r,s,a;if(BT(e)){let o=e.getAttribute("action");i=o?Dn(o,t):null,n=e.getAttribute("method")||Eo,r=Ju(e.getAttribute("enctype"))||Co,s=new FormData(e)}else if(GT(e)||HT(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(i=l?Dn(l,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Eo,r=Ju(e.getAttribute("formenctype"))||Ju(o.getAttribute("enctype"))||Co,s=new FormData(o,e),!$T()){let{name:c,type:h,value:p}=e;if(h==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(Gl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eo,i=null,r=Co,a=e}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function JT(e,t,n,i){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:t&&Dn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function YT(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KT(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function WT(e,t,n){let i=await Promise.all(e.map(async r=>{let s=t.routes[r.route.id];if(s){let a=await YT(s,n);return a.links?a.links():[]}return[]}));return eE(i.flat(1).filter(KT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function qm(e,t,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?t.filter((l,c)=>{var p;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function XT(e,t,{includeHydrateFallback:n}={}){return QT(e.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function QT(e){return[...new Set(e)]}function ZT(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function eE(e,t){let n=new Set;return new Set(t),e.reduce((i,r)=>{let s=JSON.stringify(ZT(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function yx(){let e=T.useContext(es);return Gf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tE(){let e=T.useContext(Pl);return Gf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Bf=T.createContext(void 0);Bf.displayName="FrameworkContext";function xx(){let e=T.useContext(Bf);return Gf(e,"You must render this element inside a <HydratedRouter> element"),e}function nE(e,t){let n=T.useContext(Bf),[i,r]=T.useState(!1),[s,a]=T.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:p}=t,m=T.useRef(null);T.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let b=y=>{y.forEach(x=>{a(x.isIntersecting)})},_=new IntersectionObserver(b,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[e]),T.useEffect(()=>{if(i){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[i]);let g=()=>{r(!0)},v=()=>{r(!1),a(!1)};return n?e!=="intent"?[s,m,{}]:[s,m,{onFocus:ms(o,g),onBlur:ms(l,v),onMouseEnter:ms(c,g),onMouseLeave:ms(h,v),onTouchStart:ms(p,g)}]:[!1,m,{}]}function ms(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function iE({page:e,...t}){let{router:n}=yx(),i=T.useMemo(()=>sx(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?T.createElement(sE,{page:e,matches:i,...t}):null}function rE(e){let{manifest:t,routeModules:n}=xx(),[i,r]=T.useState([]);return T.useEffect(()=>{let s=!1;return WT(e,t,n).then(a=>{s||r(a)}),()=>{s=!0}},[e,t,n]),i}function sE({page:e,matches:t,...n}){let i=Zt(),{future:r,manifest:s,routeModules:a}=xx(),{basename:o}=yx(),{loaderData:l,matches:c}=tE(),h=T.useMemo(()=>qm(e,t,c,s,i,"data"),[e,t,c,s,i]),p=T.useMemo(()=>qm(e,t,c,s,i,"assets"),[e,t,c,s,i]),m=T.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let b=new Set,_=!1;if(t.forEach(x=>{var S;let w=s.routes[x.route.id];!w||!w.hasLoader||(!h.some(E=>E.route.id===x.route.id)&&x.route.id in l&&((S=a[x.route.id])!=null&&S.shouldRevalidate)||w.hasClientLoader?_=!0:b.add(x.route.id))}),b.size===0)return[];let y=JT(e,o,r.unstable_trailingSlashAwareDataRequests,"data");return _&&b.size>0&&y.searchParams.set("_routes",t.filter(x=>b.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[o,r.unstable_trailingSlashAwareDataRequests,l,i,s,h,t,e,a]),g=T.useMemo(()=>XT(p,s),[p,s]),v=rE(p);return T.createElement(T.Fragment,null,m.map(b=>T.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>T.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),v.map(({key:b,link:_})=>T.createElement("link",{key:b,nonce:n.nonce,..._,crossOrigin:_.crossOrigin??n.crossOrigin})))}function aE(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var oE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oE&&(window.__reactRouterVersion="7.13.0")}catch{}function lE({basename:e,children:t,unstable_useTransitions:n,window:i}){let r=T.useRef();r.current==null&&(r.current=qS({window:i,v5Compat:!0}));let s=r.current,[a,o]=T.useState({action:s.action,location:s.location}),l=T.useCallback(c=>{n===!1?o(c):T.startTransition(()=>o(c))},[n]);return T.useLayoutEffect(()=>s.listen(l),[s,l]),T.createElement(PT,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wx=T.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:m,...g},v){let{basename:b,unstable_useTransitions:_}=T.useContext(Rt),y=typeof c=="string"&&bx.test(c),x=ux(c,b);c=x.to;let w=_T(c,{relative:r}),[S,E,A]=nE(i,g),C=fE(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:p,unstable_defaultShouldRevalidate:m,unstable_useTransitions:_});function R(M){t&&t(M),M.defaultPrevented||C(M)}let k=T.createElement("a",{...g,...A,href:x.absoluteURL||w,onClick:x.isExternal||s?t:R,ref:aE(v,E),target:l,"data-discover":!y&&n==="render"?"true":void 0});return S&&!y?T.createElement(T.Fragment,null,k,T.createElement(iE,{page:w})):k});wx.displayName="Link";var uE=T.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let p=Aa(a,{relative:c.relative}),m=Zt(),g=T.useContext(Pl),{navigator:v,basename:b}=T.useContext(Rt),_=g!=null&&vE(p)&&o===!0,y=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,x=m.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&b&&(w=Dn(w,b)||w);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let E=x===y||!r&&x.startsWith(y)&&x.charAt(S)==="/",A=w!=null&&(w===y||!r&&w.startsWith(y)&&w.charAt(y.length)==="/"),C={isActive:E,isPending:A,isTransitioning:_},R=E?t:void 0,k;typeof i=="function"?k=i(C):k=[i,E?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(C):s;return T.createElement(wx,{...c,"aria-current":R,className:k,ref:h,style:M,to:a,viewTransition:o},typeof l=="function"?l(C):l)});uE.displayName="NavLink";var cE=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Eo,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:m,...g},v)=>{let{unstable_useTransitions:b}=T.useContext(Rt),_=pE(),y=gE(o,{relative:c}),x=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&bx.test(o),S=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,C=(A==null?void 0:A.getAttribute("formmethod"))||a,R=()=>_(A||E.currentTarget,{fetcherKey:t,method:C,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:m});b&&n!==!1?T.startTransition(()=>R()):R()};return T.createElement("form",{ref:v,method:x,action:y,onSubmit:i?l:S,...g,"data-discover":!w&&e==="render"?"true":void 0})});cE.displayName="Form";function dE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _x(e){let t=T.useContext(es);return Ce(t,dE(e)),t}function fE(e,{target:t,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=jl(),h=Zt(),p=Aa(e,{relative:s});return T.useCallback(m=>{if(VT(m,t)){m.preventDefault();let g=n!==void 0?n:ra(h)===ra(p),v=()=>c(e,{replace:g,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o});l?T.startTransition(()=>v()):v()}},[h,c,p,n,i,t,e,r,s,a,o,l])}var hE=0,mE=()=>`__${String(++hE)}__`;function pE(){let{router:e}=_x("useSubmit"),{basename:t}=T.useContext(Rt),n=DT(),i=e.fetch,r=e.navigate;return T.useCallback(async(s,a={})=>{let{action:o,method:l,encType:c,formData:h,body:p}=FT(s,t);if(a.navigate===!1){let m=a.fetcherKey||mE();await i(m,n,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:p,formMethod:a.method||l,formEncType:a.encType||c,flushSync:a.flushSync})}else await r(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:p,formMethod:a.method||l,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,r,t,n])}function gE(e,{relative:t}={}){let{basename:n}=T.useContext(Rt),i=T.useContext(cn);Ce(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Aa(e||".",{relative:t})},a=Zt();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(p=>p).forEach(p=>o.append("index",p));let h=o.toString();s.search=h?`?${h}`:""}}return(!e||e===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:An([n,s.pathname])),ra(s)}function vE(e,{relative:t}={}){let n=T.useContext(dx);Ce(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_x("useViewTransitionState"),r=Aa(e,{relative:t});if(!n.isTransitioning)return!1;let s=Dn(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Dn(n.nextLocation.pathname,i)||n.nextLocation.pathname;return sl(r.pathname,a)!=null||sl(r.pathname,s)!=null}var J=(e=>(e.TODO="To Do",e.IN_PROGRESS="In Progress",e.DONE="Done",e))(J||{}),W=(e=>(e.LOW="Low",e.MEDIUM="Medium",e.HIGH="High",e.URGENT="Urgent",e))(W||{});const Hi=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),yE=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),Bl=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4.5v15m6-15v15"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75A2.25 2.25 0 0 1 6 4.5h12A2.25 2.25 0 0 1 20.25 6.75v10.5A2.25 2.25 0 0 1 18 19.5H6A2.25 2.25 0 0 1 3.75 17.25V6.75Z"})]}),Hf=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75h.008v.008H12v-.008Z"})]}),qf=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 17.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),Yt=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),xE=({activeSpace:e,currentView:t,onViewChange:n,onAddTask:i,onGenerateTasks:r,searchTerm:s,onSearchChange:a,user:o})=>f.jsxs("header",{className:"h-16 border-b border-neutral-200/50 dark:border-neutral-800/50 bg-neutral-50/80 dark:bg-neutral-900/80 backdrop-blur-2xl flex items-center justify-between px-6 sticky top-0 z-40 transition-all duration-500",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"flex items-center text-sm font-medium",children:[f.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Spaces"}),f.jsx("span",{className:"mx-2 text-neutral-300 dark:text-neutral-700",children:"/"}),f.jsx("span",{className:"text-neutral-900 dark:text-white font-semibold",children:e})]}),f.jsx("div",{className:"h-5 w-px bg-neutral-200 dark:bg-neutral-800 mx-2 hidden md:block"}),f.jsxs("nav",{className:"flex items-center gap-1 bg-neutral-100/80 dark:bg-neutral-800/50 p-1 rounded-xl backdrop-blur-sm",children:[o.role==="admin"&&f.jsxs("button",{onClick:()=>n("dashboard"),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-300 ${t==="dashboard"?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50"}`,children:[f.jsx("div",{className:"w-4 h-4",children:f.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),f.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),f.jsxs("button",{onClick:()=>n("list"),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-300 ${t==="list"?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50"}`,children:[f.jsx(qf,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"List"})]}),f.jsxs("button",{onClick:()=>n("board"),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-300 ${t==="board"?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50"}`,children:[f.jsx(Bl,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Board"})]}),f.jsxs("button",{onClick:()=>n("calendar"),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all duration-300 ${t==="calendar"?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50"}`,children:[f.jsx(Hf,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[["list","board","calendar"].includes(t)&&f.jsxs("div",{className:"relative group hidden md:block",children:[f.jsx(yE,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsx("input",{type:"text",placeholder:"Search...",value:s,onChange:l=>a(l.target.value),className:"bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-2 pl-10 pr-4 text-sm text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 w-52 transition-all duration-300"})]}),["list","board","calendar"].includes(t)&&f.jsx("button",{onClick:r,className:"p-2.5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-xl transition-all duration-300",title:"AI Generate Tasks",children:f.jsx(Yt,{className:"w-5 h-5"})}),["list","board","calendar","gantt"].includes(t)&&f.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-neutral-900 dark:bg-white hover:bg-neutral-800 dark:hover:bg-neutral-100 text-white dark:text-neutral-900 text-sm font-semibold py-2.5 px-5 rounded-xl shadow-lg shadow-neutral-900/20 dark:shadow-white/10 transition-all duration-300 active:scale-95",children:[f.jsx(Hi,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"New Task"})]})]})]}),Sx=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),ol=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),bE=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),wE=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),_E=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),SE=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"}),f.jsx("rect",{x:"5",y:"5",width:"8",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("rect",{x:"8",y:"10",width:"10",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("rect",{x:"3",y:"15",width:"6",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"})]}),Hl=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),TE=({isOpen:e,activeSpaceId:t,spaces:n,currentView:i,onSelectSpace:r,onViewChange:s,onToggle:a,onOpenProfile:o,onLogout:l,onCreateSpace:c,onJoinSpace:h,currentUserEmployee:p,user:m})=>{const[g,v]=lc.useState(t||null);lc.useEffect(()=>{t&&v(t)},[t]);const b=[{id:"home",label:"Home",icon:bE},{id:"overview",label:"Overview",icon:wE},{id:"whiteboard",label:"Task of Today",icon:_E}],_=[{id:"list",label:"List",icon:qf},{id:"board",label:"Board",icon:Bl},{id:"gantt",label:"Gantt",icon:SE},{id:"calendar",label:"Calendar",icon:Hf},{id:"settings",label:"Settings",icon:Hl}],y=S=>{g===S?v(null):(v(S),r(S),s("list"))},x=(S,E)=>{r(S),s(E)},w=["list","board","gantt","calendar","settings"].includes(i);return f.jsxs("aside",{className:`${e?"w-72":"w-20"} bg-neutral-50/80 dark:bg-neutral-900/80 backdrop-blur-2xl border-r border-neutral-200/50 dark:border-neutral-800/50 flex flex-col transition-all duration-500 ease-out relative z-50`,children:[f.jsx("div",{className:"h-16 flex items-center px-6 border-b border-neutral-200/50 dark:border-neutral-800/50",children:f.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:a,children:[f.jsx("div",{className:"p-2 bg-neutral-900 dark:bg-white rounded-xl transition-transform duration-300 group-hover:scale-105",children:f.jsx(Yt,{className:"w-5 h-5 text-white dark:text-neutral-900"})}),e&&f.jsx("span",{className:"text-neutral-900 dark:text-white font-semibold text-lg tracking-tight",children:"TaskFlow"})]})}),f.jsxs("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:[f.jsx("div",{className:`px-3 mb-3 text-[11px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider ${!e&&"text-center"}`,children:e?"Menu":""}),f.jsx("div",{className:"space-y-1",children:b.map(S=>f.jsxs("button",{onClick:()=>s(S.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 group relative
                ${i===S.id&&!w?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg shadow-neutral-900/20 dark:shadow-white/10":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 hover:text-neutral-900 dark:hover:text-white"} ${!e&&"justify-center"}`,children:[f.jsx(S.icon,{className:"w-5 h-5 flex-shrink-0"}),e&&f.jsx("span",{children:S.label}),!e&&f.jsx("div",{className:"absolute left-full ml-3 px-3 py-1.5 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-xs font-medium rounded-lg opacity-0 group-hover:opacity-100 whitespace-nowrap z-50 pointer-events-none shadow-xl transition-opacity duration-200",children:S.label})]},S.id))}),f.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200/50 dark:border-neutral-800/50",children:[f.jsxs("div",{className:`px-3 mb-3 flex items-center justify-between ${!e&&"justify-center"}`,children:[f.jsx("span",{className:"text-[11px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:e?"Workspaces":""}),e&&f.jsx("button",{onClick:c,className:"p-1 text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-all duration-200",title:"Create Space",children:f.jsx(Hi,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"space-y-1",children:[n.map(S=>f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>y(S.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 group relative
                    ${t===S.id&&w?"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 shadow-lg shadow-neutral-900/20 dark:shadow-white/10":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 hover:text-neutral-900 dark:hover:text-white"} ${!e&&"justify-center"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 transition-all duration-300 ${t===S.id?"bg-green-500":"bg-neutral-300 dark:bg-neutral-600"}`}),e&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"flex-1 text-left truncate",children:S.name}),f.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${g===S.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!e&&f.jsx("div",{className:"absolute left-full ml-3 px-3 py-1.5 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-xs font-medium rounded-lg opacity-0 group-hover:opacity-100 whitespace-nowrap z-50 pointer-events-none shadow-xl transition-opacity duration-200",children:S.name})]}),e&&g===S.id&&f.jsx("div",{className:"ml-4 mt-1 space-y-0.5 pl-3 border-l-2 border-neutral-200 dark:border-neutral-700 animate-fade-in",children:_.map(E=>f.jsxs("button",{onClick:()=>x(S.id,E.id),className:`w-full flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                          ${t===S.id&&i===E.id?"bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[f.jsx(E.icon,{className:"w-4 h-4"}),f.jsx("span",{children:E.label})]},E.id))})]},S.id)),e&&f.jsx("div",{className:"pt-2 space-y-1",children:f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-medium text-neutral-400 dark:text-neutral-500 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 hover:text-neutral-600 dark:hover:text-neutral-300 transition-all duration-300",children:[f.jsx(ol,{className:"w-4 h-4"}),f.jsx("span",{children:"Join with Code"})]})}),n.length===0&&e&&f.jsxs("div",{className:"px-3 py-4 text-center",children:[f.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-500 mb-3",children:"No workspaces yet"}),f.jsx("button",{onClick:c,className:"px-4 py-2 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm font-medium rounded-xl hover:bg-neutral-800 dark:hover:bg-neutral-100 transition-all duration-300",children:"Create First Space"})]})]})]})]}),f.jsxs("div",{className:"p-4 border-t border-neutral-200/50 dark:border-neutral-800/50 flex items-center gap-2",children:[f.jsxs("button",{onClick:o,className:`flex items-center gap-3 flex-1 p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800/50 transition-all duration-300 ${!e&&"justify-center"}`,children:[f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsx("img",{src:p==null?void 0:p.avatarUrl,alt:"",className:"w-10 h-10 rounded-xl object-cover border border-neutral-200/50 dark:border-neutral-700/50 transition-transform duration-300 hover:scale-105"}),f.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-neutral-50 dark:border-neutral-900 rounded-full"})]}),e&&f.jsxs("div",{className:"text-left overflow-hidden",children:[f.jsx("p",{className:"text-sm font-semibold text-neutral-900 dark:text-white truncate",children:(p==null?void 0:p.name)||m.username}),f.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500 font-medium",children:"Active"})]})]}),e&&f.jsx("button",{onClick:l,className:"p-2.5 text-neutral-400 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-xl transition-all duration-300",title:"Sign Out",children:f.jsx(Sx,{className:"w-5 h-5"})})]})]})};new Date(Date.now()+2*24*60*60*1e3).toISOString().split("T")[0],J.TODO,W.HIGH,new Date(Date.now()-5*24*60*60*1e3).toISOString(),new Date(Date.now()+4*24*60*60*1e3).toISOString().split("T")[0],J.IN_PROGRESS,W.URGENT,new Date(Date.now()-4*3600*1e3).toISOString(),new Date(Date.now()-2*3600*1e3).toISOString(),2*3600*1e3,new Date(Date.now()-4*24*60*60*1e3).toISOString(),new Date(Date.now()-1*24*60*60*1e3).toISOString().split("T")[0],J.DONE,W.MEDIUM,new Date(Date.now()-10*24*60*60*1e3).toISOString(),new Date(Date.now()-2*24*60*60*1e3).toISOString(),new Date().toISOString().split("T")[0],J.IN_PROGRESS,W.URGENT,new Date().toISOString(),new Date(Date.now()-2*24*60*60*1e3).toISOString(),new Date(Date.now()+10*24*60*60*1e3).toISOString().split("T")[0],J.TODO,W.LOW,new Date(Date.now()-3*24*60*60*1e3).toISOString(),new Date(Date.now()+6*24*60*60*1e3).toISOString().split("T")[0],J.TODO,W.HIGH,new Date(Date.now()-4*24*60*60*1e3).toISOString();const Tx=[J.TODO,J.IN_PROGRESS,J.DONE],Ao=[W.LOW,W.MEDIUM,W.HIGH,W.URGENT],EE=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),sa=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...e,children:f.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),CE=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...e,children:f.jsx("path",{d:"M18 5a3 3 0 00-3-3H5a3 3 0 00-3 3v6a3 3 0 003 3h1.586l1.707 1.707A1 1 0 009 18h2a1 1 0 00.707-.293L13.414 16H15a3 3 0 003-3V5z"})}),ll=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...e,children:f.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),ns=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Vf=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 0 1 0 1.971l-11.54 6.347a1.125 1.125 0 0 1-1.667-.985V5.653Z"})}),$f=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),pi=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),ql=({text:e,onRemove:t,onClick:n})=>{const r=(s=>{const a=["bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300 border-red-200 dark:border-red-800","bg-orange-100 text-orange-800 dark:bg-orange-900/40 dark:text-orange-300 border-orange-200 dark:border-orange-800","bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300 border-amber-200 dark:border-amber-800","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300 border-yellow-200 dark:border-yellow-800","bg-lime-100 text-lime-800 dark:bg-lime-900/40 dark:text-lime-300 border-lime-200 dark:border-lime-800","bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border-green-200 dark:border-green-800","bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800","bg-teal-100 text-teal-800 dark:bg-teal-900/40 dark:text-teal-300 border-teal-200 dark:border-teal-800","bg-cyan-100 text-cyan-800 dark:bg-cyan-900/40 dark:text-cyan-300 border-cyan-200 dark:border-cyan-800","bg-sky-100 text-sky-800 dark:bg-sky-900/40 dark:text-sky-300 border-sky-200 dark:border-sky-800","bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300 border-blue-200 dark:border-blue-800","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800","bg-violet-100 text-violet-800 dark:bg-violet-900/40 dark:text-violet-300 border-violet-200 dark:border-violet-800","bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300 border-purple-200 dark:border-purple-800","bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/40 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-800","bg-pink-100 text-pink-800 dark:bg-pink-900/40 dark:text-pink-300 border-pink-200 dark:border-pink-800","bg-rose-100 text-rose-800 dark:bg-rose-900/40 dark:text-rose-300 border-rose-200 dark:border-rose-800"];let o=0;for(let l=0;l<s.length;l++)o=s.charCodeAt(l)+((o<<5)-o);return a[Math.abs(o)%a.length]})(e);return f.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${r} ${n?"cursor-pointer hover:opacity-80":""}`,onClick:n,children:[e,t&&f.jsxs("button",{type:"button",onClick:s=>{s.stopPropagation(),t()},className:"ml-1.5 inline-flex flex-shrink-0 h-4 w-4 focus:outline-none focus:text-white",children:[f.jsxs("span",{className:"sr-only",children:["Remove ",e," tag"]}),f.jsx(pi,{className:"h-3 w-3"})]})]})},AE={[W.URGENT]:"border-l-4 border-l-red-500",[W.HIGH]:"border-l-4 border-l-orange-500",[W.MEDIUM]:"border-l-4 border-l-indigo-500",[W.LOW]:"border-l-4 border-l-slate-400 dark:border-l-slate-500"},kE=({task:e,allTasks:t,employee:n,onEditTask:i,onDeleteTask:r,onUpdateTaskStatus:s,onViewTask:a,onToggleTimer:o})=>{const l=new Date(e.dueDate)<new Date&&e.status!==J.DONE,[c,h]=T.useState(!1),p=!!e.blockedById,m=(e.subtasks||[]).filter(y=>y.isCompleted).length,g=(e.subtasks||[]).length,v=!!e.timerStartTime,b=y=>{if(p){y.preventDefault();return}y.dataTransfer.setData("application/json",JSON.stringify(e)),setTimeout(()=>h(!0),0)},_=()=>h(!1);return f.jsxs("div",{onClick:()=>a(e),draggable:!p,onDragStart:b,onDragEnd:_,className:`
            bg-white dark:bg-slate-800/60 backdrop-blur-md rounded-xl p-3 shadow-sm hover:shadow-md dark:shadow-lg border border-slate-200 dark:border-white/5 
            group relative transition-all duration-200
            ${AE[e.priority]}
            ${c?"opacity-50 scale-95":"hover:-translate-y-1 hover:bg-slate-50 dark:hover:bg-slate-800/80"}
            ${p?"cursor-not-allowed opacity-70 grayscale":"cursor-grab active:cursor-grabbing"}
        `,children:[f.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[f.jsx("h3",{className:"font-semibold text-sm text-slate-700 dark:text-slate-200 leading-snug line-clamp-2",children:e.title}),f.jsxs("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-slate-100 dark:bg-slate-900/80 rounded-lg p-1 absolute top-2 right-2 backdrop-blur border border-slate-200 dark:border-transparent",children:[f.jsx("button",{onClick:y=>{y.stopPropagation(),o(e.id)},className:`p-1 rounded hover:bg-white dark:hover:bg-white/10 ${v?"text-red-500 dark:text-red-400":"text-slate-400"}`,children:v?f.jsx($f,{className:"w-3 h-3"}):f.jsx(Vf,{className:"w-3 h-3"})}),f.jsx("button",{onClick:y=>{y.stopPropagation(),i(e)},className:"p-1 text-slate-400 hover:text-amber-500 hover:bg-white dark:hover:bg-white/10 rounded",children:f.jsx(EE,{className:"w-3 h-3"})}),r&&f.jsx("button",{onClick:y=>{y.stopPropagation(),r(e.id)},className:"p-1 text-slate-400 hover:text-red-500 hover:bg-white dark:hover:bg-white/10 rounded",children:f.jsx(sa,{className:"w-3 h-3"})})]})]}),e.tags&&e.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(y=>f.jsx(ql,{text:y},y))}),f.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-100 dark:border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[n?f.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-6 h-6 rounded-full border border-slate-200 dark:border-white/10",title:n.name}):f.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-200 dark:border-white/10 bg-slate-100 dark:bg-slate-700"}),f.jsx("span",{className:`text-[10px] font-medium ${l?"text-red-500 dark:text-red-400":"text-slate-500"}`,children:new Date(e.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[v&&f.jsx(ns,{className:"w-3.5 h-3.5 text-primary-500 dark:text-primary-400 animate-pulse"}),p&&f.jsx(ll,{className:"w-3.5 h-3.5 text-amber-500"}),g>0&&f.jsxs("div",{className:"flex items-center text-slate-400 dark:text-slate-500 gap-1",children:[f.jsx(qf,{className:"w-3.5 h-3.5"}),f.jsxs("span",{className:"text-[10px] font-bold",children:[m,"/",g]})]}),e.comments.length>0&&f.jsxs("div",{className:"flex items-center text-slate-400 dark:text-slate-500 gap-1",children:[f.jsx(CE,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"text-[10px] font-bold",children:e.comments.length})]})]})]})]})},NE={[J.TODO]:{border:"border-orange-500/50",text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-500/10"},[J.IN_PROGRESS]:{border:"border-indigo-500/50",text:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-500/10"},[J.DONE]:{border:"border-emerald-500/50",text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10"}},RE=({status:e,tasks:t,allTasks:n,employees:i,onEditTask:r,onDeleteTask:s,onUpdateTaskStatus:a,onViewTask:o,onToggleTimer:l})=>{const c=NE[e],[h,p]=T.useState(!1),m=b=>{b.preventDefault(),p(!0)},g=()=>{p(!1)},v=b=>{b.preventDefault(),p(!1);try{const _=JSON.parse(b.dataTransfer.getData("application/json"));_&&_.status!==e&&a(_.id,e)}catch(_){console.error("Failed to parse dropped task data",_)}};return f.jsxs("div",{onDragOver:m,onDragLeave:g,onDrop:v,className:`flex flex-col h-full rounded-2xl transition-colors ${h?"bg-indigo-50 dark:bg-white/5 ring-2 ring-indigo-500/50":"bg-transparent"}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-3 mb-2 rounded-xl border border-slate-200 dark:border-white/5 bg-slate-50/80 dark:bg-slate-900/40 backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${c.text}`,children:e}),f.jsx("span",{className:"bg-white dark:bg-white/10 text-slate-600 dark:text-slate-300 rounded px-1.5 py-0.5 text-xs font-mono shadow-sm",children:t.length})]}),f.jsx("div",{className:"flex gap-1",children:f.jsx("button",{className:"p-1 hover:bg-white/50 dark:hover:bg-white/10 rounded text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-white transition-colors",children:f.jsx(Hi,{className:"w-4 h-4"})})})]}),f.jsxs("div",{className:"flex-1 space-y-3 min-h-[150px]",children:[t.map(b=>f.jsx(kE,{task:b,allTasks:n,employee:i.find(_=>_.id===b.assigneeId),onEditTask:r,onDeleteTask:s,onUpdateTaskStatus:a,onViewTask:o,onToggleTimer:l},b.id)),t.length===0&&f.jsx("div",{className:"h-24 border-2 border-dashed border-slate-200 dark:border-white/5 rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-600 text-sm",children:"No tasks"})]})]})},IE=({tasks:e,allTasks:t,employees:n,onEditTask:i,onDeleteTask:r,onUpdateTaskStatus:s,onViewTask:a,onToggleTimer:o})=>f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:Tx.map(l=>f.jsx(RE,{status:l,tasks:e.filter(c=>c.status===l),allTasks:t,employees:n,onEditTask:i,onDeleteTask:r,onUpdateTaskStatus:s,onViewTask:a,onToggleTimer:o},l))}),zf=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),Vm={[J.TODO]:"bg-orange-500",[J.IN_PROGRESS]:"bg-indigo-500",[J.DONE]:"bg-emerald-500"},ME={[W.URGENT]:"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-400/10",[W.HIGH]:"text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-400/10",[W.MEDIUM]:"text-indigo-600 dark:text-indigo-400 bg-indigo-100 dark:bg-indigo-400/10",[W.LOW]:"text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-400/10"},DE=({status:e,tasks:t,employees:n,onViewTask:i,onToggleTimer:r})=>{const[s,a]=T.useState(!1);return t.length===0?null:f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2 group cursor-pointer",onClick:()=>a(!s),children:[f.jsx("div",{className:`transition-transform duration-200 ${s?"":"rotate-90"}`,children:f.jsx(zf,{className:"w-4 h-4 text-slate-500"})}),f.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider text-white ${Vm[e]}`,children:e}),f.jsx("span",{className:"text-slate-600 dark:text-slate-500 text-sm font-medium",children:t.length}),f.jsx("div",{className:"h-px bg-slate-200 dark:bg-white/10 flex-grow ml-2 group-hover:bg-slate-300 dark:group-hover:bg-white/20 transition-colors"})]}),!s&&f.jsxs("div",{className:"bg-white/50 dark:bg-slate-900/40 border border-slate-200 dark:border-white/5 rounded-xl overflow-hidden backdrop-blur-sm shadow-sm dark:shadow-none",children:[f.jsxs("div",{className:"grid grid-cols-[1fr_120px_120px_120px_100px] gap-4 px-4 py-2 border-b border-slate-200 dark:border-white/5 text-xs font-bold text-slate-500 uppercase tracking-wider",children:[f.jsx("div",{children:"Name"}),f.jsx("div",{children:"Assignee"}),f.jsx("div",{children:"Due Date"}),f.jsx("div",{children:"Priority"}),f.jsx("div",{className:"text-right",children:"Timer"})]}),f.jsx("div",{children:t.map(o=>{const l=n.find(p=>p.id===o.assigneeId),c=new Date(o.dueDate)<new Date&&o.status!==J.DONE,h=!!o.timerStartTime;return f.jsxs("div",{onClick:()=>i(o),className:"grid grid-cols-[1fr_120px_120px_120px_100px] gap-4 px-4 py-3 border-b border-slate-100 dark:border-white/5 last:border-0 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors cursor-pointer group items-center",children:[f.jsxs("div",{className:"min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Vm[e]}`}),f.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200 truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:o.title})]}),o.tags&&o.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 ml-4 mt-1",children:o.tags.map(p=>f.jsx(ql,{text:p},p))})]}),f.jsx("div",{className:"flex items-center",children:l?f.jsxs("div",{className:"flex items-center gap-2",title:l.name,children:[f.jsx("img",{src:l.avatarUrl,className:"w-6 h-6 rounded-full border border-slate-200 dark:border-white/10"}),f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:l.name.split(" ")[0]})]}):f.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-600 italic",children:"Unassigned"})}),f.jsx("div",{className:`text-xs ${c?"text-red-500 dark:text-red-400 font-bold":"text-slate-500 dark:text-slate-400"}`,children:new Date(o.dueDate).toLocaleDateString()}),f.jsx("div",{children:f.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${ME[o.priority]}`,children:o.priority})}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:p=>{p.stopPropagation(),r(o.id)},className:`p-1.5 rounded-md transition-all ${h?"bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400":"text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-slate-200 dark:hover:bg-white/5 opacity-0 group-hover:opacity-100"}`,children:h?f.jsx($f,{className:"w-4 h-4"}):f.jsx(Vf,{className:"w-4 h-4"})})})]},o.id)})})]})]})},UE=({tasks:e,employees:t,onEditTask:n,onViewTask:i,onUpdateTaskStatus:r,onToggleTimer:s})=>{var m;const[a,o]=T.useState(null),l=g=>{const v=e.filter(b=>b.assigneeId===g);return{total:v.length,completed:v.filter(b=>b.status===J.DONE).length,inProgress:v.filter(b=>b.status===J.IN_PROGRESS).length,todo:v.filter(b=>b.status===J.TODO).length}},h=(()=>{const g=new Date;g.setHours(0,0,0,0);const v=new Date(g);return v.setDate(v.getDate()+1),e.filter(b=>{const _=new Date(b.dueDate);return _.setHours(0,0,0,0),_<=v&&b.status!==J.DONE})})(),p=a?e.filter(g=>g.assigneeId===a):e;return f.jsxs("div",{className:"pb-10 space-y-6",children:[h.length>0&&f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border border-blue-200/50 dark:border-blue-800/50 p-5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white flex items-center gap-2",children:[f.jsx(ns,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Today's Tasks"]}),f.jsx("span",{className:"px-3 py-1 bg-blue-600 dark:bg-blue-500 text-white text-xs font-bold rounded-full",children:h.length})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:h.slice(0,6).map(g=>{const v=t.find(b=>b.id===g.assigneeId);return f.jsxs("div",{onClick:()=>i(g),className:"bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm rounded-lg p-3 border border-neutral-200/50 dark:border-neutral-800/50 hover:shadow-md transition-all duration-200 cursor-pointer group",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v&&f.jsx("img",{src:v.avatarUrl,className:"w-6 h-6 rounded-full border border-neutral-200 dark:border-neutral-700",alt:""}),f.jsx("p",{className:"text-sm font-semibold text-neutral-900 dark:text-white truncate flex-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:g.title})]}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Due: ",new Date(g.dueDate).toLocaleDateString()]})]},g.id)})}),h.length>6&&f.jsxs("p",{className:"text-xs text-center text-neutral-500 dark:text-neutral-400 mt-3",children:["+ ",h.length-6," more tasks"]})]}),t.length>0&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Team Members ",f.jsxs("span",{className:"text-sm font-normal text-neutral-500 dark:text-neutral-400",children:["(",t.length," members in this space)"]})]}),a&&f.jsx("button",{onClick:()=>o(null),className:"text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline",children:"Show All Tasks"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((g,v)=>{const b=l(g.id),_=b.total>0?Math.round(b.completed/b.total*100):0,y=a===g.id;return f.jsxs("div",{onClick:()=>o(y?null:g.id),className:`bg-white dark:bg-neutral-900 rounded-2xl border-2 p-5 transition-all duration-300 cursor-pointer hover:shadow-xl ${y?"border-blue-500 dark:border-blue-400 shadow-lg shadow-blue-500/20":"border-neutral-200/50 dark:border-neutral-800/50 hover:border-neutral-300 dark:hover:border-neutral-700"}`,children:[f.jsx("div",{className:"flex items-center justify-between mb-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-600 flex items-center justify-center text-xl font-bold text-neutral-700 dark:text-neutral-200 uppercase",children:g.name.split(" ").map(x=>x[0]).join("")}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white dark:border-neutral-900 rounded-full"})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-base font-bold text-neutral-900 dark:text-white",children:g.name}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[b.total," tasks assigned"]})]})]})}),f.jsxs("div",{className:"mb-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Task Progress"}),f.jsxs("span",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:[_,"%"]})]}),f.jsx("div",{className:"h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500",style:{width:`${_}%`}})})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsxs("div",{className:"text-center p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl",children:[f.jsx("p",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:b.todo}),f.jsx("p",{className:"text-[10px] font-bold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mt-1",children:"To Do"})]}),f.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-500/10 rounded-xl",children:[f.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b.inProgress}),f.jsx("p",{className:"text-[10px] font-bold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mt-1",children:"Active"})]}),f.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-500/10 rounded-xl",children:[f.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.completed}),f.jsx("p",{className:"text-[10px] font-bold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mt-1",children:"Done"})]})]}),y&&f.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700",children:f.jsxs("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 text-center",children:["Showing ",b.total," tasks below "]})})]},g.id)})})]}),f.jsxs("div",{children:[a&&f.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 flex items-center justify-between",children:[f.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:["Showing tasks for: ",f.jsx("span",{className:"font-bold",children:(m=t.find(g=>g.id===a))==null?void 0:m.name})]}),f.jsx("button",{onClick:()=>o(null),className:"text-xs font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"Clear Filter"})]}),Tx.map(g=>f.jsx(DE,{status:g,tasks:p.filter(v=>v.status===g),employees:t,onEditTask:n,onViewTask:i,onUpdateTaskStatus:r,onToggleTimer:s},g)),p.length===0&&f.jsx("div",{className:"text-center py-20 text-slate-500",children:f.jsxs("p",{children:["No tasks found ",a?"for this team member":"in this view","."]})})]})]})};var LE={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let OE,PE;function jE(){return{geminiUrl:OE,vertexUrl:PE}}function GE(e,t,n,i){var r,s;if(!(e!=null&&e.baseUrl)){const a=jE();return t?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class On{}function O(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const s=t[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const a=t[s];if(a.endsWith("[]")){const o=a.slice(0,-2);if(!(o in e))if(Array.isArray(n))e[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(e[o])){const l=e[o];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];d(h,t.slice(s+1),n[c])}else for(const c of l)d(c,t.slice(s+1),n)}return}else if(a.endsWith("[0]")){const o=a.slice(0,-3);o in e||(e[o]=[{}]);const l=e[o];d(l[0],t.slice(s+1),n);return}(!e[a]||typeof e[a]!="object")&&(e[a]={}),e=e[a]}const i=t[t.length-1],r=e[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const r=t[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in e){const a=e[s];return Array.isArray(a)?a.map(o=>u(o,t.slice(i+1),n)):n}else return n}else e=e[r]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function BE(e,t){for(const[n,i]of Object.entries(t)){const r=n.split("."),s=i.split("."),a=new Set;let o=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){o=l;break}if(o!==-1&&s.length>o)for(let l=o;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}ad(e,r,s,0,a)}}function ad(e,t,n,i,r){if(i>=t.length||typeof e!="object"||e===null)return;const s=t[i];if(s.endsWith("[]")){const a=s.slice(0,-2),o=e;if(a in o&&Array.isArray(o[a]))for(const l of o[a])ad(l,t,n,i+1,r)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const a=e,o=Object.keys(a).filter(c=>!c.startsWith("_")&&!r.has(c)),l={};for(const c of o)l[c]=a[c];for(const[c,h]of Object.entries(l)){const p=[];for(const m of n.slice(i))m==="*"?p.push(c):p.push(m);d(a,p,h)}for(const c of o)delete a[c]}}else{const a=e;s in a&&ad(a[s],t,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HE(e){const t={},n=u(e,["operationName"]);n!=null&&d(t,["operationName"],n);const i=u(e,["resourceName"]);return i!=null&&d(t,["_url","resourceName"],i),t}function qE(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["response","generateVideoResponse"]);return a!=null&&d(t,["response"],$E(a)),t}function VE(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["response"]);return a!=null&&d(t,["response"],zE(a)),t}function $E(e){const t={},n=u(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>FE(a))),d(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const r=u(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function zE(e){const t={},n=u(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>JE(a))),d(t,["generatedVideos"],s)}const i=u(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const r=u(e,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function FE(e){const t={},n=u(e,["video"]);return n!=null&&d(t,["video"],ZE(n)),t}function JE(e){const t={},n=u(e,["_self"]);return n!=null&&d(t,["video"],eC(n)),t}function YE(e){const t={},n=u(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function KE(e){const t={},n=u(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function WE(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["response"]);return a!=null&&d(t,["response"],XE(a)),t}function XE(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&d(t,["parent"],i);const r=u(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function Ex(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["response"]);return a!=null&&d(t,["response"],QE(a)),t}function QE(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&d(t,["parent"],i);const r=u(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function ZE(e){const t={},n=u(e,["uri"]);n!=null&&d(t,["uri"],n);const i=u(e,["encodedVideo"]);i!=null&&d(t,["videoBytes"],Ff(i));const r=u(e,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function eC(e){const t={},n=u(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const i=u(e,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],Ff(i));const r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $m;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($m||($m={}));var zm;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(zm||(zm={}));var Fm;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Fm||(Fm={}));var Pe;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Pe||(Pe={}));var Jm;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jm||(Jm={}));var Ym;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Ym||(Ym={}));var Km;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Km||(Km={}));var Wm;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Wm||(Wm={}));var Xm;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Xm||(Xm={}));var Qm;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Qm||(Qm={}));var Zm;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Zm||(Zm={}));var e0;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(e0||(e0={}));var t0;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(t0||(t0={}));var n0;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(n0||(n0={}));var i0;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(i0||(i0={}));var r0;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(r0||(r0={}));var s0;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(s0||(s0={}));var a0;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(a0||(a0={}));var o0;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(o0||(o0={}));var l0;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(l0||(l0={}));var u0;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(u0||(u0={}));var ul;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(ul||(ul={}));var c0;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(c0||(c0={}));var d0;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(d0||(d0={}));var f0;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(f0||(f0={}));var od;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(od||(od={}));var h0;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(h0||(h0={}));var m0;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(m0||(m0={}));var ld;(function(e){e.COLLECTION="COLLECTION"})(ld||(ld={}));var p0;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(p0||(p0={}));var g0;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(g0||(g0={}));var v0;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(v0||(v0={}));var y0;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(y0||(y0={}));var x0;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(x0||(x0={}));var b0;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(b0||(b0={}));var w0;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(w0||(w0={}));var _0;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_0||(_0={}));var S0;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(S0||(S0={}));var T0;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(T0||(T0={}));var E0;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(E0||(E0={}));var C0;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(C0||(C0={}));var A0;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(A0||(A0={}));var k0;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(k0||(k0={}));var N0;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(N0||(N0={}));var R0;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(R0||(R0={}));var I0;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(I0||(I0={}));var M0;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(M0||(M0={}));var D0;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(D0||(D0={}));var U0;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(U0||(U0={}));var L0;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(L0||(L0={}));var O0;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(O0||(O0={}));var P0;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(P0||(P0={}));var j0;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(j0||(j0={}));var G0;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(G0||(G0={}));var B0;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(B0||(B0={}));var H0;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(H0||(H0={}));var wr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(wr||(wr={}));class ud{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ps{get text(){var t,n,i,r,s,a,o,l;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var t,n,i,r,s,a,o,l;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,r,s,a,o,l;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,i,r,s,a,o,l,c;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,r,s,a,o,l,c;if(((r=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class q0{}class V0{}class tC{}class nC{}class iC{}class rC{}class $0{}class z0{}class F0{}class sC{}class cl{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new cl;let r;const s=t;return n?r=VE(s):r=qE(s),Object.assign(i,r),i}}class J0{}class Y0{}class K0{}class W0{}class aC{}class oC{}class lC{}class Jf{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Jf,s=WE(t);return Object.assign(i,s),i}}class uC{}class cC{}class dC{}class fC{}class X0{}class hC{get text(){var t,n,i;let r="",s=!1;const a=[];for(const o of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(o))l!=="text"&&l!=="thought"&&c!==null&&a.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,r+=o.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var t,n,i;let r="";const s=[];for(const a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[o,l]of Object.entries(a))o!=="inlineData"&&l!==null&&s.push(o);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class mC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yf{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Yf,s=Ex(t);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oe(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Cx(e,t){const n=oe(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Ax(e){return Array.isArray(e)?e.map(t=>dl(t)):[dl(e)]}function dl(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function kx(e){const t=dl(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Nx(e){const t=dl(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Q0(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Rx(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Q0(t)):[Q0(e)]}function cd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Z0(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function ep(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function tt(e){if(e==null)throw new Error("ContentUnion is required");return cd(e)?e:{role:"user",parts:Rx(e)}}function Kf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=tt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=tt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>tt(n)):[tt(t)]}function Bt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Z0(e)||ep(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tt(e)]}const t=[],n=[],i=cd(e[0]);for(const r of e){const s=cd(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(r);else{if(Z0(r)||ep(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||t.push({role:"user",parts:Rx(n)}),t}function pC(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Pe).includes(n[0].toUpperCase())?n[0].toUpperCase():Pe.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Pe).includes(i.toUpperCase())?i.toUpperCase():Pe.TYPE_UNSPECIFIED})}}function Ir(e){const t={},n=["items"],i=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&pC(e.type,t);for(const[a,o]of Object.entries(e))if(o!=null)if(a=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;t.type=Object.values(Pe).includes(o.toUpperCase())?o.toUpperCase():Pe.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=Ir(o);else if(i.includes(a)){const l=[];for(const c of o){if(c.type=="null"){t.nullable=!0;continue}l.push(Ir(c))}t[a]=l}else if(r.includes(a)){const l={};for(const[c,h]of Object.entries(o))l[c]=Ir(h);t[a]=l}else{if(a==="additionalProperties")continue;t[a]=o}return t}function Wf(e){return Ir(e)}function Xf(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Qf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function is(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ir(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ir(t.response));return e}function rs(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function gC(e,t,n,i=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Pn(e,t){if(typeof t!="string")throw new Error("name must be a string");return gC(e,t,"cachedContents")}function Ix(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function gi(e){return Ff(e)}function vC(e){return e!=null&&typeof e=="object"&&"name"in e}function yC(e){return e!=null&&typeof e=="object"&&"video"in e}function xC(e){return e!=null&&typeof e=="object"&&"uri"in e}function Mx(e){var t;let n;if(vC(e)&&(n=e.name),!(xC(e)&&(n=e.uri,n===void 0))&&!(yC(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Dx(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Ux(e){for(const t of["models","tunedModels","publisherModels"])if(bC(e,t))return e[t];return[]}function bC(e,t){return e!==null&&typeof e=="object"&&t in e}function wC(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function _C(e,t={}){const n=[],i=new Set;for(const r of e){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=wC(r,t);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Lx(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function SC(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Ox(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const l=a.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function ss(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Px(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TC(e){const t={},n=u(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const i=u(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>rA(a))),d(t,["inlinedResponses"],s)}const r=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["inlinedEmbedContentResponses"],s)}return t}function EC(e){const t={},n=u(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const i=u(e,["gcsDestination","outputUriPrefix"]);i!=null&&d(t,["gcsUri"],i);const r=u(e,["bigqueryDestination","outputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function CC(e){const t={},n=u(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const i=u(e,["gcsUri"]);i!=null&&d(t,["gcsDestination","outputUriPrefix"],i);const r=u(e,["bigqueryUri"]);if(r!=null&&d(t,["bigqueryDestination","outputUri"],r),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function ko(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata","displayName"]);i!=null&&d(t,["displayName"],i);const r=u(e,["metadata","state"]);r!=null&&d(t,["state"],Px(r));const s=u(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const a=u(e,["metadata","endTime"]);a!=null&&d(t,["endTime"],a);const o=u(e,["metadata","updateTime"]);o!=null&&d(t,["updateTime"],o);const l=u(e,["metadata","model"]);l!=null&&d(t,["model"],l);const c=u(e,["metadata","output"]);return c!=null&&d(t,["dest"],TC(Ox(c))),t}function dd(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["displayName"]);i!=null&&d(t,["displayName"],i);const r=u(e,["state"]);r!=null&&d(t,["state"],Px(r));const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["createTime"]);a!=null&&d(t,["createTime"],a);const o=u(e,["startTime"]);o!=null&&d(t,["startTime"],o);const l=u(e,["endTime"]);l!=null&&d(t,["endTime"],l);const c=u(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const h=u(e,["model"]);h!=null&&d(t,["model"],h);const p=u(e,["inputConfig"]);p!=null&&d(t,["src"],AC(p));const m=u(e,["outputConfig"]);m!=null&&d(t,["dest"],EC(Ox(m)));const g=u(e,["completionStats"]);return g!=null&&d(t,["completionStats"],g),t}function AC(e){const t={},n=u(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const i=u(e,["gcsSource","uris"]);i!=null&&d(t,["gcsUri"],i);const r=u(e,["bigquerySource","inputUri"]);return r!=null&&d(t,["bigqueryUri"],r),t}function kC(e,t){const n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(t,["fileName"]);i!=null&&d(n,["fileName"],i);const r=u(t,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>iA(e,a))),d(n,["requests","requests"],s)}return n}function NC(e){const t={},n=u(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const i=u(e,["gcsUri"]);i!=null&&d(t,["gcsSource","uris"],i);const r=u(e,["bigqueryUri"]);if(r!=null&&d(t,["bigquerySource","inputUri"],r),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function RC(e){const t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function IC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function MC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function DC(e){const t={},n=u(e,["content"]);n!=null&&d(t,["content"],n);const i=u(e,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],UC(i));const r=u(e,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);const s=u(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const a=u(e,["avgLogprobs"]);a!=null&&d(t,["avgLogprobs"],a);const o=u(e,["groundingMetadata"]);o!=null&&d(t,["groundingMetadata"],o);const l=u(e,["index"]);l!=null&&d(t,["index"],l);const c=u(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const h=u(e,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),d(t,["safetyRatings"],m)}const p=u(e,["urlContextMetadata"]);return p!=null&&d(t,["urlContextMetadata"],p),t}function UC(e){const t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(t,["citations"],i)}return t}function jx(e){const t={},n=u(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>dA(s))),d(t,["parts"],r)}const i=u(e,["role"]);return i!=null&&d(t,["role"],i),t}function LC(e,t){const n={},i=u(e,["displayName"]);if(t!==void 0&&i!=null&&d(t,["batch","displayName"],i),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function OC(e,t){const n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const r=u(e,["dest"]);return t!==void 0&&r!=null&&d(t,["outputConfig"],CC(SC(r))),n}function tp(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["_url","model"],oe(e,i));const r=u(t,["src"]);r!=null&&d(n,["batch","inputConfig"],kC(e,Lx(e,r)));const s=u(t,["config"]);return s!=null&&LC(s,n),n}function PC(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["model"],oe(e,i));const r=u(t,["src"]);r!=null&&d(n,["inputConfig"],NC(Lx(e,r)));const s=u(t,["config"]);return s!=null&&OC(s,n),n}function jC(e,t){const n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&d(t,["batch","displayName"],i),n}function GC(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["_url","model"],oe(e,i));const r=u(t,["src"]);r!=null&&d(n,["batch","inputConfig"],FC(e,r));const s=u(t,["config"]);return s!=null&&jC(s,n),n}function BC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function HC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function qC(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["name"]);i!=null&&d(t,["name"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);return s!=null&&d(t,["error"],s),t}function VC(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["name"]);i!=null&&d(t,["name"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);return s!=null&&d(t,["error"],s),t}function $C(e,t){const n={},i=u(t,["contents"]);if(i!=null){let s=Kf(e,i);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["requests[]","request","content"],s)}const r=u(t,["config"]);return r!=null&&(d(n,["_self"],zC(r,n)),BE(n,{"requests[].*":"requests[].request.*"})),n}function zC(e,t){const n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&d(t,["requests[]","taskType"],i);const r=u(e,["title"]);t!==void 0&&r!=null&&d(t,["requests[]","title"],r);const s=u(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function FC(e,t){const n={},i=u(t,["fileName"]);i!=null&&d(n,["file_name"],i);const r=u(t,["inlinedRequests"]);return r!=null&&d(n,["requests"],$C(e,r)),n}function JC(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function YC(e){const t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);const i=u(e,["args"]);i!=null&&d(t,["args"],i);const r=u(e,["name"]);if(r!=null&&d(t,["name"],r),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function KC(e){const t={},n=u(e,["allowedFunctionNames"]);n!=null&&d(t,["allowedFunctionNames"],n);const i=u(e,["mode"]);if(i!=null&&d(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function WC(e,t,n){const i={},r=u(t,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],jx(tt(r)));const s=u(t,["temperature"]);s!=null&&d(i,["temperature"],s);const a=u(t,["topP"]);a!=null&&d(i,["topP"],a);const o=u(t,["topK"]);o!=null&&d(i,["topK"],o);const l=u(t,["candidateCount"]);l!=null&&d(i,["candidateCount"],l);const c=u(t,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const h=u(t,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const p=u(t,["responseLogprobs"]);p!=null&&d(i,["responseLogprobs"],p);const m=u(t,["logprobs"]);m!=null&&d(i,["logprobs"],m);const g=u(t,["presencePenalty"]);g!=null&&d(i,["presencePenalty"],g);const v=u(t,["frequencyPenalty"]);v!=null&&d(i,["frequencyPenalty"],v);const b=u(t,["seed"]);b!=null&&d(i,["seed"],b);const _=u(t,["responseMimeType"]);_!=null&&d(i,["responseMimeType"],_);const y=u(t,["responseSchema"]);y!=null&&d(i,["responseSchema"],Wf(y));const x=u(t,["responseJsonSchema"]);if(x!=null&&d(i,["responseJsonSchema"],x),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=u(t,["safetySettings"]);if(n!==void 0&&w!=null){let q=w;Array.isArray(q)&&(q=q.map(se=>fA(se))),d(n,["safetySettings"],q)}const S=u(t,["tools"]);if(n!==void 0&&S!=null){let q=rs(S);Array.isArray(q)&&(q=q.map(se=>mA(is(se)))),d(n,["tools"],q)}const E=u(t,["toolConfig"]);if(n!==void 0&&E!=null&&d(n,["toolConfig"],hA(E)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=u(t,["cachedContent"]);n!==void 0&&A!=null&&d(n,["cachedContent"],Pn(e,A));const C=u(t,["responseModalities"]);C!=null&&d(i,["responseModalities"],C);const R=u(t,["mediaResolution"]);R!=null&&d(i,["mediaResolution"],R);const k=u(t,["speechConfig"]);if(k!=null&&d(i,["speechConfig"],Xf(k)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=u(t,["thinkingConfig"]);M!=null&&d(i,["thinkingConfig"],M);const G=u(t,["imageConfig"]);G!=null&&d(i,["imageConfig"],nA(G));const Y=u(t,["enableEnhancedCivicAnswers"]);if(Y!=null&&d(i,["enableEnhancedCivicAnswers"],Y),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function XC(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>DC(c))),d(t,["candidates"],l)}const r=u(e,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const s=u(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const a=u(e,["responseId"]);a!=null&&d(t,["responseId"],a);const o=u(e,["usageMetadata"]);return o!=null&&d(t,["usageMetadata"],o),t}function QC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function ZC(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],ss(e,i)),n}function eA(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function tA(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function nA(e){const t={},n=u(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const i=u(e,["imageSize"]);if(i!=null&&d(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function iA(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["request","model"],oe(e,i));const r=u(t,["contents"]);if(r!=null){let o=Bt(r);Array.isArray(o)&&(o=o.map(l=>jx(l))),d(n,["request","contents"],o)}const s=u(t,["metadata"]);s!=null&&d(n,["metadata"],s);const a=u(t,["config"]);return a!=null&&d(n,["request","generationConfig"],WC(e,a,u(n,["request"],{}))),n}function rA(e){const t={},n=u(e,["response"]);n!=null&&d(t,["response"],XC(n));const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["error"]);return r!=null&&d(t,["error"],r),t}function sA(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);if(t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function aA(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);t!==void 0&&r!=null&&d(t,["_query","pageToken"],r);const s=u(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function oA(e){const t={},n=u(e,["config"]);return n!=null&&sA(n,t),t}function lA(e){const t={},n=u(e,["config"]);return n!=null&&aA(n,t),t}function uA(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ko(a))),d(t,["batchJobs"],s)}return t}function cA(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>dd(a))),d(t,["batchJobs"],s)}return t}function dA(e){const t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const r=u(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const s=u(e,["fileData"]);s!=null&&d(t,["fileData"],JC(s));const a=u(e,["functionCall"]);a!=null&&d(t,["functionCall"],YC(a));const o=u(e,["functionResponse"]);o!=null&&d(t,["functionResponse"],o);const l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],RC(l));const c=u(e,["text"]);c!=null&&d(t,["text"],c);const h=u(e,["thought"]);h!=null&&d(t,["thought"],h);const p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const m=u(e,["videoMetadata"]);return m!=null&&d(t,["videoMetadata"],m),t}function fA(e){const t={},n=u(e,["category"]);if(n!=null&&d(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(e,["threshold"]);return i!=null&&d(t,["threshold"],i),t}function hA(e){const t={},n=u(e,["retrievalConfig"]);n!=null&&d(t,["retrievalConfig"],n);const i=u(e,["functionCallingConfig"]);return i!=null&&d(t,["functionCallingConfig"],KC(i)),t}function mA(e){const t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);const i=u(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const r=u(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=u(e,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),d(t,["functionDeclarations"],h)}const a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],eA(a));const o=u(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],tA(o));const l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);const c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Un;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Un||(Un={}));class Ji{constructor(t,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,r)}init(t,n,i){var r,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA extends On{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=tp(this.apiClient,t),i=n._url,r=O("{model}:batchGenerateContent",i),o=n.batch.inputConfig.requests,l=o.requests,c=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}c.push(p)}return o.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(t),a=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=PC(this.apiClient,t);return o=O("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>dd(h))}else{const c=tp(this.apiClient,t);return o=O("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>ko(h))}}async createEmbeddingsInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=GC(this.apiClient,t);return s=O("{model}:asyncBatchEmbedContent",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>ko(l))}}async get(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=ZC(this.apiClient,t);return o=O("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>dd(h))}else{const c=QC(this.apiClient,t);return o=O("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>ko(h))}}async cancel(t){var n,i,r,s;let a="",o={};if(this.apiClient.isVertexAI()){const l=MC(this.apiClient,t);a=O("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=IC(this.apiClient,t);a=O("batches/{name}:cancel",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=lA(t);return o=O("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=cA(h),m=new X0;return Object.assign(m,p),m})}else{const c=oA(t);return o=O("batches",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=uA(h),m=new X0;return Object.assign(m,p),m})}}async delete(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=HC(this.apiClient,t);return o=O("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>VC(h))}else{const c=BC(this.apiClient,t);return o=O("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>qC(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gA(e){const t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function np(e){const t={},n=u(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>GA(s))),d(t,["parts"],r)}const i=u(e,["role"]);return i!=null&&d(t,["role"],i),t}function vA(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const r=u(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const s=u(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const a=u(e,["contents"]);if(t!==void 0&&a!=null){let h=Bt(a);Array.isArray(h)&&(h=h.map(p=>np(p))),d(t,["contents"],h)}const o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],np(tt(o)));const l=u(e,["tools"]);if(t!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>HA(p))),d(t,["tools"],h)}const c=u(e,["toolConfig"]);if(t!==void 0&&c!=null&&d(t,["toolConfig"],BA(c)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function yA(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const r=u(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const s=u(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const a=u(e,["contents"]);if(t!==void 0&&a!=null){let p=Bt(a);Array.isArray(p)&&(p=p.map(m=>m)),d(t,["contents"],p)}const o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],tt(o));const l=u(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>qA(m))),d(t,["tools"],p)}const c=u(e,["toolConfig"]);t!==void 0&&c!=null&&d(t,["toolConfig"],c);const h=u(e,["kmsKeyName"]);return t!==void 0&&h!=null&&d(t,["encryption_spec","kmsKeyName"],h),n}function xA(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["model"],Cx(e,i));const r=u(t,["config"]);return r!=null&&vA(r,n),n}function bA(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["model"],Cx(e,i));const r=u(t,["config"]);return r!=null&&yA(r,n),n}function wA(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],Pn(e,i)),n}function _A(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],Pn(e,i)),n}function SA(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function TA(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function EA(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function CA(e){const t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);const i=u(e,["args"]);i!=null&&d(t,["args"],i);const r=u(e,["name"]);if(r!=null&&d(t,["name"],r),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function AA(e){const t={},n=u(e,["allowedFunctionNames"]);n!=null&&d(t,["allowedFunctionNames"],n);const i=u(e,["mode"]);if(i!=null&&d(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function kA(e){const t={},n=u(e,["description"]);n!=null&&d(t,["description"],n);const i=u(e,["name"]);i!=null&&d(t,["name"],i);const r=u(e,["parameters"]);r!=null&&d(t,["parameters"],r);const s=u(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const a=u(e,["response"]);a!=null&&d(t,["response"],a);const o=u(e,["responseJsonSchema"]);if(o!=null&&d(t,["responseJsonSchema"],o),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function NA(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],Pn(e,i)),n}function RA(e,t){const n={},i=u(t,["name"]);return i!=null&&d(n,["_url","name"],Pn(e,i)),n}function IA(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function MA(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function DA(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function UA(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function LA(e){const t={},n=u(e,["config"]);return n!=null&&DA(n,t),t}function OA(e){const t={},n=u(e,["config"]);return n!=null&&UA(n,t),t}function PA(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["cachedContents"],s)}return t}function jA(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["cachedContents"],s)}return t}function GA(e){const t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const r=u(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const s=u(e,["fileData"]);s!=null&&d(t,["fileData"],EA(s));const a=u(e,["functionCall"]);a!=null&&d(t,["functionCall"],CA(a));const o=u(e,["functionResponse"]);o!=null&&d(t,["functionResponse"],o);const l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],gA(l));const c=u(e,["text"]);c!=null&&d(t,["text"],c);const h=u(e,["thought"]);h!=null&&d(t,["thought"],h);const p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const m=u(e,["videoMetadata"]);return m!=null&&d(t,["videoMetadata"],m),t}function BA(e){const t={},n=u(e,["retrievalConfig"]);n!=null&&d(t,["retrievalConfig"],n);const i=u(e,["functionCallingConfig"]);return i!=null&&d(t,["functionCallingConfig"],AA(i)),t}function HA(e){const t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);const i=u(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const r=u(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=u(e,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),d(t,["functionDeclarations"],h)}const a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],IA(a));const o=u(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],MA(o));const l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);const c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function qA(e){const t={},n=u(e,["retrieval"]);n!=null&&d(t,["retrieval"],n);const i=u(e,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(e,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);const s=u(e,["enterpriseWebSearch"]);s!=null&&d(t,["enterpriseWebSearch"],s);const a=u(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>kA(m))),d(t,["functionDeclarations"],p)}const o=u(e,["googleMaps"]);o!=null&&d(t,["googleMaps"],o);const l=u(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);const c=u(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],c);const h=u(e,["urlContext"]);return h!=null&&d(t,["urlContext"],h),t}function VA(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const r=u(e,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),n}function $A(e,t){const n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const r=u(e,["expireTime"]);return t!==void 0&&r!=null&&d(t,["expireTime"],r),n}function zA(e,t){const n={},i=u(t,["name"]);i!=null&&d(n,["_url","name"],Pn(e,i));const r=u(t,["config"]);return r!=null&&VA(r,n),n}function FA(e,t){const n={},i=u(t,["name"]);i!=null&&d(n,["_url","name"],Pn(e,i));const r=u(t,["config"]);return r!=null&&$A(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JA extends On{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=bA(this.apiClient,t);return o=O("cachedContents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const c=xA(this.apiClient,t);return o=O("cachedContents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async get(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=RA(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const c=NA(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async delete(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=_A(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=TA(h),m=new K0;return Object.assign(m,p),m})}else{const c=wA(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=SA(h),m=new K0;return Object.assign(m,p),m})}}async update(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=FA(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const c=zA(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async listInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=OA(t);return o=O("cachedContents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=jA(h),m=new W0;return Object.assign(m,p),m})}else{const c=LA(t);return o=O("cachedContents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=PA(h),m=new W0;return Object.assign(m,p),m})}}}function fl(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function ip(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(e){return this instanceof X?(this.v=e,this):new X(e)}function Kt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(v){return Promise.resolve(v).then(g,p)}}function o(g,v){i[g]&&(r[g]=function(b){return new Promise(function(_,y){s.push([g,b,_,y])>1||l(g,b)})},v&&(r[g]=v(r[g])))}function l(g,v){try{c(i[g](v))}catch(b){m(s[0][3],b)}}function c(g){g.value instanceof X?Promise.resolve(g.value.v).then(h,p):m(s[0][2],g)}function h(g){l("next",g)}function p(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Wt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ip=="function"?ip(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,l){a=e[s](a),r(o,l,a.done,a.value)})}}function r(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YA(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Gx(n)}function Gx(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function KA(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function rp(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const r=[];let s=!0;for(;i<n&&e[i].role==="model";)r.push(e[i]),s&&!Gx(e[i])&&(s=!1),i++;s?t.push(...r):t.pop()}return t}class WA{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new XA(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class XA{constructor(t,n,i,r={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),KA(s)}async sendMessage(t){var n;await this.sendPromise;const i=tt(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,o;const l=await r,c=(a=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(o=h.slice(p))!==null&&o!==void 0?o:[]);const g=c?[c]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const i=tt(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(t=!1){const n=t?rp(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return Kt(this,arguments,function*(){var r,s,a,o,l,c;const h=[];try{for(var p=!0,m=Wt(t),g;g=yield X(m.next()),r=g.done,!r;p=!0){o=g.value,p=!1;const v=o;if(YA(v)){const b=(c=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;b!==void 0&&h.push(b)}yield yield X(v)}}catch(v){s={error:v}}finally{try{!p&&!r&&(a=m.return)&&(yield X(a.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,h)})}recordHistory(t,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rp(i)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aa extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,aa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QA(e){const t={},n=u(e,["file"]);return n!=null&&d(t,["file"],n),t}function ZA(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function ek(e){const t={},n=u(e,["name"]);return n!=null&&d(t,["_url","file"],Mx(n)),t}function tk(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function nk(e){const t={},n=u(e,["name"]);return n!=null&&d(t,["_url","file"],Mx(n)),t}function ik(e){const t={},n=u(e,["uris"]);return n!=null&&d(t,["uris"],n),t}function rk(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function sk(e){const t={},n=u(e,["config"]);return n!=null&&rk(n,t),t}function ak(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["files"],s)}return t}function ok(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),d(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lk extends On{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=sk(t);return s=O("files",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>{const c=ak(l),h=new uC;return Object.assign(h,c),h})}}async createInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=QA(t);return s=O("upload/v1beta/files",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=ZA(l),h=new cC;return Object.assign(h,c),h})}}async get(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=nk(t);return s=O("files/{file}",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ek(t);return s=O("files/{file}",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>{const c=tk(l),h=new dC;return Object.assign(h,c),h})}}async registerFilesInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ik(t);return s=O("files:register",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=ok(l),h=new fC;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function No(e){const t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function uk(e){const t={},n=u(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ek(s))),d(t,["parts"],r)}const i=u(e,["role"]);return i!=null&&d(t,["role"],i),t}function ck(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function dk(e){const t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);const i=u(e,["args"]);i!=null&&d(t,["args"],i);const r=u(e,["name"]);if(r!=null&&d(t,["name"],r),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function fk(e){const t={},n=u(e,["description"]);n!=null&&d(t,["description"],n);const i=u(e,["name"]);i!=null&&d(t,["name"],i);const r=u(e,["parameters"]);r!=null&&d(t,["parameters"],r);const s=u(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const a=u(e,["response"]);a!=null&&d(t,["response"],a);const o=u(e,["responseJsonSchema"]);if(o!=null&&d(t,["responseJsonSchema"],o),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function hk(e){const t={},n=u(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const i=u(e,["responseJsonSchema"]);i!=null&&d(t,["responseJsonSchema"],i);const r=u(e,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);const s=u(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const a=u(e,["enableAffectiveDialog"]);a!=null&&d(t,["enableAffectiveDialog"],a);const o=u(e,["frequencyPenalty"]);o!=null&&d(t,["frequencyPenalty"],o);const l=u(e,["logprobs"]);l!=null&&d(t,["logprobs"],l);const c=u(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const h=u(e,["mediaResolution"]);h!=null&&d(t,["mediaResolution"],h);const p=u(e,["presencePenalty"]);p!=null&&d(t,["presencePenalty"],p);const m=u(e,["responseLogprobs"]);m!=null&&d(t,["responseLogprobs"],m);const g=u(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);const v=u(e,["responseModalities"]);v!=null&&d(t,["responseModalities"],v);const b=u(e,["responseSchema"]);b!=null&&d(t,["responseSchema"],b);const _=u(e,["routingConfig"]);_!=null&&d(t,["routingConfig"],_);const y=u(e,["seed"]);y!=null&&d(t,["seed"],y);const x=u(e,["speechConfig"]);x!=null&&d(t,["speechConfig"],x);const w=u(e,["stopSequences"]);w!=null&&d(t,["stopSequences"],w);const S=u(e,["temperature"]);S!=null&&d(t,["temperature"],S);const E=u(e,["thinkingConfig"]);E!=null&&d(t,["thinkingConfig"],E);const A=u(e,["topK"]);A!=null&&d(t,["topK"],A);const C=u(e,["topP"]);if(C!=null&&d(t,["topP"],C),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function mk(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function pk(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function gk(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const r=u(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const s=u(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const a=u(e,["topP"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topP"],a);const o=u(e,["topK"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","topK"],o);const l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=u(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Qf(p));const m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=u(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],uk(tt(v)));const b=u(e,["tools"]);if(t!==void 0&&b!=null){let A=rs(b);Array.isArray(A)&&(A=A.map(C=>Ak(is(C)))),d(t,["setup","tools"],A)}const _=u(e,["sessionResumption"]);t!==void 0&&_!=null&&d(t,["setup","sessionResumption"],Ck(_));const y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=u(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const w=u(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&d(t,["setup","realtimeInputConfig"],w);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const E=u(e,["proactivity"]);if(t!==void 0&&E!=null&&d(t,["setup","proactivity"],E),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function vk(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],hk(i));const r=u(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const s=u(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const a=u(e,["topP"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topP"],a);const o=u(e,["topK"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","topK"],o);const l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=u(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Qf(p));const m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=u(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],tt(v));const b=u(e,["tools"]);if(t!==void 0&&b!=null){let C=rs(b);Array.isArray(C)&&(C=C.map(R=>kk(is(R)))),d(t,["setup","tools"],C)}const _=u(e,["sessionResumption"]);t!==void 0&&_!=null&&d(t,["setup","sessionResumption"],_);const y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=u(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const w=u(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&d(t,["setup","realtimeInputConfig"],w);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const E=u(e,["proactivity"]);t!==void 0&&E!=null&&d(t,["setup","proactivity"],E);const A=u(e,["explicitVadSignal"]);return t!==void 0&&A!=null&&d(t,["setup","explicitVadSignal"],A),n}function yk(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["setup","model"],oe(e,i));const r=u(t,["config"]);return r!=null&&d(n,["config"],gk(r,n)),n}function xk(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["setup","model"],oe(e,i));const r=u(t,["config"]);return r!=null&&d(n,["config"],vk(r,n)),n}function bk(e){const t={},n=u(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function wk(e){const t={},n=u(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),d(t,["weightedPrompts"],i)}return t}function _k(e){const t={},n=u(e,["media"]);if(n!=null){let c=Ax(n);Array.isArray(c)&&(c=c.map(h=>No(h))),d(t,["mediaChunks"],c)}const i=u(e,["audio"]);i!=null&&d(t,["audio"],No(Nx(i)));const r=u(e,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const s=u(e,["video"]);s!=null&&d(t,["video"],No(kx(s)));const a=u(e,["text"]);a!=null&&d(t,["text"],a);const o=u(e,["activityStart"]);o!=null&&d(t,["activityStart"],o);const l=u(e,["activityEnd"]);return l!=null&&d(t,["activityEnd"],l),t}function Sk(e){const t={},n=u(e,["media"]);if(n!=null){let c=Ax(n);Array.isArray(c)&&(c=c.map(h=>h)),d(t,["mediaChunks"],c)}const i=u(e,["audio"]);i!=null&&d(t,["audio"],Nx(i));const r=u(e,["audioStreamEnd"]);r!=null&&d(t,["audioStreamEnd"],r);const s=u(e,["video"]);s!=null&&d(t,["video"],kx(s));const a=u(e,["text"]);a!=null&&d(t,["text"],a);const o=u(e,["activityStart"]);o!=null&&d(t,["activityStart"],o);const l=u(e,["activityEnd"]);return l!=null&&d(t,["activityEnd"],l),t}function Tk(e){const t={},n=u(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const i=u(e,["serverContent"]);i!=null&&d(t,["serverContent"],i);const r=u(e,["toolCall"]);r!=null&&d(t,["toolCall"],r);const s=u(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const a=u(e,["usageMetadata"]);a!=null&&d(t,["usageMetadata"],Nk(a));const o=u(e,["goAway"]);o!=null&&d(t,["goAway"],o);const l=u(e,["sessionResumptionUpdate"]);l!=null&&d(t,["sessionResumptionUpdate"],l);const c=u(e,["voiceActivityDetectionSignal"]);c!=null&&d(t,["voiceActivityDetectionSignal"],c);const h=u(e,["voiceActivity"]);return h!=null&&d(t,["voiceActivity"],Rk(h)),t}function Ek(e){const t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const r=u(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const s=u(e,["fileData"]);s!=null&&d(t,["fileData"],ck(s));const a=u(e,["functionCall"]);a!=null&&d(t,["functionCall"],dk(a));const o=u(e,["functionResponse"]);o!=null&&d(t,["functionResponse"],o);const l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],No(l));const c=u(e,["text"]);c!=null&&d(t,["text"],c);const h=u(e,["thought"]);h!=null&&d(t,["thought"],h);const p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const m=u(e,["videoMetadata"]);return m!=null&&d(t,["videoMetadata"],m),t}function Ck(e){const t={},n=u(e,["handle"]);if(n!=null&&d(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Ak(e){const t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);const i=u(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const r=u(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=u(e,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),d(t,["functionDeclarations"],h)}const a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],mk(a));const o=u(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],pk(o));const l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);const c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function kk(e){const t={},n=u(e,["retrieval"]);n!=null&&d(t,["retrieval"],n);const i=u(e,["computerUse"]);if(i!=null&&d(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(e,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);const s=u(e,["enterpriseWebSearch"]);s!=null&&d(t,["enterpriseWebSearch"],s);const a=u(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>fk(m))),d(t,["functionDeclarations"],p)}const o=u(e,["googleMaps"]);o!=null&&d(t,["googleMaps"],o);const l=u(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);const c=u(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],c);const h=u(e,["urlContext"]);return h!=null&&d(t,["urlContext"],h),t}function Nk(e){const t={},n=u(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const i=u(e,["cachedContentTokenCount"]);i!=null&&d(t,["cachedContentTokenCount"],i);const r=u(e,["candidatesTokenCount"]);r!=null&&d(t,["responseTokenCount"],r);const s=u(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const a=u(e,["thoughtsTokenCount"]);a!=null&&d(t,["thoughtsTokenCount"],a);const o=u(e,["totalTokenCount"]);o!=null&&d(t,["totalTokenCount"],o);const l=u(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),d(t,["promptTokensDetails"],g)}const c=u(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),d(t,["cacheTokensDetails"],g)}const h=u(e,["candidatesTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),d(t,["responseTokensDetails"],g)}const p=u(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>v)),d(t,["toolUsePromptTokensDetails"],g)}const m=u(e,["trafficType"]);return m!=null&&d(t,["trafficType"],m),t}function Rk(e){const t={},n=u(e,["type"]);return n!=null&&d(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ik(e,t){const n={},i=u(e,["data"]);if(i!=null&&d(n,["data"],i),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Mk(e,t){const n={},i=u(e,["content"]);i!=null&&d(n,["content"],i);const r=u(e,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],Dk(r));const s=u(e,["tokenCount"]);s!=null&&d(n,["tokenCount"],s);const a=u(e,["finishReason"]);a!=null&&d(n,["finishReason"],a);const o=u(e,["avgLogprobs"]);o!=null&&d(n,["avgLogprobs"],o);const l=u(e,["groundingMetadata"]);l!=null&&d(n,["groundingMetadata"],l);const c=u(e,["index"]);c!=null&&d(n,["index"],c);const h=u(e,["logprobsResult"]);h!=null&&d(n,["logprobsResult"],h);const p=u(e,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>v)),d(n,["safetyRatings"],g)}const m=u(e,["urlContextMetadata"]);return m!=null&&d(n,["urlContextMetadata"],m),n}function Dk(e,t){const n={},i=u(e,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),d(n,["citations"],r)}return n}function Uk(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let a=Bt(s);Array.isArray(a)&&(a=a.map(o=>o)),d(i,["contents"],a)}return i}function Lk(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["tokensInfo"],s)}return n}function Ok(e,t){const n={},i=u(e,["values"]);i!=null&&d(n,["values"],i);const r=u(e,["statistics"]);return r!=null&&d(n,["statistics"],Pk(r)),n}function Pk(e,t){const n={},i=u(e,["truncated"]);i!=null&&d(n,["truncated"],i);const r=u(e,["token_count"]);return r!=null&&d(n,["tokenCount"],r),n}function Vl(e,t){const n={},i=u(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>FN(a))),d(n,["parts"],s)}const r=u(e,["role"]);return r!=null&&d(n,["role"],r),n}function jk(e,t){const n={},i=u(e,["controlType"]);i!=null&&d(n,["controlType"],i);const r=u(e,["enableControlImageComputation"]);return r!=null&&d(n,["computeControl"],r),n}function Gk(e,t){const n={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Bk(e,t,n){const i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],tt(r));const s=u(e,["tools"]);if(t!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Vx(l))),d(t,["tools"],o)}const a=u(e,["generationConfig"]);return t!==void 0&&a!=null&&d(t,["generationConfig"],IN(a)),i}function Hk(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let o=Bt(s);Array.isArray(o)&&(o=o.map(l=>Vl(l))),d(i,["contents"],o)}const a=u(t,["config"]);return a!=null&&Gk(a),i}function qk(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let o=Bt(s);Array.isArray(o)&&(o=o.map(l=>l)),d(i,["contents"],o)}const a=u(t,["config"]);return a!=null&&Bk(a,i),i}function Vk(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["totalTokens"]);r!=null&&d(n,["totalTokens"],r);const s=u(e,["cachedContentTokenCount"]);return s!=null&&d(n,["cachedContentTokenCount"],s),n}function $k(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["totalTokens"]);return r!=null&&d(n,["totalTokens"],r),n}function zk(e,t,n){const i={},r=u(t,["model"]);return r!=null&&d(i,["_url","name"],oe(e,r)),i}function Fk(e,t,n){const i={},r=u(t,["model"]);return r!=null&&d(i,["_url","name"],oe(e,r)),i}function Jk(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function Yk(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function Kk(e,t,n){const i={},r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const s=u(e,["negativePrompt"]);t!==void 0&&s!=null&&d(t,["parameters","negativePrompt"],s);const a=u(e,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);const c=u(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const h=u(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=u(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const g=u(e,["includeRaiReason"]);t!==void 0&&g!=null&&d(t,["parameters","includeRaiReason"],g);const v=u(e,["language"]);t!==void 0&&v!=null&&d(t,["parameters","language"],v);const b=u(e,["outputMimeType"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","mimeType"],b);const _=u(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&d(t,["parameters","outputOptions","compressionQuality"],_);const y=u(e,["addWatermark"]);t!==void 0&&y!=null&&d(t,["parameters","addWatermark"],y);const x=u(e,["labels"]);t!==void 0&&x!=null&&d(t,["labels"],x);const w=u(e,["editMode"]);t!==void 0&&w!=null&&d(t,["parameters","editMode"],w);const S=u(e,["baseSteps"]);return t!==void 0&&S!=null&&d(t,["parameters","editConfig","baseSteps"],S),i}function Wk(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["prompt"]);s!=null&&d(i,["instances[0]","prompt"],s);const a=u(t,["referenceImages"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>QN(c))),d(i,["instances[0]","referenceImages"],l)}const o=u(t,["config"]);return o!=null&&Kk(o,i),i}function Xk(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$l(a))),d(n,["generatedImages"],s)}return n}function Qk(e,t,n){const i={},r=u(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const s=u(e,["title"]);t!==void 0&&s!=null&&d(t,["requests[]","title"],s);const a=u(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&d(t,["requests[]","outputDimensionality"],a),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Zk(e,t,n){const i={},r=u(e,["taskType"]);t!==void 0&&r!=null&&d(t,["instances[]","task_type"],r);const s=u(e,["title"]);t!==void 0&&s!=null&&d(t,["instances[]","title"],s);const a=u(e,["outputDimensionality"]);t!==void 0&&a!=null&&d(t,["parameters","outputDimensionality"],a);const o=u(e,["mimeType"]);t!==void 0&&o!=null&&d(t,["instances[]","mimeType"],o);const l=u(e,["autoTruncate"]);return t!==void 0&&l!=null&&d(t,["parameters","autoTruncate"],l),i}function eN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let l=Kf(e,s);Array.isArray(l)&&(l=l.map(c=>c)),d(i,["requests[]","content"],l)}const a=u(t,["config"]);a!=null&&Qk(a,i);const o=u(t,["model"]);return o!==void 0&&d(i,["requests[]","model"],oe(e,o)),i}function tN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let o=Kf(e,s);Array.isArray(o)&&(o=o.map(l=>l)),d(i,["instances[]","content"],o)}const a=u(t,["config"]);return a!=null&&Zk(a,i),i}function nN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),d(n,["embeddings"],a)}const s=u(e,["metadata"]);return s!=null&&d(n,["metadata"],s),n}function iN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Ok(o))),d(n,["embeddings"],a)}const s=u(e,["metadata"]);return s!=null&&d(n,["metadata"],s),n}function rN(e,t){const n={},i=u(e,["endpoint"]);i!=null&&d(n,["name"],i);const r=u(e,["deployedModelId"]);return r!=null&&d(n,["deployedModelId"],r),n}function sN(e,t){const n={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["fileUri"]);i!=null&&d(n,["fileUri"],i);const r=u(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function aN(e,t){const n={},i=u(e,["id"]);i!=null&&d(n,["id"],i);const r=u(e,["args"]);r!=null&&d(n,["args"],r);const s=u(e,["name"]);if(s!=null&&d(n,["name"],s),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function oN(e,t){const n={},i=u(e,["allowedFunctionNames"]);i!=null&&d(n,["allowedFunctionNames"],i);const r=u(e,["mode"]);if(r!=null&&d(n,["mode"],r),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function lN(e,t){const n={},i=u(e,["description"]);i!=null&&d(n,["description"],i);const r=u(e,["name"]);r!=null&&d(n,["name"],r);const s=u(e,["parameters"]);s!=null&&d(n,["parameters"],s);const a=u(e,["parametersJsonSchema"]);a!=null&&d(n,["parametersJsonSchema"],a);const o=u(e,["response"]);o!=null&&d(n,["response"],o);const l=u(e,["responseJsonSchema"]);if(l!=null&&d(n,["responseJsonSchema"],l),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function uN(e,t,n,i){const r={},s=u(t,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],Vl(tt(s)));const a=u(t,["temperature"]);a!=null&&d(r,["temperature"],a);const o=u(t,["topP"]);o!=null&&d(r,["topP"],o);const l=u(t,["topK"]);l!=null&&d(r,["topK"],l);const c=u(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const h=u(t,["maxOutputTokens"]);h!=null&&d(r,["maxOutputTokens"],h);const p=u(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=u(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const g=u(t,["logprobs"]);g!=null&&d(r,["logprobs"],g);const v=u(t,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const b=u(t,["frequencyPenalty"]);b!=null&&d(r,["frequencyPenalty"],b);const _=u(t,["seed"]);_!=null&&d(r,["seed"],_);const y=u(t,["responseMimeType"]);y!=null&&d(r,["responseMimeType"],y);const x=u(t,["responseSchema"]);x!=null&&d(r,["responseSchema"],Wf(x));const w=u(t,["responseJsonSchema"]);if(w!=null&&d(r,["responseJsonSchema"],w),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(t,["safetySettings"]);if(n!==void 0&&S!=null){let se=S;Array.isArray(se)&&(se=se.map(ye=>ZN(ye))),d(n,["safetySettings"],se)}const E=u(t,["tools"]);if(n!==void 0&&E!=null){let se=rs(E);Array.isArray(se)&&(se=se.map(ye=>a1(is(ye)))),d(n,["tools"],se)}const A=u(t,["toolConfig"]);if(n!==void 0&&A!=null&&d(n,["toolConfig"],s1(A)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=u(t,["cachedContent"]);n!==void 0&&C!=null&&d(n,["cachedContent"],Pn(e,C));const R=u(t,["responseModalities"]);R!=null&&d(r,["responseModalities"],R);const k=u(t,["mediaResolution"]);k!=null&&d(r,["mediaResolution"],k);const M=u(t,["speechConfig"]);if(M!=null&&d(r,["speechConfig"],Xf(M)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=u(t,["thinkingConfig"]);G!=null&&d(r,["thinkingConfig"],G);const Y=u(t,["imageConfig"]);Y!=null&&d(r,["imageConfig"],ON(Y));const q=u(t,["enableEnhancedCivicAnswers"]);if(q!=null&&d(r,["enableEnhancedCivicAnswers"],q),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function cN(e,t,n,i){const r={},s=u(t,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],tt(s));const a=u(t,["temperature"]);a!=null&&d(r,["temperature"],a);const o=u(t,["topP"]);o!=null&&d(r,["topP"],o);const l=u(t,["topK"]);l!=null&&d(r,["topK"],l);const c=u(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const h=u(t,["maxOutputTokens"]);h!=null&&d(r,["maxOutputTokens"],h);const p=u(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=u(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const g=u(t,["logprobs"]);g!=null&&d(r,["logprobs"],g);const v=u(t,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const b=u(t,["frequencyPenalty"]);b!=null&&d(r,["frequencyPenalty"],b);const _=u(t,["seed"]);_!=null&&d(r,["seed"],_);const y=u(t,["responseMimeType"]);y!=null&&d(r,["responseMimeType"],y);const x=u(t,["responseSchema"]);x!=null&&d(r,["responseSchema"],Wf(x));const w=u(t,["responseJsonSchema"]);w!=null&&d(r,["responseJsonSchema"],w);const S=u(t,["routingConfig"]);S!=null&&d(r,["routingConfig"],S);const E=u(t,["modelSelectionConfig"]);E!=null&&d(r,["modelConfig"],E);const A=u(t,["safetySettings"]);if(n!==void 0&&A!=null){let U=A;Array.isArray(U)&&(U=U.map(K=>K)),d(n,["safetySettings"],U)}const C=u(t,["tools"]);if(n!==void 0&&C!=null){let U=rs(C);Array.isArray(U)&&(U=U.map(K=>Vx(is(K)))),d(n,["tools"],U)}const R=u(t,["toolConfig"]);n!==void 0&&R!=null&&d(n,["toolConfig"],R);const k=u(t,["labels"]);n!==void 0&&k!=null&&d(n,["labels"],k);const M=u(t,["cachedContent"]);n!==void 0&&M!=null&&d(n,["cachedContent"],Pn(e,M));const G=u(t,["responseModalities"]);G!=null&&d(r,["responseModalities"],G);const Y=u(t,["mediaResolution"]);Y!=null&&d(r,["mediaResolution"],Y);const q=u(t,["speechConfig"]);q!=null&&d(r,["speechConfig"],Xf(q));const se=u(t,["audioTimestamp"]);se!=null&&d(r,["audioTimestamp"],se);const ye=u(t,["thinkingConfig"]);ye!=null&&d(r,["thinkingConfig"],ye);const D=u(t,["imageConfig"]);if(D!=null&&d(r,["imageConfig"],PN(D)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const H=u(t,["modelArmorConfig"]);return n!==void 0&&H!=null&&d(n,["modelArmorConfig"],H),r}function sp(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let o=Bt(s);Array.isArray(o)&&(o=o.map(l=>Vl(l))),d(i,["contents"],o)}const a=u(t,["config"]);return a!=null&&d(i,["generationConfig"],uN(e,a,i)),i}function ap(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["contents"]);if(s!=null){let o=Bt(s);Array.isArray(o)&&(o=o.map(l=>l)),d(i,["contents"],o)}const a=u(t,["config"]);return a!=null&&d(i,["generationConfig"],cN(e,a,i)),i}function op(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>Mk(h))),d(n,["candidates"],c)}const s=u(e,["modelVersion"]);s!=null&&d(n,["modelVersion"],s);const a=u(e,["promptFeedback"]);a!=null&&d(n,["promptFeedback"],a);const o=u(e,["responseId"]);o!=null&&d(n,["responseId"],o);const l=u(e,["usageMetadata"]);return l!=null&&d(n,["usageMetadata"],l),n}function lp(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>p)),d(n,["candidates"],h)}const s=u(e,["createTime"]);s!=null&&d(n,["createTime"],s);const a=u(e,["modelVersion"]);a!=null&&d(n,["modelVersion"],a);const o=u(e,["promptFeedback"]);o!=null&&d(n,["promptFeedback"],o);const l=u(e,["responseId"]);l!=null&&d(n,["responseId"],l);const c=u(e,["usageMetadata"]);return c!=null&&d(n,["usageMetadata"],c),n}function dN(e,t,n){const i={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const a=u(e,["guidanceScale"]);if(t!==void 0&&a!=null&&d(t,["parameters","guidanceScale"],a),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const l=u(e,["personGeneration"]);t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l);const c=u(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&d(t,["parameters","includeSafetyAttributes"],c);const h=u(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const p=u(e,["language"]);t!==void 0&&p!=null&&d(t,["parameters","language"],p);const m=u(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const g=u(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&d(t,["parameters","outputOptions","compressionQuality"],g),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(e,["imageSize"]);if(t!==void 0&&v!=null&&d(t,["parameters","sampleImageSize"],v),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function fN(e,t,n){const i={},r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const s=u(e,["negativePrompt"]);t!==void 0&&s!=null&&d(t,["parameters","negativePrompt"],s);const a=u(e,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);const c=u(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const h=u(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=u(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const g=u(e,["includeRaiReason"]);t!==void 0&&g!=null&&d(t,["parameters","includeRaiReason"],g);const v=u(e,["language"]);t!==void 0&&v!=null&&d(t,["parameters","language"],v);const b=u(e,["outputMimeType"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","mimeType"],b);const _=u(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&d(t,["parameters","outputOptions","compressionQuality"],_);const y=u(e,["addWatermark"]);t!==void 0&&y!=null&&d(t,["parameters","addWatermark"],y);const x=u(e,["labels"]);t!==void 0&&x!=null&&d(t,["labels"],x);const w=u(e,["imageSize"]);t!==void 0&&w!=null&&d(t,["parameters","sampleImageSize"],w);const S=u(e,["enhancePrompt"]);return t!==void 0&&S!=null&&d(t,["parameters","enhancePrompt"],S),i}function hN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["prompt"]);s!=null&&d(i,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&dN(a,i),i}function mN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["prompt"]);s!=null&&d(i,["instances[0]","prompt"],s);const a=u(t,["config"]);return a!=null&&fN(a,i),i}function pN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>AN(o))),d(n,["generatedImages"],a)}const s=u(e,["positivePromptSafetyAttributes"]);return s!=null&&d(n,["positivePromptSafetyAttributes"],Hx(s)),n}function gN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>$l(o))),d(n,["generatedImages"],a)}const s=u(e,["positivePromptSafetyAttributes"]);return s!=null&&d(n,["positivePromptSafetyAttributes"],qx(s)),n}function vN(e,t,n){const i={},r=u(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(e,["durationSeconds"]);if(t!==void 0&&s!=null&&d(t,["parameters","durationSeconds"],s),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&d(t,["parameters","aspectRatio"],a);const o=u(e,["resolution"]);t!==void 0&&o!=null&&d(t,["parameters","resolution"],o);const l=u(e,["personGeneration"]);if(t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(e,["negativePrompt"]);t!==void 0&&c!=null&&d(t,["parameters","negativePrompt"],c);const h=u(e,["enhancePrompt"]);if(t!==void 0&&h!=null&&d(t,["parameters","enhancePrompt"],h),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=u(e,["lastFrame"]);t!==void 0&&p!=null&&d(t,["instances[0]","lastFrame"],zl(p));const m=u(e,["referenceImages"]);if(t!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>x1(v))),d(t,["instances[0]","referenceImages"],g)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function yN(e,t,n){const i={},r=u(e,["numberOfVideos"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const s=u(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const a=u(e,["fps"]);t!==void 0&&a!=null&&d(t,["parameters","fps"],a);const o=u(e,["durationSeconds"]);t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o);const l=u(e,["seed"]);t!==void 0&&l!=null&&d(t,["parameters","seed"],l);const c=u(e,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);const h=u(e,["resolution"]);t!==void 0&&h!=null&&d(t,["parameters","resolution"],h);const p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=u(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const g=u(e,["negativePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","negativePrompt"],g);const v=u(e,["enhancePrompt"]);t!==void 0&&v!=null&&d(t,["parameters","enhancePrompt"],v);const b=u(e,["generateAudio"]);t!==void 0&&b!=null&&d(t,["parameters","generateAudio"],b);const _=u(e,["lastFrame"]);t!==void 0&&_!=null&&d(t,["instances[0]","lastFrame"],en(_));const y=u(e,["referenceImages"]);if(t!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(E=>b1(E))),d(t,["instances[0]","referenceImages"],S)}const x=u(e,["mask"]);t!==void 0&&x!=null&&d(t,["instances[0]","mask"],y1(x));const w=u(e,["compressionQuality"]);return t!==void 0&&w!=null&&d(t,["parameters","compressionQuality"],w),i}function xN(e,t){const n={},i=u(e,["name"]);i!=null&&d(n,["name"],i);const r=u(e,["metadata"]);r!=null&&d(n,["metadata"],r);const s=u(e,["done"]);s!=null&&d(n,["done"],s);const a=u(e,["error"]);a!=null&&d(n,["error"],a);const o=u(e,["response","generateVideoResponse"]);return o!=null&&d(n,["response"],SN(o)),n}function bN(e,t){const n={},i=u(e,["name"]);i!=null&&d(n,["name"],i);const r=u(e,["metadata"]);r!=null&&d(n,["metadata"],r);const s=u(e,["done"]);s!=null&&d(n,["done"],s);const a=u(e,["error"]);a!=null&&d(n,["error"],a);const o=u(e,["response"]);return o!=null&&d(n,["response"],TN(o)),n}function wN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["prompt"]);s!=null&&d(i,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&d(i,["instances[0]","image"],zl(a));const o=u(t,["video"]);o!=null&&d(i,["instances[0]","video"],$x(o));const l=u(t,["source"]);l!=null&&EN(l,i);const c=u(t,["config"]);return c!=null&&vN(c,i),i}function _N(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["prompt"]);s!=null&&d(i,["instances[0]","prompt"],s);const a=u(t,["image"]);a!=null&&d(i,["instances[0]","image"],en(a));const o=u(t,["video"]);o!=null&&d(i,["instances[0]","video"],zx(o));const l=u(t,["source"]);l!=null&&CN(l,i);const c=u(t,["config"]);return c!=null&&yN(c,i),i}function SN(e,t){const n={},i=u(e,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>NN(o))),d(n,["generatedVideos"],a)}const r=u(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const s=u(e,["raiMediaFilteredReasons"]);return s!=null&&d(n,["raiMediaFilteredReasons"],s),n}function TN(e,t){const n={},i=u(e,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>RN(o))),d(n,["generatedVideos"],a)}const r=u(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const s=u(e,["raiMediaFilteredReasons"]);return s!=null&&d(n,["raiMediaFilteredReasons"],s),n}function EN(e,t,n){const i={},r=u(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const s=u(e,["image"]);t!==void 0&&s!=null&&d(t,["instances[0]","image"],zl(s));const a=u(e,["video"]);return t!==void 0&&a!=null&&d(t,["instances[0]","video"],$x(a)),i}function CN(e,t,n){const i={},r=u(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const s=u(e,["image"]);t!==void 0&&s!=null&&d(t,["instances[0]","image"],en(s));const a=u(e,["video"]);return t!==void 0&&a!=null&&d(t,["instances[0]","video"],zx(a)),i}function AN(e,t){const n={},i=u(e,["_self"]);i!=null&&d(n,["image"],jN(i));const r=u(e,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const s=u(e,["_self"]);return s!=null&&d(n,["safetyAttributes"],Hx(s)),n}function $l(e,t){const n={},i=u(e,["_self"]);i!=null&&d(n,["image"],Bx(i));const r=u(e,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const s=u(e,["_self"]);s!=null&&d(n,["safetyAttributes"],qx(s));const a=u(e,["prompt"]);return a!=null&&d(n,["enhancedPrompt"],a),n}function kN(e,t){const n={},i=u(e,["_self"]);i!=null&&d(n,["mask"],Bx(i));const r=u(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["labels"],s)}return n}function NN(e,t){const n={},i=u(e,["video"]);return i!=null&&d(n,["video"],g1(i)),n}function RN(e,t){const n={},i=u(e,["_self"]);return i!=null&&d(n,["video"],v1(i)),n}function IN(e,t){const n={},i=u(e,["modelSelectionConfig"]);i!=null&&d(n,["modelConfig"],i);const r=u(e,["responseJsonSchema"]);r!=null&&d(n,["responseJsonSchema"],r);const s=u(e,["audioTimestamp"]);s!=null&&d(n,["audioTimestamp"],s);const a=u(e,["candidateCount"]);a!=null&&d(n,["candidateCount"],a);const o=u(e,["enableAffectiveDialog"]);o!=null&&d(n,["enableAffectiveDialog"],o);const l=u(e,["frequencyPenalty"]);l!=null&&d(n,["frequencyPenalty"],l);const c=u(e,["logprobs"]);c!=null&&d(n,["logprobs"],c);const h=u(e,["maxOutputTokens"]);h!=null&&d(n,["maxOutputTokens"],h);const p=u(e,["mediaResolution"]);p!=null&&d(n,["mediaResolution"],p);const m=u(e,["presencePenalty"]);m!=null&&d(n,["presencePenalty"],m);const g=u(e,["responseLogprobs"]);g!=null&&d(n,["responseLogprobs"],g);const v=u(e,["responseMimeType"]);v!=null&&d(n,["responseMimeType"],v);const b=u(e,["responseModalities"]);b!=null&&d(n,["responseModalities"],b);const _=u(e,["responseSchema"]);_!=null&&d(n,["responseSchema"],_);const y=u(e,["routingConfig"]);y!=null&&d(n,["routingConfig"],y);const x=u(e,["seed"]);x!=null&&d(n,["seed"],x);const w=u(e,["speechConfig"]);w!=null&&d(n,["speechConfig"],w);const S=u(e,["stopSequences"]);S!=null&&d(n,["stopSequences"],S);const E=u(e,["temperature"]);E!=null&&d(n,["temperature"],E);const A=u(e,["thinkingConfig"]);A!=null&&d(n,["thinkingConfig"],A);const C=u(e,["topK"]);C!=null&&d(n,["topK"],C);const R=u(e,["topP"]);if(R!=null&&d(n,["topP"],R),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function MN(e,t,n){const i={},r=u(t,["model"]);return r!=null&&d(i,["_url","name"],oe(e,r)),i}function DN(e,t,n){const i={},r=u(t,["model"]);return r!=null&&d(i,["_url","name"],oe(e,r)),i}function UN(e,t){const n={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=u(e,["enableWidget"]);return i!=null&&d(n,["enableWidget"],i),n}function LN(e,t){const n={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=u(e,["timeRangeFilter"]);return i!=null&&d(n,["timeRangeFilter"],i),n}function ON(e,t){const n={},i=u(e,["aspectRatio"]);i!=null&&d(n,["aspectRatio"],i);const r=u(e,["imageSize"]);if(r!=null&&d(n,["imageSize"],r),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function PN(e,t){const n={},i=u(e,["aspectRatio"]);i!=null&&d(n,["aspectRatio"],i);const r=u(e,["imageSize"]);r!=null&&d(n,["imageSize"],r);const s=u(e,["personGeneration"]);s!=null&&d(n,["personGeneration"],s);const a=u(e,["outputMimeType"]);a!=null&&d(n,["imageOutputOptions","mimeType"],a);const o=u(e,["outputCompressionQuality"]);return o!=null&&d(n,["imageOutputOptions","compressionQuality"],o),n}function jN(e,t){const n={},i=u(e,["bytesBase64Encoded"]);i!=null&&d(n,["imageBytes"],gi(i));const r=u(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Bx(e,t){const n={},i=u(e,["gcsUri"]);i!=null&&d(n,["gcsUri"],i);const r=u(e,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],gi(r));const s=u(e,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function zl(e,t){const n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=u(e,["imageBytes"]);i!=null&&d(n,["bytesBase64Encoded"],gi(i));const r=u(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function en(e,t){const n={},i=u(e,["gcsUri"]);i!=null&&d(n,["gcsUri"],i);const r=u(e,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],gi(r));const s=u(e,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function GN(e,t,n,i){const r={},s=u(t,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const a=u(t,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const o=u(t,["filter"]);n!==void 0&&o!=null&&d(n,["_query","filter"],o);const l=u(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Dx(e,l)),r}function BN(e,t,n,i){const r={},s=u(t,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const a=u(t,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const o=u(t,["filter"]);n!==void 0&&o!=null&&d(n,["_query","filter"],o);const l=u(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Dx(e,l)),r}function HN(e,t,n){const i={},r=u(t,["config"]);return r!=null&&GN(e,r,i),i}function qN(e,t,n){const i={},r=u(t,["config"]);return r!=null&&BN(e,r,i),i}function VN(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const s=u(e,["_self"]);if(s!=null){let a=Ux(s);Array.isArray(a)&&(a=a.map(o=>fd(o))),d(n,["models"],a)}return n}function $N(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const s=u(e,["_self"]);if(s!=null){let a=Ux(s);Array.isArray(a)&&(a=a.map(o=>hd(o))),d(n,["models"],a)}return n}function zN(e,t){const n={},i=u(e,["maskMode"]);i!=null&&d(n,["maskMode"],i);const r=u(e,["segmentationClasses"]);r!=null&&d(n,["maskClasses"],r);const s=u(e,["maskDilation"]);return s!=null&&d(n,["dilation"],s),n}function fd(e,t){const n={},i=u(e,["name"]);i!=null&&d(n,["name"],i);const r=u(e,["displayName"]);r!=null&&d(n,["displayName"],r);const s=u(e,["description"]);s!=null&&d(n,["description"],s);const a=u(e,["version"]);a!=null&&d(n,["version"],a);const o=u(e,["_self"]);o!=null&&d(n,["tunedModelInfo"],o1(o));const l=u(e,["inputTokenLimit"]);l!=null&&d(n,["inputTokenLimit"],l);const c=u(e,["outputTokenLimit"]);c!=null&&d(n,["outputTokenLimit"],c);const h=u(e,["supportedGenerationMethods"]);h!=null&&d(n,["supportedActions"],h);const p=u(e,["temperature"]);p!=null&&d(n,["temperature"],p);const m=u(e,["maxTemperature"]);m!=null&&d(n,["maxTemperature"],m);const g=u(e,["topP"]);g!=null&&d(n,["topP"],g);const v=u(e,["topK"]);v!=null&&d(n,["topK"],v);const b=u(e,["thinking"]);return b!=null&&d(n,["thinking"],b),n}function hd(e,t){const n={},i=u(e,["name"]);i!=null&&d(n,["name"],i);const r=u(e,["displayName"]);r!=null&&d(n,["displayName"],r);const s=u(e,["description"]);s!=null&&d(n,["description"],s);const a=u(e,["versionId"]);a!=null&&d(n,["version"],a);const o=u(e,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>rN(g))),d(n,["endpoints"],m)}const l=u(e,["labels"]);l!=null&&d(n,["labels"],l);const c=u(e,["_self"]);c!=null&&d(n,["tunedModelInfo"],l1(c));const h=u(e,["defaultCheckpointId"]);h!=null&&d(n,["defaultCheckpointId"],h);const p=u(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),d(n,["checkpoints"],m)}return n}function FN(e,t){const n={},i=u(e,["mediaResolution"]);i!=null&&d(n,["mediaResolution"],i);const r=u(e,["codeExecutionResult"]);r!=null&&d(n,["codeExecutionResult"],r);const s=u(e,["executableCode"]);s!=null&&d(n,["executableCode"],s);const a=u(e,["fileData"]);a!=null&&d(n,["fileData"],sN(a));const o=u(e,["functionCall"]);o!=null&&d(n,["functionCall"],aN(o));const l=u(e,["functionResponse"]);l!=null&&d(n,["functionResponse"],l);const c=u(e,["inlineData"]);c!=null&&d(n,["inlineData"],Ik(c));const h=u(e,["text"]);h!=null&&d(n,["text"],h);const p=u(e,["thought"]);p!=null&&d(n,["thought"],p);const m=u(e,["thoughtSignature"]);m!=null&&d(n,["thoughtSignature"],m);const g=u(e,["videoMetadata"]);return g!=null&&d(n,["videoMetadata"],g),n}function JN(e,t){const n={},i=u(e,["productImage"]);return i!=null&&d(n,["image"],en(i)),n}function YN(e,t,n){const i={},r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const s=u(e,["baseSteps"]);t!==void 0&&s!=null&&d(t,["parameters","baseSteps"],s);const a=u(e,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const o=u(e,["seed"]);t!==void 0&&o!=null&&d(t,["parameters","seed"],o);const l=u(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&d(t,["parameters","safetySetting"],l);const c=u(e,["personGeneration"]);t!==void 0&&c!=null&&d(t,["parameters","personGeneration"],c);const h=u(e,["addWatermark"]);t!==void 0&&h!=null&&d(t,["parameters","addWatermark"],h);const p=u(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const m=u(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m);const g=u(e,["enhancePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g);const v=u(e,["labels"]);return t!==void 0&&v!=null&&d(t,["labels"],v),i}function KN(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["source"]);s!=null&&XN(s,i);const a=u(t,["config"]);return a!=null&&YN(a,i),i}function WN(e,t){const n={},i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>$l(s))),d(n,["generatedImages"],r)}return n}function XN(e,t,n){const i={},r=u(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const s=u(e,["personImage"]);t!==void 0&&s!=null&&d(t,["instances[0]","personImage","image"],en(s));const a=u(e,["productImages"]);if(t!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>JN(l))),d(t,["instances[0]","productImages"],o)}return i}function QN(e,t){const n={},i=u(e,["referenceImage"]);i!=null&&d(n,["referenceImage"],en(i));const r=u(e,["referenceId"]);r!=null&&d(n,["referenceId"],r);const s=u(e,["referenceType"]);s!=null&&d(n,["referenceType"],s);const a=u(e,["maskImageConfig"]);a!=null&&d(n,["maskImageConfig"],zN(a));const o=u(e,["controlImageConfig"]);o!=null&&d(n,["controlImageConfig"],jk(o));const l=u(e,["styleImageConfig"]);l!=null&&d(n,["styleImageConfig"],l);const c=u(e,["subjectImageConfig"]);return c!=null&&d(n,["subjectImageConfig"],c),n}function Hx(e,t){const n={},i=u(e,["safetyAttributes","categories"]);i!=null&&d(n,["categories"],i);const r=u(e,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const s=u(e,["contentType"]);return s!=null&&d(n,["contentType"],s),n}function qx(e,t){const n={},i=u(e,["safetyAttributes","categories"]);i!=null&&d(n,["categories"],i);const r=u(e,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const s=u(e,["contentType"]);return s!=null&&d(n,["contentType"],s),n}function ZN(e,t){const n={},i=u(e,["category"]);if(i!=null&&d(n,["category"],i),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(e,["threshold"]);return r!=null&&d(n,["threshold"],r),n}function e1(e,t){const n={},i=u(e,["image"]);return i!=null&&d(n,["image"],en(i)),n}function t1(e,t,n){const i={},r=u(e,["mode"]);t!==void 0&&r!=null&&d(t,["parameters","mode"],r);const s=u(e,["maxPredictions"]);t!==void 0&&s!=null&&d(t,["parameters","maxPredictions"],s);const a=u(e,["confidenceThreshold"]);t!==void 0&&a!=null&&d(t,["parameters","confidenceThreshold"],a);const o=u(e,["maskDilation"]);t!==void 0&&o!=null&&d(t,["parameters","maskDilation"],o);const l=u(e,["binaryColorThreshold"]);t!==void 0&&l!=null&&d(t,["parameters","binaryColorThreshold"],l);const c=u(e,["labels"]);return t!==void 0&&c!=null&&d(t,["labels"],c),i}function n1(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["source"]);s!=null&&r1(s,i);const a=u(t,["config"]);return a!=null&&t1(a,i),i}function i1(e,t){const n={},i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>kN(s))),d(n,["generatedMasks"],r)}return n}function r1(e,t,n){const i={},r=u(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const s=u(e,["image"]);t!==void 0&&s!=null&&d(t,["instances[0]","image"],en(s));const a=u(e,["scribbleImage"]);return t!==void 0&&a!=null&&d(t,["instances[0]","scribble"],e1(a)),i}function s1(e,t){const n={},i=u(e,["retrievalConfig"]);i!=null&&d(n,["retrievalConfig"],i);const r=u(e,["functionCallingConfig"]);return r!=null&&d(n,["functionCallingConfig"],oN(r)),n}function a1(e,t){const n={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(e,["computerUse"]);i!=null&&d(n,["computerUse"],i);const r=u(e,["fileSearch"]);r!=null&&d(n,["fileSearch"],r);const s=u(e,["codeExecution"]);if(s!=null&&d(n,["codeExecution"],s),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(e,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>m)),d(n,["functionDeclarations"],p)}const o=u(e,["googleMaps"]);o!=null&&d(n,["googleMaps"],UN(o));const l=u(e,["googleSearch"]);l!=null&&d(n,["googleSearch"],LN(l));const c=u(e,["googleSearchRetrieval"]);c!=null&&d(n,["googleSearchRetrieval"],c);const h=u(e,["urlContext"]);return h!=null&&d(n,["urlContext"],h),n}function Vx(e,t){const n={},i=u(e,["retrieval"]);i!=null&&d(n,["retrieval"],i);const r=u(e,["computerUse"]);if(r!=null&&d(n,["computerUse"],r),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(e,["codeExecution"]);s!=null&&d(n,["codeExecution"],s);const a=u(e,["enterpriseWebSearch"]);a!=null&&d(n,["enterpriseWebSearch"],a);const o=u(e,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>lN(g))),d(n,["functionDeclarations"],m)}const l=u(e,["googleMaps"]);l!=null&&d(n,["googleMaps"],l);const c=u(e,["googleSearch"]);c!=null&&d(n,["googleSearch"],c);const h=u(e,["googleSearchRetrieval"]);h!=null&&d(n,["googleSearchRetrieval"],h);const p=u(e,["urlContext"]);return p!=null&&d(n,["urlContext"],p),n}function o1(e,t){const n={},i=u(e,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=u(e,["createTime"]);r!=null&&d(n,["createTime"],r);const s=u(e,["updateTime"]);return s!=null&&d(n,["updateTime"],s),n}function l1(e,t){const n={},i=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&d(n,["baseModel"],i);const r=u(e,["createTime"]);r!=null&&d(n,["createTime"],r);const s=u(e,["updateTime"]);return s!=null&&d(n,["updateTime"],s),n}function u1(e,t,n){const i={},r=u(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const s=u(e,["description"]);t!==void 0&&s!=null&&d(t,["description"],s);const a=u(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&d(t,["defaultCheckpointId"],a),i}function c1(e,t,n){const i={},r=u(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const s=u(e,["description"]);t!==void 0&&s!=null&&d(t,["description"],s);const a=u(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&d(t,["defaultCheckpointId"],a),i}function d1(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","name"],oe(e,r));const s=u(t,["config"]);return s!=null&&u1(s,i),i}function f1(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["config"]);return s!=null&&c1(s,i),i}function h1(e,t,n){const i={},r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const s=u(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&d(t,["parameters","safetySetting"],s);const a=u(e,["personGeneration"]);t!==void 0&&a!=null&&d(t,["parameters","personGeneration"],a);const o=u(e,["includeRaiReason"]);t!==void 0&&o!=null&&d(t,["parameters","includeRaiReason"],o);const l=u(e,["outputMimeType"]);t!==void 0&&l!=null&&d(t,["parameters","outputOptions","mimeType"],l);const c=u(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&d(t,["parameters","outputOptions","compressionQuality"],c);const h=u(e,["enhanceInputImage"]);t!==void 0&&h!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],h);const p=u(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=u(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const g=u(e,["numberOfImages"]);t!==void 0&&g!=null&&d(t,["parameters","sampleCount"],g);const v=u(e,["mode"]);return t!==void 0&&v!=null&&d(t,["parameters","mode"],v),i}function m1(e,t,n){const i={},r=u(t,["model"]);r!=null&&d(i,["_url","model"],oe(e,r));const s=u(t,["image"]);s!=null&&d(i,["instances[0]","image"],en(s));const a=u(t,["upscaleFactor"]);a!=null&&d(i,["parameters","upscaleConfig","upscaleFactor"],a);const o=u(t,["config"]);return o!=null&&h1(o,i),i}function p1(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$l(a))),d(n,["generatedImages"],s)}return n}function g1(e,t){const n={},i=u(e,["uri"]);i!=null&&d(n,["uri"],i);const r=u(e,["encodedVideo"]);r!=null&&d(n,["videoBytes"],gi(r));const s=u(e,["encoding"]);return s!=null&&d(n,["mimeType"],s),n}function v1(e,t){const n={},i=u(e,["gcsUri"]);i!=null&&d(n,["uri"],i);const r=u(e,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],gi(r));const s=u(e,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function y1(e,t){const n={},i=u(e,["image"]);i!=null&&d(n,["_self"],en(i));const r=u(e,["maskMode"]);return r!=null&&d(n,["maskMode"],r),n}function x1(e,t){const n={},i=u(e,["image"]);i!=null&&d(n,["image"],zl(i));const r=u(e,["referenceType"]);return r!=null&&d(n,["referenceType"],r),n}function b1(e,t){const n={},i=u(e,["image"]);i!=null&&d(n,["image"],en(i));const r=u(e,["referenceType"]);return r!=null&&d(n,["referenceType"],r),n}function $x(e,t){const n={},i=u(e,["uri"]);i!=null&&d(n,["uri"],i);const r=u(e,["videoBytes"]);r!=null&&d(n,["encodedVideo"],gi(r));const s=u(e,["mimeType"]);return s!=null&&d(n,["encoding"],s),n}function zx(e,t){const n={},i=u(e,["uri"]);i!=null&&d(n,["gcsUri"],i);const r=u(e,["videoBytes"]);r!=null&&d(n,["bytesBase64Encoded"],gi(r));const s=u(e,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(e,t){const n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&d(t,["displayName"],i),n}function _1(e){const t={},n=u(e,["config"]);return n!=null&&w1(n,t),t}function S1(e,t){const n={},i=u(e,["force"]);return t!==void 0&&i!=null&&d(t,["_query","force"],i),n}function T1(e){const t={},n=u(e,["name"]);n!=null&&d(t,["_url","name"],n);const i=u(e,["config"]);return i!=null&&S1(i,t),t}function E1(e){const t={},n=u(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function C1(e,t){const n={},i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["customMetadata"],s)}const r=u(e,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),n}function A1(e){const t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);const i=u(e,["metadata"]);i!=null&&d(t,["metadata"],i);const r=u(e,["done"]);r!=null&&d(t,["done"],r);const s=u(e,["error"]);s!=null&&d(t,["error"],s);const a=u(e,["response"]);return a!=null&&d(t,["response"],N1(a)),t}function k1(e){const t={},n=u(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const i=u(e,["fileName"]);i!=null&&d(t,["fileName"],i);const r=u(e,["config"]);return r!=null&&C1(r,t),t}function N1(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["parent"]);i!=null&&d(t,["parent"],i);const r=u(e,["documentName"]);return r!=null&&d(t,["documentName"],r),t}function R1(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function I1(e){const t={},n=u(e,["config"]);return n!=null&&R1(n,t),t}function M1(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["fileSearchStores"],s)}return t}function Fx(e,t){const n={},i=u(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["mimeType"],i);const r=u(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const s=u(e,["customMetadata"]);if(t!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),d(t,["customMetadata"],o)}const a=u(e,["chunkingConfig"]);return t!==void 0&&a!=null&&d(t,["chunkingConfig"],a),n}function D1(e){const t={},n=u(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const i=u(e,["config"]);return i!=null&&Fx(i,t),t}function U1(e){const t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L1="Content-Type",O1="X-Server-Timeout",P1="User-Agent",md="x-goog-api-client",j1="1.39.0",G1=`google-genai-sdk/${j1}`,B1="v1beta1",H1="v1beta";class q1{constructor(t){var n,i,r;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const o=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!o?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:B1}else{if(!this.clientOptions.apiKey)throw new aa({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:H1,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===ld.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[a,o]of Object.entries(t.queryParams))r.searchParams.append(a,String(o));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),t.abortSignal),this.unaryApiCall(r,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),t.abortSignal),this.streamApiCall(r,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>s.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),t.signal=a}return n&&n.extraBody!==null&&V1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await up(r),new ud(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await up(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Kt(this,arguments,function*(){var i;const r=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const o="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:h}=yield X(r.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=s.decode(h,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const b=JSON.parse(JSON.stringify(v.error)),_=b.status,y=b.code,x=`got status: ${_}. ${JSON.stringify(v)}`;if(y>=400&&y<600)throw new aa({message:x,status:y})}}catch(v){if(v.name==="ApiError")throw v}a+=p;let m=-1,g=0;for(;;){m=-1,g=0;for(const _ of l){const y=a.indexOf(_);y!==-1&&(m===-1||y<m)&&(m=y,g=_.length)}if(m===-1)break;const v=a.substring(0,m);a=a.substring(m+g);const b=v.trim();if(b.startsWith(o)){const _=b.substring(o.length).trim();try{const y=new Response(_,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield X(new ud(y))}catch(y){throw new Error(`exception parsing stream chunk ${_}. ${y}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=G1+" "+this.clientOptions.userAgentExtra;return t[P1]=n,t[md]=n,t[L1]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[r,s]of Object.entries(t.headers))i.append(r,s);t.timeout&&t.timeout>0&&i.append(O1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(t);r.sizeBytes=String(a.size);const o=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=o;const l={file:r},c=this.getFileName(t),h=O("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(h,r.sizeBytes,r.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var r;const s=this.clientOptions.uploader,a=await s.stat(n),o=String(a.size),l=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,h=this.getFileName(n),p={};i!=null&&Fx(i,p);const m=await this.fetchUploadUrl(c,o,l,h,p,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,r,s,a){var o;let l={};a?l=a:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(o=c==null?void 0:c.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function up(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new aa({message:r,status:n}):new Error(r)}}function V1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const o=Object.assign({},s);for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=a[l],h=o[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?o[l]=i(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),o[l]=c)}return o}const r=i(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $1="mcp_used/unknown";let z1=!1;function Jx(e){for(const t of e)if(F1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return z1}function Yx(e){var t;const n=(t=e[md])!==null&&t!==void 0?t:"";e[md]=(n+` ${$1}`).trimStart()}function F1(e){return e!==null&&typeof e=="object"&&e instanceof Zf}function J1(e){return Kt(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){const a=yield X(n.listTools({cursor:r}));for(const o of a.tools)yield yield X(o),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class Zf{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Zf(t,n)}async initialize(){var t,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const h of this.mcpClients)try{for(var o=!0,l=(n=void 0,Wt(J1(h))),c;c=await l.next(),t=c.done,!t;o=!0){r=c.value,o=!1;const p=r;a.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!o&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),_C(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Y1(e,t,n){const i=new mC;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),t(i)}class K1{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Q1(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let c=()=>{};const h=new Promise(w=>{c=w}),p=t.callbacks,m=function(){c({})},g=this.apiClient,v={onopen:m,onmessage:w=>{Y1(g,p.onmessage,w)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(w){}},b=this.webSocketFactory.create(l,X1(a),v);b.connect(),await h;const x={setup:{model:oe(this.apiClient,t.model)}};return b.send(JSON.stringify(x)),new W1(b,this.apiClient)}}class W1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=wk(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=bk(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(wr.PLAY)}pause(){this.sendPlaybackControl(wr.PAUSE)}stop(){this.sendPlaybackControl(wr.STOP)}resetContext(){this.sendPlaybackControl(wr.RESET_CONTEXT)}close(){this.conn.close()}}function X1(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Q1(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eR(e,t,n){const i=new hC;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(e.isVertexAI()){const a=Tk(s);Object.assign(i,a)}else Object.assign(i,s);t(i)}class tR{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new K1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,r,s,a,o;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Jx(t.config.tools)&&Yx(p);const m=sR(p);if(this.apiClient.isVertexAI()){const k=this.apiClient.getProject(),M=this.apiClient.getLocation(),G=this.apiClient.getApiKey(),Y=!!k&&!!M||!!G;this.apiClient.getCustomBaseUrl()&&!Y?h=l:(h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h))}else{const k=this.apiClient.getApiKey();let M="BidiGenerateContent",G="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",G="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${G}=${k}`}let g=()=>{};const v=new Promise(k=>{g=k}),b=t.callbacks,_=function(){var k;(k=b==null?void 0:b.onopen)===null||k===void 0||k.call(b),g({})},y=this.apiClient,x={onopen:_,onmessage:k=>{eR(y,b.onmessage,k)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(k){}},w=this.webSocketFactory.create(h,rR(m),x);w.connect(),await v;let S=oe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const k=this.apiClient.getProject(),M=this.apiClient.getLocation();k&&M&&(S=`projects/${k}/locations/${M}/`+S)}let E={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ul.AUDIO]}:t.config.responseModalities=[ul.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const A=(o=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&o!==void 0?o:[],C=[];for(const k of A)if(this.isCallableTool(k)){const M=k;C.push(await M.tool())}else C.push(k);C.length>0&&(t.config.tools=C);const R={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?E=xk(this.apiClient,R):E=yk(this.apiClient,R),delete E.config,w.send(JSON.stringify(E)),new iR(w,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const nR={turnComplete:!0};class iR{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Bt(n.turns),t.isVertexAI()||(i=i.map(r=>Vl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(Z1)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},nR),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Sk(t)}:n={realtimeInput:_k(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function rR(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function sR(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cp=10;function dp(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const a of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Mr(a)){r=!0;break}if(!r)return!0;const s=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Mr(e){return"callTool"in e&&typeof e.callTool=="function"}function aR(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>Mr(r)))!==null&&i!==void 0?i:!1}function fp(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,r)=>{if(Mr(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function hp(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oR extends On{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,r,s,a,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!aR(n)||dp(n.config))return await this.generateContentInternal(l);const c=fp(n);if(c.length>0){const b=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let h,p;const m=Bt(l.contents),g=(s=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:cp;let v=0;for(;v<g&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const b=h.candidates[0].content,_=[];for(const y of(o=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&o!==void 0?o:[])if(Mr(y)){const w=await y.callTool(h.functionCalls);_.push(...w)}v++,p={role:"user",parts:_},l.contents=Bt(l.contents),l.contents.push(b),l.contents.push(p),hp(l.config)&&(m.push(b),m.push(p))}return hp(l.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var i,r,s,a,o;if(this.maybeMoveToResponseJsonSchem(n),dp(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=fp(n);if(l.length>0){const p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,h=(o=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||o===void 0?void 0:o.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:a.push(l);let o;return s?o={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:o={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},o}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ji(Un.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,o,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,r;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const a=await Promise.all(s.map(async l=>Mr(l)?await l.tool():l)),o={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(o.config.tools=a,t.config&&t.config.tools&&Jx(t.config.tools)){const l=(r=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Yx(c),o.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return o}async initAfcToolsMap(t){var n,i,r;const s=new Map;for(const a of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Mr(a)){const o=a,l=await o.tool();for(const c of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,o)}}return s}async processAfcStream(t){var n,i,r;const s=(r=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:cp;let a=!1,o=0;const l=await this.initAfcToolsMap(t);return function(c,h,p){return Kt(this,arguments,function*(){for(var m,g,v,b,_,y;o<s;){a&&(o++,a=!1);const E=yield X(c.processParamsMaybeAddMcpUsage(p)),A=yield X(c.generateContentStreamInternal(E)),C=[],R=[];try{for(var x=!0,w=(g=void 0,Wt(A)),S;S=yield X(w.next()),m=S.done,!m;x=!0){b=S.value,x=!1;const k=b;if(yield yield X(k),k.candidates&&(!((_=k.candidates[0])===null||_===void 0)&&_.content)){R.push(k.candidates[0].content);for(const M of(y=k.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(o<s&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(M.functionCall.name)){const G=yield X(h.get(M.functionCall.name).callTool([M.functionCall]));C.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(k){g={error:k}}finally{try{!x&&!m&&(v=w.return)&&(yield X(v.call(w)))}finally{if(g)throw g.error}}if(C.length>0){a=!0;const k=new ps;k.candidates=[{content:{role:"user",parts:C}}],yield yield X(k);const M=[];M.push(...R),M.push({role:"user",parts:C});const G=Bt(p.contents).concat(M);p.contents=G}else break}})}(this,l,t)}async generateContentInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=ap(this.apiClient,t);return o=O("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=lp(h),m=new ps;return Object.assign(m,p),m})}else{const c=sp(this.apiClient,t);return o=O("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=op(h),m=new ps;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=ap(this.apiClient,t);return o=O("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return Kt(this,arguments,function*(){var m,g,v,b;try{for(var _=!0,y=Wt(p),x;x=yield X(y.next()),m=x.done,!m;_=!0){b=x.value,_=!1;const w=b,S=lp(yield X(w.json()),t);S.sdkHttpResponse={headers:w.headers};const E=new ps;Object.assign(E,S),yield yield X(E)}}catch(w){g={error:w}}finally{try{!_&&!m&&(v=y.return)&&(yield X(v.call(y)))}finally{if(g)throw g.error}}})})}else{const c=sp(this.apiClient,t);return o=O("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return Kt(this,arguments,function*(){var m,g,v,b;try{for(var _=!0,y=Wt(p),x;x=yield X(y.next()),m=x.done,!m;_=!0){b=x.value,_=!1;const w=b,S=op(yield X(w.json()),t);S.sdkHttpResponse={headers:w.headers};const E=new ps;Object.assign(E,S),yield yield X(E)}}catch(w){g={error:w}}finally{try{!_&&!m&&(v=y.return)&&(yield X(v.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=tN(this.apiClient,t);return o=O("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=iN(h),m=new q0;return Object.assign(m,p),m})}else{const c=eN(this.apiClient,t);return o=O("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=nN(h),m=new q0;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=mN(this.apiClient,t);return o=O("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=gN(h),m=new V0;return Object.assign(m,p),m})}else{const c=hN(this.apiClient,t);return o=O("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=pN(h),m=new V0;return Object.assign(m,p),m})}}async editImageInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=Wk(this.apiClient,t);return s=O("{model}:predict",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>{const c=Xk(l),h=new tC;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=m1(this.apiClient,t);return s=O("{model}:predict",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>{const c=p1(l),h=new nC;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=KN(this.apiClient,t);return s=O("{model}:predict",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=WN(l),h=new iC;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=n1(this.apiClient,t);return s=O("{model}:predict",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=i1(l),h=new rC;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=DN(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>hd(h))}else{const c=MN(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>fd(h))}}async listInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=qN(this.apiClient,t);return o=O("{models_url}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=$N(h),m=new $0;return Object.assign(m,p),m})}else{const c=HN(this.apiClient,t);return o=O("{models_url}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=VN(h),m=new $0;return Object.assign(m,p),m})}}async update(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=f1(this.apiClient,t);return o=O("{model}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>hd(h))}else{const c=d1(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>fd(h))}}async delete(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=Fk(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=Yk(h),m=new z0;return Object.assign(m,p),m})}else{const c=zk(this.apiClient,t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=Jk(h),m=new z0;return Object.assign(m,p),m})}}async countTokens(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=qk(this.apiClient,t);return o=O("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=$k(h),m=new F0;return Object.assign(m,p),m})}else{const c=Hk(this.apiClient,t);return o=O("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=Vk(h),m=new F0;return Object.assign(m,p),m})}}async computeTokens(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=Uk(this.apiClient,t);return s=O("{model}:computeTokens",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>{const c=Lk(l),h=new sC;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=_N(this.apiClient,t);return o=O("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>{const p=bN(h),m=new cl;return Object.assign(m,p),m})}else{const c=wN(this.apiClient,t);return o=O("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>{const p=xN(h),m=new cl;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lR extends On{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=KE(t);return o=O("{operationName}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a}else{const c=YE(t);return o=O("{operationName}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a}}async fetchPredictVideosOperationInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=HE(t);return s=O("{resourceName}:fetchPredictOperation",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uR(e){const t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function cR(e){const t={},n=u(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>xR(s))),d(t,["parts"],r)}const i=u(e,["role"]);return i!=null&&d(t,["role"],i),t}function dR(e,t,n){const i={},r=u(t,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const s=u(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const a=u(t,["uses"]);n!==void 0&&a!=null&&d(n,["uses"],a);const o=u(t,["liveConnectConstraints"]);n!==void 0&&o!=null&&d(n,["bidiGenerateContentSetup"],yR(e,o));const l=u(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),i}function fR(e,t){const n={},i=u(t,["config"]);return i!=null&&d(n,["config"],dR(e,i,n)),n}function hR(e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=u(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function mR(e){const t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);const i=u(e,["args"]);i!=null&&d(t,["args"],i);const r=u(e,["name"]);if(r!=null&&d(t,["name"],r),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function pR(e){const t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function gR(e){const t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function vR(e,t){const n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const r=u(e,["responseModalities"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","responseModalities"],r);const s=u(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const a=u(e,["topP"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topP"],a);const o=u(e,["topK"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","topK"],o);const l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=u(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Qf(p));const m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=u(e,["systemInstruction"]);t!==void 0&&v!=null&&d(t,["setup","systemInstruction"],cR(tt(v)));const b=u(e,["tools"]);if(t!==void 0&&b!=null){let A=rs(b);Array.isArray(A)&&(A=A.map(C=>wR(is(C)))),d(t,["setup","tools"],A)}const _=u(e,["sessionResumption"]);t!==void 0&&_!=null&&d(t,["setup","sessionResumption"],bR(_));const y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=u(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const w=u(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&d(t,["setup","realtimeInputConfig"],w);const S=u(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const E=u(e,["proactivity"]);if(t!==void 0&&E!=null&&d(t,["setup","proactivity"],E),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function yR(e,t){const n={},i=u(t,["model"]);i!=null&&d(n,["setup","model"],oe(e,i));const r=u(t,["config"]);return r!=null&&d(n,["config"],vR(r,n)),n}function xR(e){const t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=u(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const r=u(e,["executableCode"]);r!=null&&d(t,["executableCode"],r);const s=u(e,["fileData"]);s!=null&&d(t,["fileData"],hR(s));const a=u(e,["functionCall"]);a!=null&&d(t,["functionCall"],mR(a));const o=u(e,["functionResponse"]);o!=null&&d(t,["functionResponse"],o);const l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],uR(l));const c=u(e,["text"]);c!=null&&d(t,["text"],c);const h=u(e,["thought"]);h!=null&&d(t,["thought"],h);const p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);const m=u(e,["videoMetadata"]);return m!=null&&d(t,["videoMetadata"],m),t}function bR(e){const t={},n=u(e,["handle"]);if(n!=null&&d(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function wR(e){const t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);const i=u(e,["fileSearch"]);i!=null&&d(t,["fileSearch"],i);const r=u(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=u(e,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>p)),d(t,["functionDeclarations"],h)}const a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],pR(a));const o=u(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],gR(o));const l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);const c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);t.push(...r)}else t.push(n)}return t.join(",")}function SR(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const s=_R(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];r.length>0&&(o=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),o.length>0&&l.push(...o),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class TR extends On{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=fR(this.apiClient,t);s=O("auth_tokens",o._url),a=o._query,delete o.config,delete o._url,delete o._query;const l=SR(o,t.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ER(e,t){const n={},i=u(e,["force"]);return t!==void 0&&i!=null&&d(t,["_query","force"],i),n}function CR(e){const t={},n=u(e,["name"]);n!=null&&d(t,["_url","name"],n);const i=u(e,["config"]);return i!=null&&ER(i,t),t}function AR(e){const t={},n=u(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function kR(e,t){const n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const r=u(e,["pageToken"]);return t!==void 0&&r!=null&&d(t,["_query","pageToken"],r),n}function NR(e){const t={},n=u(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const i=u(e,["config"]);return i!=null&&kR(i,t),t}function RR(e){const t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=u(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const r=u(e,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IR extends On{constructor(t){super(),this.apiClient=t,this.list=async n=>new Ji(Un.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=AR(t);return s=O("{name}",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(t){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=CR(t);r=O("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=NR(t);return s=O("{parent}/documents",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=RR(l),h=new aC;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MR extends On{constructor(t,n=new IR(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Ji(Un.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_1(t);return s=O("fileSearchStores",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async get(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=E1(t);return s=O("{name}",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(t){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=T1(t);r=O("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=I1(t);return s=O("fileSearchStores",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=M1(l),h=new oC;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=D1(t);return s=O("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=U1(l),h=new lC;return Object.assign(h,c),h})}}async importFile(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=k1(t);return s=O("{file_search_store_name}:importFile",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const c=A1(l),h=new Jf;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Kx=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Kx=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const DR=()=>Kx();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pd(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const gd=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qt extends Error{}class ot extends qt{constructor(t,n,i,r){super(`${ot.makeMessage(t,n,i)}`),this.status=t,this.headers=r,this.error=n}static makeMessage(t,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,n,i,r){if(!t||!r)return new Fl({message:i,cause:gd(n)});const s=n;return t===400?new Xx(t,s,i,r):t===401?new Qx(t,s,i,r):t===403?new Zx(t,s,i,r):t===404?new eb(t,s,i,r):t===409?new tb(t,s,i,r):t===422?new nb(t,s,i,r):t===429?new ib(t,s,i,r):t>=500?new rb(t,s,i,r):new ot(t,s,i,r)}}class vd extends ot{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Fl extends ot{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Wx extends Fl{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Xx extends ot{}class Qx extends ot{}class Zx extends ot{}class eb extends ot{}class tb extends ot{}class nb extends ot{}class ib extends ot{}class rb extends ot{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UR=/^[a-z][a-z0-9+.-]*:/i,LR=e=>UR.test(e);let yd=e=>(yd=Array.isArray,yd(e));const OR=yd;let PR=OR;const mp=PR;function jR(e){if(!e)return!0;for(const t in e)return!1;return!0}function GR(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const BR=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new qt(`${e} must be an integer`);if(t<0)throw new qt(`${e} must be a positive integer`);return t},HR=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qR=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $R=()=>{var e,t,n,i,r;const s=VR();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sr,"X-Stainless-OS":gp(Deno.build.os),"X-Stainless-Arch":pp(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sr,"X-Stainless-OS":gp((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":pp((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=zR();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function zR(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:t,version:`${r}.${s}.${a}`}}}return null}const pp=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",gp=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Wa;const FR=()=>Wa??(Wa=$R());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sb(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function YR(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return sb({start(){},async pull(n){const{done:i,value:r}=await t.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function ab(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function KR(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WR=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ob=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yu(e,t,n){return ob(),new File(e,t??"unknown_file",n)}function XR(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const QR=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lb=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",ZR=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&lb(e),e2=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function t2(e,t,n){if(ob(),e=await e,ZR(e))return e instanceof File?e:Yu([await e.arrayBuffer()],e.name);if(e2(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Yu(await xd(r),t,n)}const i=await xd(e);if(t||(t=XR(e)),!(n!=null&&n.type)){const r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Yu(i,t,n)}async function xd(e){var t,n,i,r,s;let a=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)a.push(e);else if(lb(e))a.push(e instanceof Blob?e:await e.arrayBuffer());else if(QR(e))try{for(var o=!0,l=Wt(e),c;c=await l.next(),t=c.done,!t;o=!0){r=c.value,o=!1;const h=r;a.push(...await xd(h))}}catch(h){n={error:h}}finally{try{!o&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{const h=(s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof e}${h?`; constructor: ${h}`:""}${n2(e)}`)}return a}function n2(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ub{constructor(t){this._client=t}}ub._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cb(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vp=Object.freeze(Object.create(null)),i2=(e=cb)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const s=[],a=n.reduce((h,p,m)=>{var g,v,b;/[?#]/.test(p)&&(r=!0);const _=i[m];let y=(r?encodeURIComponent:e)(""+_);return m!==i.length&&(_==null||typeof _=="object"&&_.toString===((b=Object.getPrototypeOf((v=Object.getPrototypeOf((g=_.hasOwnProperty)!==null&&g!==void 0?g:vp))!==null&&v!==void 0?v:vp))===null||b===void 0?void 0:b.toString))&&(y=_+"",s.push({start:h.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),h+p+(m===i.length?"":y)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((h,p)=>h.start-p.start),s.length>0){let h=0;const p=s.reduce((m,g)=>{const v=" ".repeat(g.start-h),b="^".repeat(g.length);return h=g.start+g.length,m+v+b},"");throw new qt(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${a}
${p}`)}return a},Xa=i2(cb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class db extends ub{create(t,n){var i;const{api_version:r=this._client.apiVersion}=t,s=fl(t,["api_version"]);if("model"in s&&"agent_config"in s)throw new qt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new qt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xa`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Xa`/${r}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Xa`/${r}/interactions/${t}/cancel`,i)}get(t,n={},i){var r;const s=n??{},{api_version:a=this._client.apiVersion}=s,o=fl(s,["api_version"]);return this._client.get(Xa`/${a}/interactions/${t}`,Object.assign(Object.assign({query:o},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}db._key=Object.freeze(["interactions"]);class fb extends db{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r2(e){let t=0;for(const r of e)t+=r.length;const n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}let Qa;function eh(e){let t;return(Qa??(t=new globalThis.TextEncoder,Qa=t.encode.bind(t)))(e)}let Za;function yp(e){let t;return(Za??(t=new globalThis.TextDecoder,Za=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?eh(t):t;this.buffer=r2([this.buffer,n]);const i=[];let r;for(;(r=s2(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(yp(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=yp(this.buffer.subarray(0,s));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Jl.NEWLINE_CHARS=new Set([`
`,"\r"]);Jl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function s2(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function a2(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hl={off:0,error:200,warn:300,info:400,debug:500},xp=(e,t,n)=>{if(e){if(GR(hl,e))return e;st(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(hl))}`)}};function Cs(){}function eo(e,t,n){return!t||hl[e]>hl[n]?Cs:t[e].bind(t)}const o2={error:Cs,warn:Cs,info:Cs,debug:Cs};let bp=new WeakMap;function st(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return o2;const r=bp.get(n);if(r&&r[0]===i)return r[1];const s={error:eo("error",n,i),warn:eo("warn",n,i),info:eo("info",n,i),debug:eo("debug",n,i)};return bp.set(n,[i,s]),s}const Ci=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _r{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let r=!1;const s=i?st(i):console;function a(){return Kt(this,arguments,function*(){var l,c,h,p;if(r)throw new qt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,v=Wt(l2(t,n)),b;b=yield X(v.next()),l=b.done,!l;g=!0){p=b.value,g=!1;const _=p;if(!m)if(_.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield X(JSON.parse(_.data))}catch(y){throw s.error("Could not parse message into JSON:",_.data),s.error("From chunk:",_.raw),y}}}catch(_){c={error:_}}finally{try{!g&&!l&&(h=v.return)&&(yield X(h.call(v)))}finally{if(c)throw c.error}}m=!0}catch(_){if(pd(_))return yield X(void 0);throw _}finally{m||n.abort()}})}return new _r(a,n,i)}static fromReadableStream(t,n,i){let r=!1;function s(){return Kt(this,arguments,function*(){var l,c,h,p;const m=new Jl,g=ab(t);try{for(var v=!0,b=Wt(g),_;_=yield X(b.next()),l=_.done,!l;v=!0){p=_.value,v=!1;const y=p;for(const x of m.decode(y))yield yield X(x)}}catch(y){c={error:y}}finally{try{!v&&!l&&(h=b.return)&&(yield X(h.call(b)))}finally{if(c)throw c.error}}for(const y of m.flush())yield yield X(y)})}function a(){return Kt(this,arguments,function*(){var l,c,h,p;if(r)throw new qt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,v=Wt(s()),b;b=yield X(v.next()),l=b.done,!l;g=!0){p=b.value,g=!1;const _=p;m||_&&(yield yield X(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!g&&!l&&(h=v.return)&&(yield X(h.call(v)))}finally{if(c)throw c.error}}m=!0}catch(_){if(pd(_))return yield X(void 0);throw _}finally{m||n.abort()}})}return new _r(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const a=i.next();t.push(a),n.push(a)}return s.shift()}});return[new _r(()=>r(t),this.controller,this.client),new _r(()=>r(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return sb({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:s}=await n.next();if(s)return i.close();const a=eh(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function l2(e,t){return Kt(this,arguments,function*(){var i,r,s,a;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new qt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new qt("Attempted to iterate over a response with no body");const o=new c2,l=new Jl,c=ab(e.body);try{for(var h=!0,p=Wt(u2(c)),m;m=yield X(p.next()),i=m.done,!i;h=!0){a=m.value,h=!1;const g=a;for(const v of l.decode(g)){const b=o.decode(v);b&&(yield yield X(b))}}}catch(g){r={error:g}}finally{try{!h&&!i&&(s=p.return)&&(yield X(s.call(p)))}finally{if(r)throw r.error}}for(const g of l.flush()){const v=o.decode(g);v&&(yield yield X(v))}})}function u2(e){return Kt(this,arguments,function*(){var n,i,r,s;let a=new Uint8Array;try{for(var o=!0,l=Wt(e),c;c=yield X(l.next()),n=c.done,!n;o=!0){s=c.value,o=!1;const h=s;if(h==null)continue;const p=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?eh(h):h;let m=new Uint8Array(a.length+p.length);m.set(a),m.set(p,a.length),a=m;let g;for(;(g=a2(a))!==-1;)yield yield X(a.slice(0,g)),a=a.slice(g)}}catch(h){i={error:h}}finally{try{!o&&!n&&(r=l.return)&&(yield X(r.call(l)))}finally{if(i)throw i.error}}a.length>0&&(yield yield X(a))})}class c2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,r]=d2(t,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function d2(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function f2(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=t,a=await(async()=>{var o;if(t.options.stream)return st(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):_r.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(o=l==null?void 0:l.split(";")[0])===null||o===void 0?void 0:o.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return st(e).debug(`[${i}] response parsed`,Ci({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class th extends Promise{constructor(t,n,i=f2){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new th(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hb=Symbol("brand.privateNullableHeaders");function*h2(e){if(!e)return;if(hb in e){const{values:i,nulls:r}=e;yield*i.entries();for(const s of r)yield[s,null];return}let t=!1,n;e instanceof Headers?n=e.entries():mp(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=mp(i[1])?i[1]:[i[1]];let a=!1;for(const o of s)o!==void 0&&(t&&!a&&(a=!0,yield[r,null]),yield[r,o])}}const gs=e=>{const t=new Headers,n=new Set;for(const i of e){const r=new Set;for(const[s,a]of h2(i)){const o=s.toLowerCase();r.has(o)||(t.delete(s),r.add(o)),a===null?(t.delete(s),n.add(o)):(t.append(s,a),n.delete(o))}}return{[hb]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ku=e=>{var t,n,i,r,s,a;if(typeof globalThis.process<"u")return(i=(n=(t=LE)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,e))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mb;class Yl{constructor(t){var n,i,r,s,a,o,l,{baseURL:c=Ku("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=Ku("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,m=fl(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Yl.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const v="warn";this.logLevel=v,this.logLevel=(a=(s=xp(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:xp(Ku("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(o=g.maxRetries)!==null&&o!==void 0?o:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:JR(),this.encoder=WR,this._options=g,this.apiKey=h,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=gs([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return gs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new qt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${sr}`}defaultIdempotencyKey(){return`stainless-node-retry-${DR()}`}makeStatusError(t,n,i,r){return ot.generate(t,n,i,r)}buildURL(t,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,s=LR(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return jR(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:t,path:n},r)))}request(t,n=null){return new th(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var r,s,a;const o=await t,l=(r=o.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=l),await this.prepareOptions(o);const{req:c,url:h,timeout:p}=await this.buildRequest(o,{retryCount:l-n});await this.prepareRequest(c,{url:h,options:o});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,v=Date.now();if(st(this).debug(`[${m}] sending request`,Ci({retryOfRequestLogID:i,method:o.method,url:h,options:o,headers:c.headers})),!((s=o.signal)===null||s===void 0)&&s.aborted)throw new vd;const b=new AbortController,_=await this.fetchWithTimeout(h,c,p,b).catch(gd),y=Date.now();if(_ instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((a=o.signal)===null||a===void 0)&&a.aborted)throw new vd;const S=pd(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return st(this).info(`[${m}] connection ${S?"timed out":"failed"} - ${w}`),st(this).debug(`[${m}] connection ${S?"timed out":"failed"} (${w})`,Ci({retryOfRequestLogID:i,url:h,durationMs:y-v,message:_.message})),this.retryRequest(o,n,i??m);throw st(this).info(`[${m}] connection ${S?"timed out":"failed"} - error; no more retries left`),st(this).debug(`[${m}] connection ${S?"timed out":"failed"} (error; no more retries left)`,Ci({retryOfRequestLogID:i,url:h,durationMs:y-v,message:_.message})),S?new Wx:new Fl({cause:_})}const x=`[${m}${g}] ${c.method} ${h} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${y-v}ms`;if(!_.ok){const w=await this.shouldRetry(_);if(n&&w){const k=`retrying, ${n} attempts remaining`;return await KR(_.body),st(this).info(`${x} - ${k}`),st(this).debug(`[${m}] response error (${k})`,Ci({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:y-v})),this.retryRequest(o,n,i??m,_.headers)}const S=w?"error; no more retries left":"error; not retryable";st(this).info(`${x} - ${S}`);const E=await _.text().catch(k=>gd(k).message),A=HR(E),C=A?void 0:E;throw st(this).debug(`[${m}] response error (${S})`,Ci({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,message:C,durationMs:Date.now()-v})),this.makeStatusError(_.status,A,C,_.headers)}return st(this).info(x),st(this).debug(`[${m}] response start`,Ci({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:y-v})),{response:_,options:o,controller:b,requestLogID:m,retryOfRequestLogID:i,startTime:v}}async fetchWithTimeout(t,n,i,r){const s=n||{},{signal:a,method:o}=s,l=fl(s,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),i),h=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:r.signal},h?{duplex:"half"}:{}),{method:"GET"}),l);o&&(p.method=o.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(c)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,r){var s;let a;const o=r==null?void 0:r.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(a=c)}const l=r==null?void 0:r.get("retry-after");if(l&&!a){const c=parseFloat(l);Number.isNaN(c)?a=Date.parse(l)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,c)}return await qR(a),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,r,s;const a=Object.assign({},t),{method:o,path:l,query:c,defaultBaseURL:h}=a,p=this.buildURL(l,c,h);"timeout"in a&&BR("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:a}),v=await this.buildHeaders({options:t,method:o,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:o,headers:v},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:a.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const a=await this.authHeaders(t);let o=gs([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),FR()),this._options.defaultHeaders,i,t.headers,a]);return this.validateHeaders(o),o.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=gs([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:YR(t)}:this.encoder({body:t,headers:i})}}Yl.DEFAULT_TIMEOUT=6e4;class ze extends Yl{constructor(){super(...arguments),this.interactions=new fb(this)}}mb=ze;ze.GeminiNextGenAPIClient=mb;ze.GeminiNextGenAPIClientError=qt;ze.APIError=ot;ze.APIConnectionError=Fl;ze.APIConnectionTimeoutError=Wx;ze.APIUserAbortError=vd;ze.NotFoundError=eb;ze.ConflictError=tb;ze.RateLimitError=ib;ze.BadRequestError=Xx;ze.AuthenticationError=Qx;ze.InternalServerError=rb;ze.PermissionDeniedError=Zx;ze.UnprocessableEntityError=nb;ze.toFile=t2;ze.Interactions=fb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m2(e,t){const n={},i=u(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function p2(e,t){const n={},i=u(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function g2(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function v2(e,t){const n={},i=u(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function y2(e,t,n){const i={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(e,["epochCount"]);t!==void 0&&s!=null&&d(t,["tuningTask","hyperparameters","epochCount"],s);const a=u(e,["learningRateMultiplier"]);if(a!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(u(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(u(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const o=u(e,["batchSize"]);t!==void 0&&o!=null&&d(t,["tuningTask","hyperparameters","batchSize"],o);const l=u(e,["learningRate"]);if(t!==void 0&&l!=null&&d(t,["tuningTask","hyperparameters","learningRate"],l),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(u(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(u(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(u(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(u(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function x2(e,t,n){const i={};let r=u(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=u(e,["validationDataset"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec"],Wu(E))}else if(r==="PREFERENCE_TUNING"){const E=u(e,["validationDataset"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec"],Wu(E))}else if(r==="DISTILLATION"){const E=u(e,["validationDataset"]);t!==void 0&&E!=null&&d(t,["distillationSpec"],Wu(E))}const s=u(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&d(t,["tunedModelDisplayName"],s);const a=u(e,["description"]);t!==void 0&&a!=null&&d(t,["description"],a);let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const E=u(e,["epochCount"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(o==="PREFERENCE_TUNING"){const E=u(e,["epochCount"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}else if(o==="DISTILLATION"){const E=u(e,["epochCount"]);t!==void 0&&E!=null&&d(t,["distillationSpec","hyperParameters","epochCount"],E)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const E=u(e,["learningRateMultiplier"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(l==="PREFERENCE_TUNING"){const E=u(e,["learningRateMultiplier"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}else if(l==="DISTILLATION"){const E=u(e,["learningRateMultiplier"]);t!==void 0&&E!=null&&d(t,["distillationSpec","hyperParameters","learningRateMultiplier"],E)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const E=u(e,["exportLastCheckpointOnly"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(c==="PREFERENCE_TUNING"){const E=u(e,["exportLastCheckpointOnly"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}else if(c==="DISTILLATION"){const E=u(e,["exportLastCheckpointOnly"]);t!==void 0&&E!=null&&d(t,["distillationSpec","exportLastCheckpointOnly"],E)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=u(e,["adapterSize"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(h==="PREFERENCE_TUNING"){const E=u(e,["adapterSize"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}else if(h==="DISTILLATION"){const E=u(e,["adapterSize"]);t!==void 0&&E!=null&&d(t,["distillationSpec","hyperParameters","adapterSize"],E)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=u(e,["tuningMode"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","tuningMode"],E)}const m=u(e,["customBaseModel"]);t!==void 0&&m!=null&&d(t,["customBaseModel"],m);let g=u(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const E=u(e,["batchSize"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","hyperParameters","batchSize"],E)}let v=u(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const E=u(e,["learningRate"]);t!==void 0&&E!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRate"],E)}const b=u(e,["labels"]);t!==void 0&&b!=null&&d(t,["labels"],b);const _=u(e,["beta"]);t!==void 0&&_!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],_);const y=u(e,["baseTeacherModel"]);t!==void 0&&y!=null&&d(t,["distillationSpec","baseTeacherModel"],y);const x=u(e,["tunedTeacherModelSource"]);t!==void 0&&x!=null&&d(t,["distillationSpec","tunedTeacherModelSource"],x);const w=u(e,["sftLossWeightMultiplier"]);t!==void 0&&w!=null&&d(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],w);const S=u(e,["outputUri"]);return t!==void 0&&S!=null&&d(t,["outputUri"],S),i}function b2(e,t){const n={},i=u(e,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=u(e,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const s=u(e,["trainingDataset"]);s!=null&&I2(s);const a=u(e,["config"]);return a!=null&&y2(a,n),n}function w2(e,t){const n={},i=u(e,["baseModel"]);i!=null&&d(n,["baseModel"],i);const r=u(e,["preTunedModel"]);r!=null&&d(n,["preTunedModel"],r);const s=u(e,["trainingDataset"]);s!=null&&M2(s,n,t);const a=u(e,["config"]);return a!=null&&x2(a,n,t),n}function _2(e,t){const n={},i=u(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function S2(e,t){const n={},i=u(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function T2(e,t,n){const i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const s=u(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const a=u(e,["filter"]);return t!==void 0&&a!=null&&d(t,["_query","filter"],a),i}function E2(e,t,n){const i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const s=u(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const a=u(e,["filter"]);return t!==void 0&&a!=null&&d(t,["_query","filter"],a),i}function C2(e,t){const n={},i=u(e,["config"]);return i!=null&&T2(i,n),n}function A2(e,t){const n={},i=u(e,["config"]);return i!=null&&E2(i,n),n}function k2(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const s=u(e,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>pb(o))),d(n,["tuningJobs"],a)}return n}function N2(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["nextPageToken"]);r!=null&&d(n,["nextPageToken"],r);const s=u(e,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>bd(o))),d(n,["tuningJobs"],a)}return n}function R2(e,t){const n={},i=u(e,["name"]);i!=null&&d(n,["model"],i);const r=u(e,["name"]);return r!=null&&d(n,["endpoint"],r),n}function I2(e,t){const n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=u(e,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),d(n,["examples","examples"],r)}return n}function M2(e,t,n){const i={};let r=u(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=u(e,["gcsUri"]);t!==void 0&&a!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=u(e,["gcsUri"]);t!==void 0&&a!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(r==="DISTILLATION"){const a=u(e,["gcsUri"]);t!==void 0&&a!=null&&d(t,["distillationSpec","promptDatasetUri"],a)}let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=u(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=u(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}else if(s==="DISTILLATION"){const a=u(e,["vertexDatasetResource"]);t!==void 0&&a!=null&&d(t,["distillationSpec","promptDatasetUri"],a)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function pb(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["name"]);r!=null&&d(n,["name"],r);const s=u(e,["state"]);s!=null&&d(n,["state"],Ix(s));const a=u(e,["createTime"]);a!=null&&d(n,["createTime"],a);const o=u(e,["tuningTask","startTime"]);o!=null&&d(n,["startTime"],o);const l=u(e,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);const c=u(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(e,["description"]);h!=null&&d(n,["description"],h);const p=u(e,["baseModel"]);p!=null&&d(n,["baseModel"],p);const m=u(e,["_self"]);return m!=null&&d(n,["tunedModel"],R2(m)),n}function bd(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["name"]);r!=null&&d(n,["name"],r);const s=u(e,["state"]);s!=null&&d(n,["state"],Ix(s));const a=u(e,["createTime"]);a!=null&&d(n,["createTime"],a);const o=u(e,["startTime"]);o!=null&&d(n,["startTime"],o);const l=u(e,["endTime"]);l!=null&&d(n,["endTime"],l);const c=u(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(e,["error"]);h!=null&&d(n,["error"],h);const p=u(e,["description"]);p!=null&&d(n,["description"],p);const m=u(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const g=u(e,["tunedModel"]);g!=null&&d(n,["tunedModel"],g);const v=u(e,["preTunedModel"]);v!=null&&d(n,["preTunedModel"],v);const b=u(e,["supervisedTuningSpec"]);b!=null&&d(n,["supervisedTuningSpec"],b);const _=u(e,["preferenceOptimizationSpec"]);_!=null&&d(n,["preferenceOptimizationSpec"],_);const y=u(e,["distillationSpec"]);y!=null&&d(n,["distillationSpec"],y);const x=u(e,["tuningDataStats"]);x!=null&&d(n,["tuningDataStats"],x);const w=u(e,["encryptionSpec"]);w!=null&&d(n,["encryptionSpec"],w);const S=u(e,["partnerModelTuningSpec"]);S!=null&&d(n,["partnerModelTuningSpec"],S);const E=u(e,["customBaseModel"]);E!=null&&d(n,["customBaseModel"],E);const A=u(e,["experiment"]);A!=null&&d(n,["experiment"],A);const C=u(e,["labels"]);C!=null&&d(n,["labels"],C);const R=u(e,["outputUri"]);R!=null&&d(n,["outputUri"],R);const k=u(e,["pipelineJob"]);k!=null&&d(n,["pipelineJob"],k);const M=u(e,["serviceAccount"]);M!=null&&d(n,["serviceAccount"],M);const G=u(e,["tunedModelDisplayName"]);G!=null&&d(n,["tunedModelDisplayName"],G);const Y=u(e,["veoTuningSpec"]);return Y!=null&&d(n,["veoTuningSpec"],Y),n}function D2(e,t){const n={},i=u(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const r=u(e,["name"]);r!=null&&d(n,["name"],r);const s=u(e,["metadata"]);s!=null&&d(n,["metadata"],s);const a=u(e,["done"]);a!=null&&d(n,["done"],a);const o=u(e,["error"]);return o!=null&&d(n,["error"],o),n}function Wu(e,t){const n={},i=u(e,["gcsUri"]);i!=null&&d(n,["validationDatasetUri"],i);const r=u(e,["vertexDatasetResource"]);return r!=null&&d(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends On{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:od.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=S2(t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>bd(h))}else{const c=_2(t);return o=O("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>pb(h))}}async listInternal(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=A2(t);return o=O("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=N2(h),m=new J0;return Object.assign(m,p),m})}else{const c=C2(t);return o=O("tunedModels",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=k2(h),m=new J0;return Object.assign(m,p),m})}}async cancel(t){var n,i,r,s;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=p2(t);return o=O("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=v2(h),m=new Y0;return Object.assign(m,p),m})}else{const c=m2(t);return o=O("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),a.then(h=>{const p=g2(h),m=new Y0;return Object.assign(m,p),m})}}async tuneInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=w2(t,t);return s=O("tuningJobs",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>bd(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=b2(t);return s=O("tunedModels",o._url),a=o._query,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),r.then(l=>D2(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L2{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const O2=1024*1024*8,P2=3,j2=1e3,G2=2,ml="x-goog-upload-status";async function B2(e,t,n){var i;const r=await gb(e,t,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[ml])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function H2(e,t,n){var i;const r=await gb(e,t,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[ml])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=Ex(s),o=new Yf;return Object.assign(o,a),o}async function gb(e,t,n){var i,r;let s=0,a=0,o=new ud(new Response),l="upload";for(s=e.size;a<s;){const c=Math.min(O2,s-a),h=e.slice(a,a+c);a+c>=s&&(l+=", finalize");let p=0,m=j2;for(;p<P2&&(o=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((i=o==null?void 0:o.headers)===null||i===void 0)&&i[ml]));)p++,await V2(m),m=m*G2;if(a+=c,((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[ml])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return o}async function q2(e){return{size:e.size,type:e.type}}function V2(e){return new Promise(t=>setTimeout(t,e))}class $2{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await B2(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await H2(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await q2(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z2{create(t,n,i){return new F2(t,n,i)}}class F2{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wp="x-goog-api-key";class J2{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(wp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(wp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y2="gl-node/";class K2{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ze({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=GE(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new J2(this.apiKey);this.apiClient=new q1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Y2+"web",uploader:new $2,downloader:new L2}),this.models=new oR(this.apiClient),this.live=new tR(this.apiClient,r,new z2),this.batches=new pA(this.apiClient),this.chats=new WA(this.models,this.apiClient),this.caches=new JA(this.apiClient),this.files=new lk(this.apiClient),this.operations=new lR(this.apiClient),this.authTokens=new TR(this.apiClient),this.tunings=new U2(this.apiClient),this.fileSearchStores=new MR(this.apiClient)}}const ka=new K2({apiKey:"AIzaSyAbL9uqczBDqwjHceYQtxxCqLXtPKlznEI"});async function W2(e,t){const n=t.map(s=>s.id),i=t.map(s=>s.name).join(", "),r=`
    Based on the following high-level goal, break it down into a list of specific, actionable tasks.
    
    Goal: "${e}"

    Here are the available employees to assign tasks to: ${i}.
    
    For each task, provide a concise title, a brief description, a suggested assignee ID from the list [${n.join(", ")}], and a due date.
    The due date should be a reasonable number of days from today's date (${new Date().toISOString().split("T")[0]}). For example, 'YYYY-MM-DD'.
    Assign tasks logically based on what their role might be inferred from the goal. Distribute the tasks among the employees.
  `;try{const a=(await ka.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{tasks:{type:Pe.ARRAY,items:{type:Pe.OBJECT,properties:{title:{type:Pe.STRING,description:"A short, clear title for the task."},description:{type:Pe.STRING,description:"A brief description of what needs to be done."},assigneeId:{type:Pe.STRING,description:`The ID of the employee assigned to this task. Must be one of: ${n.join(", ")}.`},dueDate:{type:Pe.STRING,description:"The due date in YYYY-MM-DD format."}},required:["title","description","assigneeId","dueDate"]}}},required:["tasks"]}}})).text.trim(),o=JSON.parse(a);if(o&&Array.isArray(o.tasks))return o.tasks.map(l=>({...l,assigneeId:n.includes(l.assigneeId)?l.assigneeId:n[0]}));throw new Error("AI response did not contain a valid 'tasks' array.")}catch(s){throw console.error("Error generating tasks with Gemini:",s),new Error("Failed to generate tasks. The AI model may be temporarily unavailable.")}}async function X2(e,t,n){const i=`
    You are a helpful project management assistant. You are advising on the following task:
    - Task Title: "${e}"
    - Task Description: "${t||"No description provided."}"
    
    A user has the following question about this task: "${n}"
    
    Please provide a helpful, concise, and actionable response. Format your response clearly.
  `;try{return(await ka.models.generateContent({model:"gemini-2.5-flash",contents:i})).text}catch(r){throw console.error("Error getting advice from Gemini:",r),new Error("Failed to get advice. The AI model may be temporarily unavailable.")}}async function Q2(e,t){const n=`
    Analyze the following task and suggest a priority level.
    - Title: "${e}"
    - Description: "${t||"N/A"}"
    
    Consider keywords like 'urgent', 'bug', 'critical', 'blocker' for high/urgent priority, 
    and 'plan', 'research', 'draft' for lower priority.
    
    The available priority levels are: ${Ao.join(", ")}.
  `;try{const r=(await ka.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{priority:{type:Pe.STRING,description:`The suggested priority. Must be one of: ${Ao.join(", ")}`}},required:["priority"]}}})).text.trim(),a=JSON.parse(r).priority;return Ao.includes(a)?a:(console.warn(`AI suggested an invalid priority: ${a}. Defaulting to Medium.`),W.MEDIUM)}catch(i){throw console.error("Error suggesting priority with Gemini:",i),new Error("Failed to suggest a priority.")}}async function Z2(e,t){const n=new Date(Date.now()-6048e5),i=e.filter(c=>c.status===J.DONE&&c.completedAt&&new Date(c.completedAt)>n),r=e.filter(c=>new Date(c.createdAt)>n),s=e.filter(c=>new Date(c.dueDate)<new Date&&c.status!==J.DONE),a=new Map(t.map(c=>[c.id,c.name])),o=c=>c.map(h=>`- "${h.title}" (Assigned to: ${a.get(h.assigneeId)||"N/A"})`).join(`
`),l=`
        You are a project manager AI. Based on the following data, generate a concise, human-readable summary of the project's progress over the last week.
        Structure the summary into sections: "Key Accomplishments", "New Tasks Created", and "Attention Needed".
        Be encouraging and professional.

        **Tasks Completed in the Last 7 Days:**
        ${i.length>0?o(i):"None"}

        **Tasks Created in the Last 7 Days:**
        ${r.length>0?o(r):"None"}
        
        **Currently Overdue Tasks:**
        ${s.length>0?o(s):"None"}

        Now, please generate the summary.
    `;try{return(await ka.models.generateContent({model:"gemini-2.5-flash",contents:l})).text}catch(c){throw console.error("Error generating summary with Gemini:",c),new Error("Failed to generate the weekly summary.")}}async function eI(e,t){const n=`
    For the task titled "${e}" with description "${t}", generate a list of 3 to 6 actionable subtasks (checklist items).
    Return only the list of strings.
  `;try{const r=(await ka.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{subtasks:{type:Pe.ARRAY,items:{type:Pe.STRING}}},required:["subtasks"]}}})).text.trim();return JSON.parse(r).subtasks||[]}catch(i){throw console.error("Error generating subtasks with Gemini:",i),new Error("Failed to generate subtasks.")}}const tI=({isOpen:e,onClose:t,onSave:n,employees:i,taskToEdit:r,allTasks:s})=>{const[a,o]=T.useState(""),[l,c]=T.useState(""),[h,p]=T.useState(""),[m,g]=T.useState(""),[v,b]=T.useState(W.MEDIUM),[_,y]=T.useState(null),[x,w]=T.useState([]),[S,E]=T.useState([]),[A,C]=T.useState(""),[R,k]=T.useState(!1),[M,G]=T.useState(!1),[Y,q]=T.useState(!1);T.useEffect(()=>{if(e){const j=setTimeout(()=>G(!0),10),nt=vt=>{vt.key==="Escape"&&t()};return document.addEventListener("keydown",nt),()=>{clearTimeout(j),document.removeEventListener("keydown",nt)}}else G(!1)},[e,t]),T.useEffect(()=>{r?(o(r.title),c(r.description),p(r.assigneeId),g(r.dueDate),b(r.priority),y(r.blockedById||null),w(r.subtasks||[]),E(r.tags||[])):(o(""),c(""),p(i.length>0?i[0].id:""),g(new Date().toISOString().split("T")[0]),b(W.MEDIUM),y(null),w([]),E([]))},[r,i,e]);const se=T.useMemo(()=>{const j=new Set(s.flatMap(nt=>nt.tags||[]));return Array.from(j).sort()},[s]),ye=T.useMemo(()=>se.filter(j=>!S.includes(j)&&j.toLowerCase().includes(A.toLowerCase())),[se,S,A]);if(!e)return null;const D=j=>{j.preventDefault(),a.trim()&&n({title:a,description:l,assigneeId:h,dueDate:m,priority:v,blockedById:_,subtasks:x,tags:S},r?r.id:null)},H=async()=>{if(!(!a.trim()&&!l.trim())){q(!0);try{const j=await Q2(a,l);b(j)}catch(j){console.error("Failed to suggest priority:",j)}finally{q(!1)}}},U=j=>{j.key==="Enter"&&A.trim()&&(j.preventDefault(),S.includes(A.trim())||E([...S,A.trim()]),C(""),k(!1))},K=j=>{S.includes(j)||E([...S,j]),C(""),k(!1)},ce=j=>{E(S.filter(nt=>nt!==j))},Ze=s.filter(j=>j.id!==(r==null?void 0:r.id));return f.jsxs("div",{className:`fixed inset-0 z-50 flex justify-center items-center p-4 transition-all duration-300 ${M?"visible":"invisible"}`,role:"dialog","aria-modal":"true",children:[f.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${M?"opacity-60":"opacity-0"}`,onClick:t,"aria-hidden":"true"}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl p-6 transition-all duration-300 flex flex-col max-h-[90vh] relative z-10 transform ${M?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-white flex-shrink-0",children:r?"Edit Task":"Add New Task"}),f.jsxs("form",{onSubmit:D,className:"flex-grow overflow-y-auto px-1",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Title"}),f.jsx("input",{type:"text",id:"title",value:a,onChange:j=>o(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",required:!0})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description"}),f.jsx("textarea",{id:"description",value:l,onChange:j=>c(j.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tags"}),f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:S.map(j=>f.jsx(ql,{text:j,onRemove:()=>ce(j)},j))}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",id:"tags",value:A,onChange:j=>C(j.target.value),onKeyDown:U,onFocus:()=>k(!0),onBlur:()=>setTimeout(()=>k(!1),200),placeholder:"Type tag and press Enter",className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",autoComplete:"off"}),R&&ye.length>0&&f.jsx("ul",{className:"absolute z-10 w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:ye.map(j=>f.jsx("li",{onMouseDown:nt=>{nt.preventDefault(),K(j)},className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-600 text-sm text-slate-700 dark:text-slate-200",children:j},j))})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"assignee",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assignee"}),f.jsx("select",{id:"assignee",value:h,onChange:j=>p(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:i.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Due Date"}),f.jsx("input",{type:"date",id:"dueDate",value:m,onChange:j=>g(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",required:!0})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("select",{id:"priority",value:v,onChange:j=>b(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:Ao.map(j=>f.jsx("option",{value:j,children:j},j))}),f.jsx("button",{type:"button",onClick:H,disabled:Y,className:"p-2 bg-primary-100 dark:bg-primary-900/50 rounded-md hover:bg-primary-200 dark:hover:bg-primary-900",title:"Suggest Priority with AI",children:f.jsx(Yt,{className:`w-5 h-5 text-primary-600 dark:text-primary-400 ${Y?"animate-pulse":""}`})})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"blockedBy",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Blocked By"}),f.jsxs("select",{id:"blockedBy",value:_||"",onChange:j=>y(j.target.value?parseInt(j.target.value):null),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[f.jsx("option",{value:"",children:"None"}),Ze.map(j=>f.jsx("option",{value:j.id,children:j.title},j.id))]})]})]}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:r?"Save Changes":"Add Task"})]})]})]})]})},nI=({isOpen:e,onClose:t,onTasksGenerated:n,employees:i})=>{const[r,s]=T.useState(""),[a,o]=T.useState(!1),[l,c]=T.useState(null),[h,p]=T.useState(!1);if(T.useEffect(()=>{if(e){const g=setTimeout(()=>p(!0),10),v=b=>{b.key==="Escape"&&t()};return document.addEventListener("keydown",v),()=>{clearTimeout(g),document.removeEventListener("keydown",v)}}else p(!1)},[e,t]),T.useEffect(()=>{e&&(s(""),c(null))},[e]),!e)return null;const m=async g=>{if(g.preventDefault(),!!r.trim()){o(!0),c(null);try{const v=await W2(r,i);n(v),t()}catch(v){c(v instanceof Error?v.message:"An unknown error occurred."),console.error(v)}finally{o(!1)}}};return f.jsxs("div",{className:`fixed inset-0 z-50 flex justify-center items-center p-4 transition-all duration-300 ${h?"visible":"invisible"}`,role:"dialog","aria-modal":"true",children:[f.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${h?"opacity-60":"opacity-0"}`,onClick:t,"aria-hidden":"true"}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 transition-all duration-300 relative z-10 transform ${h?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-white",children:"Generate Tasks with AI"}),f.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"Describe a high-level goal, and AI will break it down into smaller, actionable tasks."}),f.jsxs("form",{onSubmit:m,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"goal",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Goal or Objective"}),f.jsx("textarea",{id:"goal",value:r,onChange:g=>s(g.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"e.g., 'Launch a new marketing campaign for our Q4 product release'",required:!0})]}),l&&f.jsx("p",{className:"text-red-500 text-sm mb-4",children:l}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 disabled:opacity-50 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancel"}),f.jsxs("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[a&&f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Generating...":"Generate Tasks"]})]})]})]})]})};function Kl(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function iI(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(h){try{c(i.next(h))}catch(p){a(p)}}function l(h){try{c(i.throw(h))}catch(p){a(p)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((i=i.apply(e,t||[])).next())})}const rI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class nh extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class sI extends nh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _p extends nh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Sp extends nh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wd||(wd={}));class aI{constructor(t,{headers:n={},customFetch:i,region:r=wd.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=rI(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return iI(this,arguments,void 0,function*(n,i={}){var r;let s,a;try{const{headers:o,method:l,body:c,signal:h,timeout:p}=i;let m={},{region:g}=i;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let b;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",b=c):typeof c=="string"?(m["Content-Type"]="text/plain",b=c):typeof FormData<"u"&&c instanceof FormData?b=c:(m["Content-Type"]="application/json",b=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?b=JSON.stringify(c):b=c;let _=h;p&&(a=new AbortController,s=setTimeout(()=>a.abort(),p),h?(_=a.signal,h.addEventListener("abort",()=>a.abort())):_=a.signal);const y=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:b,signal:_}).catch(E=>{throw new sI(E)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new _p(y);if(!y.ok)throw new Sp(y);let w=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield y.json():w==="application/octet-stream"||w==="application/pdf"?S=yield y.blob():w==="text/event-stream"?S=y:w==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof Sp||o instanceof _p?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var oI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},lI=class{constructor(e){var t,n,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(i=e.urlLengthLimit)!==null&&i!==void 0?i:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,c=s.status,h=s.statusText;if(s.ok){var p,m;if(n.method!=="HEAD"){var g;const y=await s.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?o=y:o=JSON.parse(y))}const b=(p=n.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),_=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&_&&_.length>1&&(l=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var v;const b=await s.text();try{a=JSON.parse(b),Array.isArray(a)&&s.status===404&&(o=[],a=null,c=200,h="OK")}catch{s.status===404&&b===""?(c=204,h="No Content"):a={message:b}}if(a&&n.isMaybeSingle&&(!(a==null||(v=a.details)===null||v===void 0)&&v.includes("0 rows"))&&(a=null,c=200,h="OK"),a&&n.shouldThrowOnError)throw new oI(a)}return{error:a,data:o,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(r=r.catch(s=>{var a;let o="",l="",c="";const h=s==null?void 0:s.cause;if(h){var p,m,g,v;const y=(p=h==null?void 0:h.message)!==null&&p!==void 0?p:"",x=(m=h==null?void 0:h.code)!==null&&m!==void 0?m:"";o=`${(g=s==null?void 0:s.name)!==null&&g!==void 0?g:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(v=h==null?void 0:h.name)!==null&&v!==void 0?v:"Error"}: ${y}`,x&&(o+=` (${x})`),h!=null&&h.stack&&(o+=`
${h.stack}`)}else{var b;o=(b=s==null?void 0:s.stack)!==null&&b!==void 0?b:""}const _=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((h==null?void 0:h.name)==="HeadersOverflowError"||(h==null?void 0:h.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(l+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},uI=class extends lI{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const s=r?`${r}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Tp=new RegExp("[,()]");var ar=class extends uI{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Tp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&Tp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},cI=class{constructor(e,{headers:t={},schema:n,fetch:i,urlLengthLimit:r=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i,this.urlLengthLimit=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:i}=t??{},r=n?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),i&&l.append("Prefer",`count=${i}`),new ar({method:r,url:o,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const r="POST",{url:s,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new ar({method:r,url:s,headers:a,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),i&&l.append("Prefer",`count=${i}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);o.searchParams.set("columns",h.join(","))}}return new ar({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const i="PATCH",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new ar({method:i,url:r,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:i,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new ar({method:n,url:i,headers:r,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function oa(e){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(e)}function dI(e,t){if(oa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(oa(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fI(e){var t=dI(e,"string");return oa(t)=="symbol"?t:t+""}function hI(e,t,n){return(t=fI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ep(Object(n),!0).forEach(function(i){hI(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var mI=class vb{constructor(t,{headers:n={},schema:i,fetch:r,timeout:s,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.urlLengthLimit=a;const o=r??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,c)=>{const h=new AbortController,p=setTimeout(()=>h.abort(),s),m=c==null?void 0:c.signal;if(m){if(m.aborted)return clearTimeout(p),o(l,c);const g=()=>{clearTimeout(p),h.abort()};return m.addEventListener("abort",g,{once:!0}),o(l,to(to({},c),{},{signal:h.signal})).finally(()=>{clearTimeout(p),m.removeEventListener("abort",g)})}return o(l,to(to({},c),{},{signal:h.signal})).finally(()=>clearTimeout(p))}:this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cI(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new vb(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:i=!1,get:r=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;const h=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(h)),p=i&&Object.values(n).some(h);p?(o="POST",c=n):i||r?(o=i?"HEAD":"GET",Object.entries(n).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{l.searchParams.append(g,v)})):(o="POST",c=n);const m=new Headers(this.headers);return p?m.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&m.set("Prefer",`count=${s}`),new ar({method:o,url:l,headers:m,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};class pI{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const r=i.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const gI="2.94.0",vI=`realtime-js/${gI}`,yI="1.0.0",yb="2.0.0",Cp=yb,_d=1e4,xI=1e3,bI=100;var Vn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Vn||(Vn={}));var Ge;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ge||(Ge={}));var Jt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Jt||(Jt={}));var Sd;(function(e){e.websocket="websocket"})(Sd||(Sd={}));var ki;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ki||(ki={}));class wI{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,i){var r,s;const a=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",c=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+p.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,l.length),v.setUint8(b++,o.length),v.setUint8(b++,a.length),v.setUint8(b++,c.length),v.setUint8(b++,p.length),v.setUint8(b++,n),Array.from(l,y=>v.setUint8(b++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(b++,y.charCodeAt(0))),Array.from(a,y=>v.setUint8(b++,y.charCodeAt(0))),Array.from(c,y=>v.setUint8(b++,y.charCodeAt(0))),Array.from(p,y=>v.setUint8(b++,y.charCodeAt(0)));var _=new Uint8Array(g.byteLength+i.byteLength);return _.set(new Uint8Array(g),0),_.set(new Uint8Array(i),g.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[r,s,a,o,l]=i;return n({join_ref:r,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,r)}}_decodeUserBroadcast(t,n,i){const r=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=i.decode(t.slice(l,l+r));l=l+r;const h=i.decode(t.slice(l,l+s));l=l+s;const p=i.decode(t.slice(l,l+a));l=l+a;const m=t.slice(l,t.byteLength),g=o===this.JSON_ENCODING?JSON.parse(i.decode(m)):m,v={type:this.BROADCAST_EVENT,event:h,payload:g};return a>0&&(v.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class xb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xe||(xe={}));const Ap=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=_I(a,e,t,r),s),{}):{}},_I=(e,t,n,i)=>{const r=t.find(o=>o.name===e),s=r==null?void 0:r.type,a=n[e];return s&&!i.includes(s)?bb(s,a):Td(a)},bb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return CI(t,n)}switch(e){case xe.bool:return SI(t);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return TI(t);case xe.json:case xe.jsonb:return EI(t);case xe.timestamp:return AI(t);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return Td(t);default:return Td(t)}},Td=e=>e,SI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},TI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},EI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},CI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>bb(t,o))}return e},AI=e=>typeof e=="string"?e.replace(" ","T"):e,wb=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Xu{constructor(t,n,i={},r=_d){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kp||(kp={}));class qs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qs.syncState(this.state,r,s,a),this.pendingDiffs.forEach(l=>{this.state=qs.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=qs.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(c,h)=>{a[c]||(l[c]=h)}),this.map(a,(c,h)=>{const p=s[c];if(p){const m=h.map(_=>_.presence_ref),g=p.map(_=>_.presence_ref),v=h.filter(_=>g.indexOf(_.presence_ref)<0),b=p.filter(_=>m.indexOf(_.presence_ref)<0);v.length>0&&(o[c]=v),b.length>0&&(l[c]=b)}else o[c]=h}),this.syncDiff(s,{joins:o,leaves:l},i,r)}static syncDiff(t,n,i,r){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(o,l)=>{var c;const h=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),h.length>0){const p=t[o].map(g=>g.presence_ref),m=h.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...m)}i(o,h,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const h=l.map(p=>p.presence_ref);c=c.filter(p=>h.indexOf(p.presence_ref)<0),t[o]=c,r(o,c,l),c.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Np;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Np||(Np={}));var Vs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vs||(Vs={}));var yn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class Sr{constructor(t,n={config:{}},i){var r,s;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xu(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new xb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new qs(this),this.broadcastEndpointURL=wb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(g=>g.filter))!==null&&r!==void 0?r:[],h=!!this.bindings[Vs.PRESENCE]&&this.bindings[Vs.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(yn.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(yn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(yn.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,y=[];for(let x=0;x<_;x++){const w=b[x],{filter:{event:S,schema:E,table:A,filter:C}}=w,R=g&&g[x];if(R&&R.event===S&&Sr.isFilterValueEqual(R.schema,E)&&Sr.isFilterValueEqual(R.table,A)&&Sr.isFilterValueEqual(R.filter,C))y.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=Ge.errored,t==null||t(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(yn.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ge.errored,t==null||t(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Ge.joined&&t===Vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Xu(this,Jt.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),a}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Xu(this,t,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:h}=Jt;if(i&&[o,l,c,h].indexOf(a)>=0&&i!==this._joinRef())return;let m=this._onMessage(a,n,i);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var v,b,_;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(b=g.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(g=>g.callback(m,i)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,b,_,y,x,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const S=g.id,E=(v=g.filter)===null||v===void 0?void 0:v.event;return S&&((b=n.ids)===null||b===void 0?void 0:b.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const S=(x=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:b,table:_,commit_timestamp:y,type:x,errors:w}=v;m=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:y,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(v))}g.callback(m,i)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Sr.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jt.close,{},t)}_onError(t){this._on(Jt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ap(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ap(t.columns,t.old_record)),n}}const Qu=()=>{},no={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kI=[1e3,2e3,5e3,1e4],NI=1e4,RI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class II{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_d,this.transport=null,this.heartbeatIntervalMs=no.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qu,this.ref=0,this.reconnectTimer=null,this.vsn=Cp,this.logger=Qu,this.conn=null,this.sendBuffer=[],this.serializer=new wI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Sd.websocket}`,this.httpEndpoint=wb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Vn.connecting:return ki.Connecting;case Vn.open:return ki.Open;case Vn.closing:return ki.Closing;default:return ki.Closed}}isConnected(){return this.connectionState()===ki.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new Sr(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:i,payload:r,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${i} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(xI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},no.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${i} ${r} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(r,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Vn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vn.open||this.conn.readyState===Vn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([RI],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:vI};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new xb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},no.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,r,s,a,o,l,c,h,p,m,g;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:_d,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:no.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Qu,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Cp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:v=>kI[v-1]||NI,this.vsn){case yI:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(v,b)=>b(JSON.stringify(v)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(v,b)=>b(JSON.parse(v));break;case yb:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var la=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function MI(e,t,n){const i=new URL(t,e);if(n)for(const[r,s]of Object.entries(n))s!==void 0&&i.searchParams.set(r,s);return i.toString()}async function DI(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function UI(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:r,body:s,headers:a}){const o=MI(e.baseUrl,i,r),l=await DI(e.auth),c=await t(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),h=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),m=p&&h?JSON.parse(h):h;if(!c.ok){const g=p?m:void 0,v=g==null?void 0:g.error;throw new la((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function io(e){return e.join("")}var LI=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:io(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${io(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${io(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${io(e.namespace)}`}),!0}catch(t){if(t instanceof la&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof la&&n.status===409)return;throw n}}};function Wi(e){return e.join("")}var OI=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof la&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof la&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},PI=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=UI({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new LI(this.client,t),this.tableOps=new OI(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Wl=class extends Error{constructor(e,t="storage",n,i){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function Xl(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ro=class extends Wl{constructor(e,t,n,i="storage"){super(e,i,t,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_b=class extends Wl{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const jI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ed=e=>{if(Array.isArray(e))return e.map(n=>Ed(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[r]=Ed(i)}),t},BI=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ua(e){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua(e)}function HI(e,t){if(ua(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(ua(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qI(e){var t=HI(e,"string");return ua(t)=="symbol"?t:t+""}function VI(e,t,n){return(t=qI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rp(Object(n),!0).forEach(function(i){VI(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rp(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const Ip=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},$I=async(e,t,n,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e,s=r.status||500;if(typeof r.json=="function")r.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new ro(Ip(a),s,o,i))}).catch(()=>{if(i==="vectors"){const a=s+"";t(new ro(r.statusText||`HTTP ${s} error`,s,a,i))}else{const a=s+"";t(new ro(r.statusText||`HTTP ${s} error`,s,a,i))}});else{const a=s+"";t(new ro(r.statusText||`HTTP ${s} error`,s,a,i))}}else t(new _b(Ip(e),e,i))},zI=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!i?z(z({},r),n):(GI(i)?(r.headers=z({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),z(z({},r),n))};async function vs(e,t,n,i,r,s,a){return new Promise((o,l)=>{e(n,zI(t,i,r,s)).then(c=>{if(!c.ok)throw c;if(i!=null&&i.noResolveJson)return c;if(a==="vectors"){const h=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!h||!h.includes("application/json"))return{}}return c.json()}).then(c=>o(c)).catch(c=>$I(c,l,i,a))})}function Sb(e="storage"){return{get:async(t,n,i,r)=>vs(t,"GET",n,i,r,void 0,e),post:async(t,n,i,r,s)=>vs(t,"POST",n,r,s,i,e),put:async(t,n,i,r,s)=>vs(t,"PUT",n,r,s,i,e),head:async(t,n,i,r)=>vs(t,"HEAD",n,z(z({},i),{},{noResolveJson:!0}),r,void 0,e),remove:async(t,n,i,r,s)=>vs(t,"DELETE",n,r,s,i,e)}}const FI=Sb("storage"),{get:ca,post:zt,put:Cd,head:JI,remove:ih}=FI,_t=Sb("vectors");var as=class{constructor(e,t={},n,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=jI(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xl(n))return{data:null,error:n};throw n}}},YI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xl(t))return{data:null,error:t};throw t}}};let Tb;Tb=Symbol.toStringTag;var KI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Tb]="BlobDownloadBuilder",this.promise=null}asStream(){return new YI(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xl(t))return{data:null,error:t};throw t}}};const WI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var XI=class extends as{constructor(e,t={},n,i){super(e,t,i,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,i){var r=this;return r.handleOperation(async()=>{let s;const a=z(z({},Mp),i);let o=z(z({},r.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",r.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",r.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=z(z({},o),i.headers));const c=r._removeEmptyFolders(t),h=r._getFinalPath(c),p=await(e=="PUT"?Cd:zt)(r.fetch,`${r.url}/object/${h}`,s,z({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:c,id:p.Id,fullPath:p.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var r=this;const s=r._removeEmptyFolders(e),a=r._getFinalPath(s),o=new URL(r.url+`/object/upload/sign/${a}`);return o.searchParams.set("token",t),r.handleOperation(async()=>{let l;const c=z({upsert:Mp.upsert},i),h=z(z({},r.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType),{path:s,fullPath:(await Cd(r.fetch,o.toString(),l,{headers:h})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e);const r=z({},n.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=await zt(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new Wl("No token returned by API");return{signedUrl:a.toString(),path:e,token:o}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;return i.handleOperation(async()=>await zt(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}))}async copy(e,t,n){var i=this;return i.handleOperation(async()=>({path:(await zt(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,t,n){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(e),s=await zt(i.fetch,`${i.url}/object/sign/${r}`,z({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${s.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var i=this;return i.handleOperation(async()=>{const r=await zt(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(a=>z(z({},a),{},{signedUrl:a.signedURL?encodeURI(`${i.url}${a.signedURL}${s}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),r=i?`?${i}`:"",s=this._getFinalPath(e),a=()=>ca(this.fetch,`${this.url}/${n}/${s}${r}`,{headers:this.headers,noResolveJson:!0});return new KI(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Ed(await ca(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await JI(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Xl(i)&&i instanceof _b){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&i.push(a);let o=i.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var i=this;return i.handleOperation(async()=>{const r=z(z(z({},WI),t),{},{prefix:e||""});return await zt(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const i=z({},e);return await zt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const QI="2.94.0",Na={"X-Client-Info":`storage-js/${QI}`};var ZI=class extends as{constructor(e,t={},n,i){const r=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const s=r.href.replace(/\/$/,""),a=z(z({},Na),t);super(s,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await ca(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ca(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await zt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Cd(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await zt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},eM=class extends as{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=z(z({},Na),t);super(i,r,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await zt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),r=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await ca(t.fetch,r,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!BI(e))throw new Wl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new PI({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(r,s){const a=r[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(r,o),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}}}})}},tM=class extends as{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=z(z({},Na),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await _t.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await _t.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},nM=class extends as{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=z(z({},Na),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},iM=class extends as{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=z(z({},Na),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await _t.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},rM=class extends iM{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new sM(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},sM=class extends tM{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new aM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},aM=class extends nM{constructor(e,t,n,i,r){super(e,t,r),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,z(z({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},oM=class extends ZI{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new XI(this.url,this.headers,e,this.fetch)}get vectors(){return new rM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eM(this.url+"/iceberg",this.headers,this.fetch)}};const Eb="2.94.0",or=30*1e3,Ad=3,Zu=Ad*or,lM="http://localhost:9999",uM="supabase.auth.token",cM={"X-Client-Info":`gotrue-js/${Eb}`},kd="X-Supabase-Api-Version",Cb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fM=10*60*1e3;class da extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function B(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class hM extends da{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function mM(e){return B(e)&&e.name==="AuthApiError"}class Ni extends da{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class jn extends da{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class yt extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ec(e){return B(e)&&e.name==="AuthSessionMissingError"}class Xi extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class so extends jn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ao extends jn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pM(e){return B(e)&&e.name==="AuthImplicitGrantRedirectError"}class Dp extends jn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gM extends jn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Nd extends jn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function tc(e){return B(e)&&e.name==="AuthRetryableFetchError"}class Up extends jn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Rd extends jn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lp=` 	
\r=`.split(""),vM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lp.length;t+=1)e[Lp[t].charCodeAt(0)]=-2;for(let t=0;t<pl.length;t+=1)e[pl[t].charCodeAt(0)]=t;return e})();function Op(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(pl[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(pl[i]),t.queuedBits-=6}}function Ab(e,t,n){const i=vM[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Pp(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{bM(a,i,n)};for(let a=0;a<e.length;a+=1)Ab(e.charCodeAt(a),r,s);return t.join("")}function yM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function xM(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}yM(i,t)}}function bM(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Dr(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)Ab(e.charCodeAt(r),n,i);return new Uint8Array(t)}function wM(e){const t=[];return xM(e,n=>t.push(n)),new Uint8Array(t)}function Ri(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>Op(r,n,i)),Op(null,n,i),t.join("")}function _M(e){return Math.round(Date.now()/1e3)+e}function SM(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",xi={tested:!1,writable:!1},kb=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xi.tested)return xi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xi.tested=!0,xi.writable=!0}catch{xi.tested=!0,xi.writable=!1}return xi.writable};function TM(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{t[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const Nb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),EM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},bi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fe=async(e,t)=>{await e.removeItem(t)};class Ql{constructor(){this.promise=new Ql.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ql.promiseConstructor=Promise;function oo(e){const t=e.split(".");if(t.length!==3)throw new Rd("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!dM.test(t[i]))throw new Rd("JWT not in base64url format");return{header:JSON.parse(Pp(t[0])),payload:JSON.parse(Pp(t[1])),signature:Dr(t[2]),raw:{header:t[0],payload:t[1]}}}async function CM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AM(e,t){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){i(a);return}}catch(a){if(!t(s,a)){r(a);return}}})()})}function kM(e){return("0"+e.toString(16)).substr(-2)}function NM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,kM).join("")}async function RM(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function IM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await RM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qi(e,t,n=!1){const i=NM();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await lr(e,`${t}-code-verifier`,r);const s=await IM(i);return[s,i===s?"plain":"s256"]}const MM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DM(e){const t=e.headers.get(kd);if(!t||!t.match(MM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function UM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zi(e){if(!OM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function PM(e,t){return new Proxy(e,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,r)}})}function jp(e){return JSON.parse(JSON.stringify(e))}const Ai=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jM=[502,503,504];async function Gp(e){var t;if(!EM(e))throw new Nd(Ai(e),0);if(jM.includes(e.status))throw new Nd(Ai(e),e.status);let n;try{n=await e.json()}catch(s){throw new Ni(Ai(s),s)}let i;const r=DM(e);if(r&&r.getTime()>=Cb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Up(Ai(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new yt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Up(Ai(n),e.status,n.weak_password.reasons);throw new hM(Ai(n),e.status||500,i)}const GM=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function V(e,t,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[kd]||(s[kd]=Cb["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await BM(e,t,n+o,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function BM(e,t,n,i,r,s){const a=GM(t,i,r,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Nd(Ai(l),0)}if(o.ok||await Gp(o),i!=null&&i.noResolveJson)return o;try{return await o.json()}catch(l){await Gp(l)}}function $t(e){var t;let n=null;VM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=_M(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Bp(e){const t=$t(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function HM(e){return{data:e,error:null}}function qM(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=e,a=Kl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Hp(e){return e}function VM(e){return e.access_token&&e.refresh_token&&e.expires_in}const ic=["global","local","others"];class $M{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=Nb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ic[0]){if(ic.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ic.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(B(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yn})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Kl(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:qM,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(B(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yn})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Hp});if(h.error)throw h.error;const p=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(B(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Zi(t);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yn})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Zi(t);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Yn})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Zi(t);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yn})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Zi(t.userId);try{const{data:n,error:i}=await V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Zi(t.userId),Zi(t.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,r,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await V(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Hp});if(h.error)throw h.error;const p=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);c[`${_}Page`]=b}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(B(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await V(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await V(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(B(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await V(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}}function qp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const er={debug:!!(globalThis&&kb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zM extends Rb{}async function FM(e,t,n){er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(er.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function JM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ib(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function YM(e){return parseInt(e,16)}function KM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function WM(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:h,uri:p,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=Ib(e.address),v=h?`${h}://${i}`:i,b=e.statement?`${e.statement}
`:"",_=`${v} wants you to sign in with your Ethereum account:
${g}

${b}`;let y=`URI: ${p}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(r&&(y+=`
Expiration Time: ${r.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}y+=x}return`${_}
${y}`}class De extends Error{constructor({message:t,code:n,cause:i,name:r}){var s;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class gl extends De{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function XM({error:e,options:t}){var n,i,r;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new De({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new De({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new De({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new De({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new De({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new De({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new De({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new De({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(Mb(a)){if(s.rp.id!==a)return new De({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new De({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new De({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new De({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new De({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function QM({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new De({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new De({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Mb(i)){if(n.rpId!==i)return new De({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new De({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new De({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new De({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ZM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const eD=new ZM;function tD(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,r=Kl(e,["challenge","user","excludeCredentials"]),s=Dr(t).buffer,a=Object.assign(Object.assign({},n),{id:Dr(n.id).buffer}),o=Object.assign(Object.assign({},r),{challenge:s,user:a});if(i&&i.length>0){o.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Dr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function nD(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Kl(e,["challenge","allowCredentials"]),r=Dr(t).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Dr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function iD(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ri(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ri(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rD(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ri(new Uint8Array(r.authenticatorData)),clientDataJSON:Ri(new Uint8Array(r.clientDataJSON)),signature:Ri(new Uint8Array(r.signature)),userHandle:r.userHandle?Ri(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mb(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Vp(){var e,t;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function sD(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gl("Browser returned unexpected credential type",t)}:{data:null,error:new gl("Empty credential response",t)}}catch(t){return{data:null,error:XM({error:t,options:e})}}}async function aD(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gl("Browser returned unexpected credential type",t)}:{data:null,error:new gl("Empty credential response",t)}}catch(t){return{data:null,error:QM({error:t,options:e})}}}const oD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vl(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of e)if(r)for(const s in r){const a=r[s];if(a!==void 0)if(Array.isArray(a))i[s]=a;else if(n(a))i[s]=a;else if(t(a)){const o=i[s];t(o)?i[s]=vl(o,a):i[s]=vl(a)}else i[s]=a}return i}function uD(e,t){return vl(oD,e,t||{})}function cD(e,t){return vl(lD,e,t||{})}class dD{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:r},s){var a;try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=r??eD.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:h}=o.webauthn.credential_options.publicKey;if(!h.name){const p=i;if(p)h.name=`${h.id}:${p}`;else{const g=(await this.client.getUser()).data.user,v=((a=g==null?void 0:g.user_metadata)===null||a===void 0?void 0:a.name)||(g==null?void 0:g.email)||(g==null?void 0:g.id)||"User";h.name=`${h.id}:${v}`}}h.displayName||(h.displayName=h.name)}switch(o.webauthn.type){case"create":{const h=uD(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:p,error:m}=await sD({publicKey:h,signal:c});return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const h=cD(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:p,error:m}=await aD(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:h,signal:c}));return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(o){return B(o)?{data:null,error:o}:{data:null,error:new Ni("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!n)return{data:null,error:new da("rpId is required for WebAuthn authentication")};try{if(!Vp())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:i,credential_response:l.credential_response}})}catch(a){return B(a)?{data:null,error:a}:{data:null,error:new Ni("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!n)return{data:null,error:new da("rpId is required for WebAuthn registration")};try{if(!Vp())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return B(a)?{data:null,error:a}:{data:null,error:new Ni("Unexpected error in register",a)}}}}JM();const fD={url:lM,storageKey:uM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function $p(e,t,n){return await n()}const tr={};class fa{get jwks(){var t,n;return(n=(t=tr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){tr[this.storageKey]=Object.assign(Object.assign({},tr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=tr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tr[this.storageKey]=Object.assign(Object.assign({},tr[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},fD),t);if(this.storageKey=s.storageKey,this.instanceID=(n=fa.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,fa.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Je()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new $M({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Nb(s.fetch),this.lock=s.lock||$p,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Je()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=FM:this.lock=$p,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:kb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=qp(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Eb}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(Je()&&(n=TM(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Je()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),pM(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return B(n)?this._returnResult({error:n}):this._returnResult({error:new Ni("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:$t}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,i,r;try{let s;if("email"in t){const{email:h,password:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Qi(this.storage,this.storageKey)),s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:$t})}else if("phone"in t){const{phone:h,password:p,options:m}=t;s=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:$t})}else throw new so("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await Fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Bp})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Bp})}else throw new so("You must provide either an email or phone number and a password");const{data:i,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const s=new Xi;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,r,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,r,s,a,o,l,c,h,p,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:b,wallet:_,statement:y,options:x}=t;let w;if(Je())if(typeof _=="object")w=_;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const S=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),E=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=Ib(E[0]);let C=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!C){const k=await w.request({method:"eth_chainId"});C=YM(k)}const R={domain:S.host,address:A,statement:y,uri:S.href,version:"1",chainId:C,nonce:(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(a=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=WM(R),v=await w.request({method:"personal_sign",params:[KM(g),A]})}try{const{data:b,error:_}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:$t});if(_)throw _;if(!b||!b.session||!b.user){const y=new Xi;return this._returnResult({data:{user:null,session:null},error:y})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:_})}catch(b){if(B(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var n,i,r,s,a,o,l,c,h,p,m,g;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:_,wallet:y,statement:x,options:w}=t;let S;if(Je())if(typeof y=="object")S=y;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))S=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const A=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let C;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")C=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)C=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),b=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(r=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(h=w==null?void 0:w.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const A=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=A}}try{const{data:_,error:y}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ri(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:$t});if(y)throw y;if(!_||!_.session||!_.user){const x=new Xi;return this._returnResult({data:{user:null,session:null},error:x})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:y})}catch(_){if(B(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await bi(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new gM;const{data:s,error:a}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:$t});if(await Fe(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Xi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:s,nonce:a}=t,o=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:$t}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Xi;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,r,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Qi(this.storage,this.storageKey));const{error:p}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:h}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new so("You must provide either an email or phone number.")}catch(o){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,i;try{let r,s;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:o}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:$t});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var n,i,r,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Qi(this.storage,this.storageKey));const c=await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:HM});return!((s=c.data)===null||s===void 0)&&s.url&&Je()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new yt;const{error:r}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(t){if(B(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:s}=t,{error:a}=await V(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:i,type:r,options:s}=t,{data:a,error:o}=await V(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new so("You must provide either an email or phone number and a type")}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await bi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Zu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const a=await bi(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=nc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=PM(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yn}):await this._useSession(async n=>{var i,r,s;const{data:a,error:o}=n;if(o)throw o;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:Yn})})}catch(n){if(B(n))return ec(n)&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new yt;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Qi(this.storage,this.storageKey));const{data:c,error:h}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Yn});if(h)throw h;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yt;const n=Date.now()/1e3;let i=n,r=!0,s=null;const{payload:a}=oo(t.access_token);if(a.exp&&(i=a.exp,r=i<=n),r){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(B(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new yt;const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Je())throw new ao("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ao(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ao("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Dp("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new ao("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(o);let m=h+p;l&&(m=parseInt(l));const g=m-h;g*1e3<=or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const v=m-p;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,h);const{data:b,error:_}=await this._getUser(s);if(_)throw _;const y={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:p,expires_at:m,refresh_token:a,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(i){if(B(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await bi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s&&!ec(s))return this._returnResult({error:s});const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(mM(o)&&(o.status===404||o.status===401||o.status===403)||ec(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=SM(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:a}=n;if(a)throw a;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Qi(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:r}=await this._useSession(async s=>{var a,o,l,c,h;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return Je()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(B(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:s}}=n;if(r)throw r;const{options:a,provider:o,token:l,access_token:c,nonce:h}=t,p=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:o,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$t}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Xi}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(r){if(await Fe(this.storage,`${this.storageKey}-code-verifier`),B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:s,error:a}=n;if(a)throw a;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await AM(async r=>(r>0&&await CM(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$t})),(r,s)=>{const a=200*Math.pow(2,r);return s&&tc(s)&&Date.now()+a-i<or})}catch(i){if(this._debug(n,"error",i),B(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Je()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await bi(this.storage,this.storageKey);if(r&&this.userStorage){let a=await bi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await lr(this.userStorage,this.storageKey+"-user",a)),r.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:nc()}else if(r&&!r.user&&!r.user){const a=await bi(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await Fe(this.storage,this.storageKey+"-user"),await lr(this.storage,this.storageKey,r)):r.user=nc()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Zu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Zu}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),tc(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(r.access_token);!o&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ql;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new yt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),B(s)){const a={data:null,error:s};return tc(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await lr(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const s=jp(r);await lr(this.storage,this.storageKey,s)}else{const r=jp(n);await lr(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fe(this.storage,this.storageKey),await Fe(this.storage,this.storageKey+"-code-verifier"),await Fe(this.storage,this.storageKey+"-user"),this.userStorage&&await Fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),or);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${or}ms, refresh threshold is ${Ad} ticks`),r<=Ad&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,a]=await Qi(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?this._returnResult({data:null,error:s}):await V(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await V(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?iD(t.webauthn.credential_response):rD(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:tD(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:nD(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,i,r,s;if(t)try{const{payload:g}=oo(t);let v=null;g.aal&&(v=g.aal);let b=v;const{data:{user:_},error:y}=await this.getUser(t);if(y)return this._returnResult({data:null,error:y});((i=(n=_==null?void 0:_.factors)===null||n===void 0?void 0:n.filter(S=>S.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(b="aal2");const w=g.amr||[];return{data:{currentLevel:v,nextLevel:b,currentAuthenticationMethods:w},error:null}}catch(g){if(B(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:a},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=oo(a.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const m=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await V(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new yt})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new yt});const a=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Je()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(B(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new yt});const a=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Je()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(B(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await V(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new yt})})}catch(t){if(B(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?(await V(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yt})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(o=>o.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(o=>o.kid===t),i&&this.jwks_cached_at+fM>r)return i;const{data:s,error:a}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(o=>o.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});i=g.session.access_token}const{header:r,payload:s,signature:a,raw:{header:o,payload:l}}=oo(i);n!=null&&n.allowExpired||UM(s.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:s,header:r,signature:a},error:null}}const h=LM(r.alg),p=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,wM(`${o}.${l}`)))throw new Rd("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(i){if(B(i))return this._returnResult({data:null,error:i});throw i}}}fa.nextInstanceID={};const hD=fa,mD="2.94.0";let As="";typeof Deno<"u"?As="deno":typeof document<"u"?As="web":typeof navigator<"u"&&navigator.product==="ReactNative"?As="react-native":As="node";const pD={"X-Client-Info":`supabase-js-${As}/${mD}`},gD={headers:pD},vD={schema:"public"},yD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xD={};function ha(e){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(e)}function bD(e,t){if(ha(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(ha(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wD(e){var t=bD(e,"string");return ha(t)=="symbol"?t:t+""}function _D(e,t,n){return(t=wD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zp(Object(n),!0).forEach(function(i){_D(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const SD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),TD=()=>Headers,ED=(e,t,n)=>{const i=SD(n),r=TD();return async(s,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,ke(ke({},a),{},{headers:c}))}};function CD(e){return e.endsWith("/")?e:e+"/"}function AD(e,t){var n,i;const{db:r,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:h,global:p}=t,m={db:ke(ke({},l),r),auth:ke(ke({},c),s),realtime:ke(ke({},h),a),storage:{},global:ke(ke(ke({},p),o),{},{headers:ke(ke({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(i=o==null?void 0:o.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function kD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ND=class extends hD{constructor(e){super(e)}},RD=class{constructor(e,t,n){var i,r;this.supabaseUrl=e,this.supabaseKey=t;const s=kD(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:vD,realtime:xD,auth:ke(ke({},yD),{},{storageKey:a}),global:gD},l=AD(n??{},o);if(this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=ED(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new mI(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new oM(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new aI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},h,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ND({url:this.authUrl.href,headers:ke(ke({},m),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,flowType:a,lock:o,debug:l,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new II(this.realtimeUrl.href,ke(ke({},e),{},{params:ke(ke({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ID=(e,t,n)=>new RD(e,t,n);function MD(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}MD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DD="https://vteqdozrlxvcahsxvgzz.supabase.co",UD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0ZXFkb3pybHh2Y2Foc3h2Z3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwOTkzMTgsImV4cCI6MjA4NTY3NTMxOH0.nOv7l98XCOMZ0FuPk2ce4YkToTz333xoQIDgqLmKLBE",LD=!0,ge=ID(DD,UD),Db=T.createContext(void 0),OD=({children:e})=>{const[t,n]=T.useState(null),[i,r]=T.useState(!0);T.useEffect(()=>{ge.auth.getSession().then(({data:{session:p}})=>{p!=null&&p.user?s(p.user):r(!1)});const{data:{subscription:h}}=ge.auth.onAuthStateChange((p,m)=>{m!=null&&m.user?s(m.user):(n(null),r(!1))});return()=>h.unsubscribe()},[]);const s=async h=>{var p;try{const{data:m}=await ge.from("profiles").select("*").eq("id",h.id).single();n({username:(m==null?void 0:m.username)||((p=h.email)==null?void 0:p.split("@")[0]),role:"user",employeeId:h.id,department:m==null?void 0:m.department})}catch(m){console.error("Error mapping user",m)}finally{r(!1)}},a=async(h,p)=>{const{error:m}=await ge.auth.signInWithPassword({email:h,password:p});if(m)throw m},o=async(h,p,m,g)=>{const{error:v}=await ge.auth.signUp({email:h,password:p,options:{data:{full_name:m,avatar_url:`https://ui-avatars.com/api/?name=${encodeURIComponent(m)}&background=random`,department:g}}});if(v)throw v},l=async()=>{await ge.auth.signOut(),n(null)},c=async h=>{t&&(n({...t,...h}),h.username&&LD&&await ge.from("profiles").update({username:h.username}).eq("id",t.employeeId))};return f.jsx(Db.Provider,{value:{user:t,loading:i,login:a,signup:o,logout:l,updateUser:c},children:e})},Zl=()=>{const e=T.useContext(Db);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},rh=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),PD={success:{icon:rh,color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/50",border:"border-emerald-200 dark:border-emerald-700"},error:{icon:pi,color:"text-red-500",bg:"bg-red-50 dark:bg-red-900/50",border:"border-red-200 dark:border-red-700"}},jD=({message:e,type:t,onClose:n})=>{const[i,r]=T.useState(!1),s=PD[t],a=s.icon;T.useEffect(()=>{r(!0);const l=setTimeout(()=>{o()},4e3);return()=>clearTimeout(l)},[]);const o=()=>{r(!1),setTimeout(n,300)};return f.jsxs("div",{role:"alert","aria-live":"assertive",className:`fixed bottom-5 right-5 z-50 w-full max-w-sm rounded-lg shadow-lg border p-4 flex items-start transition-all duration-300 ease-in-out ${s.bg} ${s.border} ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[f.jsx("div",{className:`flex-shrink-0 ${s.color}`,children:f.jsx(a,{className:"w-6 h-6"})}),f.jsx("div",{className:"ml-3 flex-1",children:f.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:e})}),f.jsx("div",{className:"ml-4 flex-shrink-0",children:f.jsx("button",{onClick:o,className:"inline-flex rounded-md p-1.5 text-slate-500 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors","aria-label":"Dismiss notification",children:f.jsx(pi,{className:"h-5 w-5"})})})]})},Ub=T.createContext(void 0),GD=({children:e})=>{const[t,n]=T.useState(null),i=T.useCallback((s,a="success")=>{const o={id:Date.now(),message:s,type:a};n(o)},[]),r=()=>{n(null)};return f.jsxs(Ub.Provider,{value:{showNotification:i},children:[e,t&&f.jsx(jD,{message:t.message,type:t.type,onClose:r},t.id)]})},Lb=()=>{const e=T.useContext(Ub);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e},Fp=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Jp=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})}),rc=[{icon:f.jsx(Yt,{className:"w-10 h-10 text-white"}),title:"AI-Powered Precision",content:"Automatically break down complex projects into manageable daily tasks.",accent:"bg-primary-500/80"},{icon:f.jsx(Bl,{className:"w-10 h-10 text-white"}),title:"Visual Workflow",content:"Kanban and Calendar views designed for clarity and team alignment.",accent:"bg-primary-600/80"},{icon:f.jsx(ns,{className:"w-10 h-10 text-white"}),title:"Deep Analytics",content:"Track time and generate AI summaries of your team's weekly wins.",accent:"bg-primary-400/80"}],Yp=()=>{var D,H;const e=jl(),t=Zt(),n=t.pathname==="/signup",[i,r]=T.useState(!n),[s,a]=T.useState(0),[o,l]=T.useState(""),[c,h]=T.useState(""),[p,m]=T.useState(""),[g,v]=T.useState("AIE"),[b,_]=T.useState(""),[y,x]=T.useState(null),[w,S]=T.useState(!1),[E,A]=T.useState(!1),[C,R]=T.useState(!1),{user:k,loading:M,login:G,signup:Y}=Zl(),{showNotification:q}=Lb();if(T.useEffect(()=>{r(!n)},[n]),T.useEffect(()=>{const U=setInterval(()=>{a(K=>(K+1)%rc.length)},6e3);return()=>clearInterval(U)},[]),!M&&k){const U=((H=(D=t.state)==null?void 0:D.from)==null?void 0:H.pathname)||"/app/list";return f.jsx(al,{to:U,replace:!0})}const se=async U=>{var K,ce;if(U.preventDefault(),x(null),!i&&c!==b){x("Passwords do not match");return}S(!0);try{if(i){await G(o,c);const Ze=((ce=(K=t.state)==null?void 0:K.from)==null?void 0:ce.pathname)||"/app/list";e(Ze,{replace:!0})}else await Y(o,c,p,g),q("Account created! Please sign in (check email if confirmation is enabled).","success"),e("/login"),h(""),_("")}catch(Ze){x(Ze instanceof Error?Ze.message:"An unknown error occurred")}finally{S(!1)}},ye=()=>{x(null),e(i?"/signup":"/login")};return f.jsxs("div",{className:"min-h-screen relative flex items-center justify-center p-4",children:[f.jsxs("div",{className:"relative z-10 w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[f.jsxs("div",{className:"hidden lg:flex flex-col justify-center space-y-12 p-8 animate-fade-in",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-3 bg-neutral-900 dark:bg-white rounded-2xl shadow-xl",children:f.jsx(Yt,{className:"w-7 h-7 text-white dark:text-neutral-900"})}),f.jsx("span",{className:"text-2xl font-semibold text-neutral-900 dark:text-white tracking-tight",children:"TaskFlow"})]}),f.jsx("div",{className:"relative h-[300px]",children:rc.map((U,K)=>f.jsxs("div",{className:`absolute inset-0 transition-all duration-700 ease-out transform ${s===K?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-98 pointer-events-none"}`,children:[f.jsx("div",{className:"inline-flex p-4 bg-neutral-100 dark:bg-neutral-800 rounded-2xl mb-8",children:f.jsx("div",{className:"text-neutral-900 dark:text-white",children:U.icon})}),f.jsx("h2",{className:"text-5xl font-bold text-neutral-900 dark:text-white mb-6 leading-[1.1] tracking-tight",children:U.title}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xl leading-relaxed max-w-md",children:U.content})]},K))}),f.jsx("div",{className:"flex gap-3",children:rc.map((U,K)=>f.jsx("button",{onClick:()=>a(K),className:`h-1 rounded-full transition-all duration-500 ease-out ${s===K?"w-12 bg-neutral-900 dark:bg-white":"w-3 bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600"}`},K))})]}),f.jsx("div",{className:"flex justify-center animate-fade-in-up",children:f.jsxs("div",{className:"w-full max-w-md bg-white/90 dark:bg-neutral-900/90 backdrop-blur-2xl rounded-3xl p-10 lg:p-12 border border-neutral-200/50 dark:border-neutral-800/50 shadow-2xl shadow-neutral-900/5 dark:shadow-black/20",children:[f.jsxs("div",{className:"lg:hidden flex items-center gap-3 mb-10",children:[f.jsx("div",{className:"p-2 bg-neutral-900 dark:bg-white rounded-xl",children:f.jsx(Yt,{className:"w-5 h-5 text-white dark:text-neutral-900"})}),f.jsx("span",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"TaskFlow"})]}),f.jsxs("div",{className:"mb-10",children:[f.jsx("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:i?"Welcome back":"Create account"}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-base",children:i?"Enter your credentials to continue.":"Start your journey with TaskFlow."})]}),f.jsxs("form",{onSubmit:se,className:"space-y-5",children:[!i&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 ml-1",children:"Full Name"}),f.jsxs("div",{className:"relative group",children:[f.jsx(ol,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsx("input",{type:"text",required:!0,value:p,onChange:U=>m(U.target.value),className:"w-full bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-3.5 pl-12 pr-4 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 transition-all duration-300",placeholder:"Jane Doe"})]})]}),!i&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 ml-1",children:"Department"}),f.jsxs("div",{className:"relative group",children:[f.jsx(Bl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsxs("select",{value:g,onChange:U=>v(U.target.value),className:"w-full bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-3.5 pl-12 pr-4 text-neutral-900 dark:text-white appearance-none focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 transition-all duration-300",children:[f.jsx("option",{value:"AIE",children:"AIE"}),f.jsx("option",{value:"Admin",children:"Admin"}),f.jsx("option",{value:"Marketing",children:"Marketing"}),f.jsx("option",{value:"Production",children:"Production"})]}),f.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-neutral-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 ml-1",children:"Email"}),f.jsxs("div",{className:"relative group",children:[f.jsx(ol,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsx("input",{type:"email",required:!0,value:o,onChange:U=>l(U.target.value),className:"w-full bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-3.5 pl-12 pr-4 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 transition-all duration-300",placeholder:"name@company.com"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 ml-1",children:"Password"}),f.jsxs("div",{className:"relative group",children:[f.jsx(ll,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsx("input",{type:E?"text":"password",required:!0,value:c,onChange:U=>h(U.target.value),className:"w-full bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-3.5 pl-12 pr-12 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 transition-all duration-300",placeholder:""}),f.jsx("button",{type:"button",onClick:()=>A(!E),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors duration-200",children:E?f.jsx(Jp,{className:"w-5 h-5"}):f.jsx(Fp,{className:"w-5 h-5"})})]})]}),!i&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 ml-1",children:"Confirm Password"}),f.jsxs("div",{className:"relative group",children:[f.jsx(ll,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400 dark:text-neutral-500 transition-colors group-focus-within:text-neutral-900 dark:group-focus-within:text-white"}),f.jsx("input",{type:C?"text":"password",required:!0,value:b,onChange:U=>_(U.target.value),className:"w-full bg-neutral-100/80 dark:bg-neutral-800/50 border border-neutral-200/50 dark:border-neutral-700/50 rounded-xl py-3.5 pl-12 pr-12 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-900/10 dark:focus:ring-white/10 transition-all duration-300",placeholder:""}),f.jsx("button",{type:"button",onClick:()=>R(!C),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors duration-200",children:C?f.jsx(Jp,{className:"w-5 h-5"}):f.jsx(Fp,{className:"w-5 h-5"})})]})]}),y&&f.jsx("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-500/10 border border-red-200/50 dark:border-red-500/20 text-red-600 dark:text-red-400 text-sm font-medium",children:y}),f.jsx("button",{type:"submit",disabled:w,className:"w-full py-4 px-6 bg-neutral-900 dark:bg-white hover:bg-neutral-800 dark:hover:bg-neutral-100 text-white dark:text-neutral-900 font-semibold rounded-xl shadow-lg shadow-neutral-900/20 dark:shadow-white/10 transition-all duration-300 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:w?"Processing...":i?"Sign In":"Create Account"})]}),f.jsx("div",{className:"mt-8 text-center",children:f.jsx("button",{onClick:ye,className:"text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white transition-colors duration-300 text-sm font-medium",children:i?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})]}),f.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-neutral-400 dark:text-neutral-600 text-xs font-medium tracking-wide",children:"TaskFlow"})]})},sc={[J.TODO]:{color:"#fb923c",name:"To Do"},[J.IN_PROGRESS]:{color:"#6366f1",name:"In Progress"},[J.DONE]:{color:"#10b981",name:"Done"}},BD=({tasks:e})=>{const t=e.length,n={[J.TODO]:e.filter(s=>s.status===J.TODO).length,[J.IN_PROGRESS]:e.filter(s=>s.status===J.IN_PROGRESS).length,[J.DONE]:e.filter(s=>s.status===J.DONE).length};if(t===0)return f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 text-xs",children:[f.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-slate-200 dark:border-slate-800 mb-2 opacity-50"}),"No task data available"]});let i=0;const r=Object.keys(sc).map(s=>{const a=n[s]/t*100;if(a===0)return null;const o=i/100*360;i+=a;const l=i/100*360,c=50+40*Math.cos(o*Math.PI/180),h=50+40*Math.sin(o*Math.PI/180),p=50+40*Math.cos(l*Math.PI/180),m=50+40*Math.sin(l*Math.PI/180),g=a>50?1:0;return{path:a===100?"M 50, 50 m -40, 0 a 40,40 0 1,0 80,0 a 40,40 0 1,0 -80,0":`M 50,50 L ${c},${h} A 40,40 0 ${g},1 ${p},${m} Z`,color:sc[s].color,status:s,percentage:a.toFixed(0),count:n[s]}}).filter(Boolean);return f.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[f.jsxs("div",{className:"relative w-40 h-40 mb-6 drop-shadow-2xl",children:[f.jsx("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90",children:r.map(s=>f.jsx("path",{d:s.path,fill:s.color,className:"hover:opacity-80 transition-opacity cursor-pointer stroke-slate-50 dark:stroke-slate-900 stroke-2"},s.status))}),f.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[f.jsx("span",{className:"text-3xl font-black text-slate-800 dark:text-white",children:t}),f.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold",children:"Tasks"})]})]}),f.jsx("div",{className:"w-full space-y-2 px-2",children:r.map(s=>f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}}),f.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:sc[s.status].name})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("span",{className:"text-slate-500",children:[s.percentage,"%"]}),f.jsx("span",{className:"text-slate-800 dark:text-white font-bold w-4 text-right",children:s.count})]})]},s.status))})]})},HD=({tasks:e,employees:t})=>{const n=t.map(r=>({...r,taskCount:e.filter(s=>s.assigneeId===r.id).length})),i=Math.max(...n.map(r=>r.taskCount),1);return f.jsx("div",{className:"w-full space-y-3",children:n.map(r=>f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-8 h-8 rounded-lg border border-slate-200 dark:border-white/10 flex-shrink-0",title:r.name}),f.jsx("div",{className:"flex-grow bg-slate-100 dark:bg-slate-800 rounded-full h-6 overflow-hidden",children:f.jsx("div",{className:"bg-primary-500 h-6 rounded-full flex items-center justify-end px-2 transition-all duration-500",style:{width:`${r.taskCount/i*100}%`},children:f.jsx("span",{className:"text-xs font-bold text-white",children:r.taskCount})})})]},r.id))})},qD=({tasks:e})=>{const t=e.filter(s=>s.status!==J.DONE),n={[W.URGENT]:t.filter(s=>s.priority===W.URGENT).length,[W.HIGH]:t.filter(s=>s.priority===W.HIGH).length,[W.MEDIUM]:t.filter(s=>s.priority===W.MEDIUM).length,[W.LOW]:t.filter(s=>s.priority===W.LOW).length},i=Math.max(...Object.values(n),1),r=[{label:W.URGENT,color:"bg-red-500",count:n[W.URGENT]},{label:W.HIGH,color:"bg-orange-500",count:n[W.HIGH]},{label:W.MEDIUM,color:"bg-indigo-500",count:n[W.MEDIUM]},{label:W.LOW,color:"bg-slate-500",count:n[W.LOW]}];return f.jsxs("div",{className:"space-y-4",children:[r.map(s=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:[f.jsx("span",{children:s.label}),f.jsx("span",{children:s.count})]}),f.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-2 overflow-hidden",children:f.jsx("div",{className:`h-full rounded-full ${s.color} transition-all duration-500`,style:{width:`${s.count/i*100}%`}})})]},s.label)),t.length===0&&f.jsx("p",{className:"text-center text-xs text-slate-500 mt-4",children:"No active tasks to analyze."})]})},VD=({tasks:e})=>{const t=T.useMemo(()=>Array.from({length:7},(s,a)=>{const o=new Date;return o.setDate(o.getDate()-(6-a)),o}).map(s=>{const a=s.toISOString().split("T")[0],o=e.filter(l=>l.status===J.DONE&&l.completedAt&&l.completedAt.startsWith(a)).length;return{date:s.toLocaleDateString("en-US",{weekday:"short"}),count:o}}),[e]),n=Math.max(...t.map(r=>r.count),5),i=t.map((r,s)=>{const a=s/(t.length-1)*100,o=100-r.count/n*100;return`${a},${o}`}).join(" ");return f.jsxs("div",{className:"w-full h-48 flex flex-col justify-end",children:[f.jsxs("div",{className:"relative h-40 w-full",children:[f.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[0,.5,1].map(r=>f.jsx("div",{className:"border-b border-slate-200 dark:border-white/5 w-full h-px"},r))}),f.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.5",className:"text-primary-400"}),f.jsx("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0",className:"text-primary-400"})]})}),f.jsx("path",{d:`M 0,100 ${i.split(" ").map((r,s)=>`L ${r}`).join(" ")} L 100,100 Z`,fill:"url(#chartGradient)",className:"text-primary-400"}),f.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"2",points:i,vectorEffect:"non-scaling-stroke",className:"text-primary-500"}),t.map((r,s)=>f.jsx("circle",{cx:`${s/(t.length-1)*100}%`,cy:`${100-r.count/n*100}%`,r:"3",className:"fill-primary-500 stroke-white dark:stroke-slate-900 stroke-2"},s))]})]}),f.jsx("div",{className:"flex justify-between mt-2 text-[10px] text-slate-500 font-medium uppercase tracking-wider",children:t.map(r=>f.jsx("span",{children:r.date},r.date))})]})},sh=e=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...e,children:[f.jsx("path",{d:"M4 3a1 1 0 011-1h6a1 1 0 011 1v5a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"}),f.jsx("path",{d:"M4 3v14a1 1 0 01-2 0V3a1 1 0 012 0z"})]}),ys=({title:e,children:t,className:n="",action:i})=>f.jsxs("div",{className:`bg-white/60 dark:bg-slate-900/40 backdrop-blur-md border border-slate-200 dark:border-white/5 rounded-2xl p-6 flex flex-col shadow-sm dark:shadow-none ${n}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-widest",children:e}),i]}),f.jsx("div",{className:"flex-1 min-h-0",children:t})]}),lo=({label:e,value:t,trend:n,icon:i,color:r})=>{const s=r||"text-slate-900 dark:text-white";return f.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-white/5 border border-slate-200 dark:border-white/5 flex items-center justify-between group hover:bg-slate-50 dark:hover:bg-white/10 transition-colors shadow-sm dark:shadow-none",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wider mb-1",children:e}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{className:`text-2xl font-black ${s}`,children:t}),n&&f.jsx("span",{className:"text-xs font-medium text-emerald-500 dark:text-emerald-400",children:n})]})]}),i&&f.jsx("div",{className:"p-3 bg-slate-100 dark:bg-white/5 rounded-lg text-slate-400 group-hover:text-primary-600 dark:group-hover:text-white transition-colors",children:i})]})},$D=e=>{const t=new Date,n=new Date(e),i=Math.floor((t.getTime()-n.getTime())/1e3);if(i<60)return"Just now";const r=Math.floor(i/60);if(r<60)return`${r}m ago`;const s=Math.floor(r/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},Kp=({tasks:e,employees:t,activityLogs:n})=>{const[i,r]=T.useState(""),[s,a]=T.useState(!1),o=e.length,l=e.filter(g=>g.status===J.DONE),c=o?Math.round(l.length/o*100):0,h=e.filter(g=>new Date(g.dueDate)<new Date&&g.status!==J.DONE),p="2.5 Days",m=async()=>{a(!0);try{const g=await Z2(e,t);r(g)}catch(g){console.error(g)}finally{a(!1)}};return f.jsxs("div",{className:"space-y-6 pb-12",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 mb-2",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:"Executive Dashboard"}),f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Real-time insights into project velocity and team performance."})]}),f.jsxs("div",{className:"text-right hidden md:block",children:[f.jsx("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Current Date"}),f.jsx("p",{className:"text-slate-700 dark:text-white font-mono",children:new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(lo,{label:"Total Tasks",value:o,icon:f.jsx(sh,{className:"w-6 h-6"})}),f.jsx(lo,{label:"Completion Rate",value:`${c}%`,icon:f.jsx(rh,{className:"w-6 h-6"}),color:c>80?"text-emerald-600 dark:text-emerald-400":"text-primary-600 dark:text-primary-400"}),f.jsx(lo,{label:"Overdue",value:h.length,icon:f.jsx(ns,{className:"w-6 h-6"}),color:h.length>0?"text-red-600 dark:text-red-400":"text-slate-400 dark:text-slate-200"}),f.jsx(lo,{label:"Avg Turnaround",value:p,icon:f.jsx(Yt,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(ys,{title:"Status Distribution",className:"h-80",children:f.jsx(BD,{tasks:e})}),f.jsx(ys,{title:"Priority Breakdown",className:"h-80",children:f.jsx(qD,{tasks:e})})]}),f.jsx(ys,{title:"Completion Velocity (Last 7 Days)",children:f.jsx(VD,{tasks:e})}),f.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-white dark:from-primary-900/40 dark:to-slate-900/40 border border-primary-200 dark:border-primary-500/20 rounded-2xl p-6 relative overflow-hidden group shadow-sm dark:shadow-none",children:[f.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:f.jsx(Yt,{className:"w-32 h-32 text-primary-400"})}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-500/20 rounded-lg",children:f.jsx(Yt,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),f.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"AI Executive Summary"})]}),i?f.jsxs("div",{className:"prose prose-sm max-w-none",children:[f.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300 leading-relaxed bg-white/50 dark:bg-black/20 p-4 rounded-xl border border-slate-200 dark:border-white/5",children:i}),f.jsx("button",{onClick:()=>r(""),className:"mt-4 text-xs text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-white font-bold uppercase tracking-wider",children:"Clear Summary"})]}):f.jsxs("div",{className:"text-center py-8",children:[f.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4 text-sm",children:"Generate a comprehensive natural-language report of this week's progress."}),f.jsx("button",{onClick:m,disabled:s,className:"px-5 py-2.5 bg-primary-600 hover:bg-primary-500 text-white text-sm font-bold rounded-xl shadow-lg shadow-primary-600/20 transition-all active:scale-95 disabled:opacity-50",children:s?"Analyzing Data...":"Generate Report"})]})]})]})]}),f.jsxs("div",{className:"space-y-6 flex flex-col",children:[f.jsx(ys,{title:"Team Workload",className:"min-h-[300px]",children:f.jsx(HD,{tasks:e,employees:t})}),f.jsx(ys,{title:"Recent Activity",className:"flex-1 min-h-[400px]",children:f.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 max-h-[400px] scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-white/10",children:[n.slice(0,15).map(g=>f.jsxs("div",{className:"flex gap-3 items-start group",children:[f.jsx("img",{src:g.user.avatarUrl,alt:"",className:"w-8 h-8 rounded-lg border border-slate-200 dark:border-white/10 mt-1"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:g.user.name}),f.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono",children:$D(g.timestamp)})]}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed group-hover:text-slate-700 dark:group-hover:text-slate-300 transition-colors",children:g.message})]})]},g.id)),n.length===0&&f.jsx("div",{className:"text-center py-10 text-slate-500 dark:text-slate-600 italic text-sm",children:"No activity recorded yet."})]})})]})]})]})},Wp={[W.URGENT]:{text:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/50"},[W.HIGH]:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-100 dark:bg-orange-900/50"},[W.MEDIUM]:{text:"text-primary-600 dark:text-primary-400",bg:"bg-primary-100 dark:bg-primary-900/50"},[W.LOW]:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-100 dark:bg-slate-700"}},ac=e=>{const t=Math.floor(e/1e3%60),n=Math.floor(e/(1e3*60)%60);return`${Math.floor(e/(1e3*60*60))}h ${n}m ${t}s`},zD=({isOpen:e,onClose:t,task:n,employees:i,allTasks:r,onAddComment:s,onUpdateTask:a,onToggleTimer:o})=>{const[l,c]=T.useState(""),{user:h}=Zl(),p=i.find(L=>L.id===n.assigneeId),m=i.find(L=>L.id===(h==null?void 0:h.employeeId)),g=n.blockedById?r.find(L=>L.id===n.blockedById):null,[v,b]=T.useState(""),[_,y]=T.useState(""),[x,w]=T.useState(!1),[S,E]=T.useState(null),[A,C]=T.useState(!1),[R,k]=T.useState(""),[M,G]=T.useState(!1),[Y,q]=T.useState(""),[se,ye]=T.useState(!1),[D,H]=T.useState(!1),[U,K]=T.useState(0);T.useEffect(()=>{if(e){const L=setTimeout(()=>C(!0),10),$=de=>{de.key==="Escape"&&t()};return document.addEventListener("keydown",$),()=>{clearTimeout(L),document.removeEventListener("keydown",$)}}else C(!1)},[e,t]),T.useEffect(()=>{e&&(b(""),y(""),E(null),k(""),q(""),ye(!1),H(!1))},[e]),T.useEffect(()=>{let L;if(n.timerStartTime){L=setInterval(()=>{const de=new Date(n.timerStartTime).getTime();K(Date.now()-de)},1e3);const $=new Date(n.timerStartTime).getTime();K(Date.now()-$)}else K(0);return()=>clearInterval(L)},[n.timerStartTime]);const ce=T.useMemo(()=>{const L=new Set(r.flatMap($=>$.tags||[]));return Array.from(L).sort()},[r]),Ze=T.useMemo(()=>{const L=n.tags||[];return ce.filter($=>!L.includes($)&&$.toLowerCase().includes(Y.toLowerCase()))},[ce,n.tags,Y]);if(!e)return null;const j=L=>{L.preventDefault(),l.trim()&&(s(n.id,l),c(""))},nt=async L=>{if(L.preventDefault(),!!v.trim()){w(!0),y(""),E(null);try{const $=await X2(n.title,n.description,v);y($)}catch($){E($ instanceof Error?$.message:"An unknown error occurred.")}finally{w(!1)}}},vt=L=>{if(L.preventDefault(),!R.trim())return;const $={id:`manual-${Date.now()}`,title:R,isCompleted:!1};a({...n,subtasks:[...n.subtasks||[],$]}),k("")},dn=L=>{const $=(n.subtasks||[]).map(de=>de.id===L?{...de,isCompleted:!de.isCompleted}:de);a({...n,subtasks:$})},tu=L=>{const $=(n.subtasks||[]).filter(de=>de.id!==L);a({...n,subtasks:$})},Ra=async()=>{G(!0);try{const $=(await eI(n.title,n.description)).map((de,ut)=>({id:`ai-${Date.now()}-${ut}`,title:de,isCompleted:!1}));a({...n,subtasks:[...n.subtasks||[],...$]})}catch(L){console.error("Failed to generate subtasks",L)}finally{G(!1)}},Ia=L=>{if(L.preventDefault(),!Y.trim())return;const $=n.tags||[];$.includes(Y.trim())||a({...n,tags:[...$,Y.trim()]}),q(""),ye(!1),H(!1)},nu=L=>{const $=n.tags||[];$.includes(L)||a({...n,tags:[...$,L]}),q(""),ye(!1),H(!1)},iu=L=>{const $=n.tags||[];a({...n,tags:$.filter(de=>de!==L)})},Gn=L=>{const $=new Date,de=new Date(L),ut=Math.floor(($.getTime()-de.getTime())/1e3);if(ut<60)return"Just now";const it=Math.floor(ut/60);if(it<60)return`${it}m ago`;const fn=Math.floor(it/60);return fn<24?`${fn}h ago`:`${Math.floor(fn/24)}d ago`},tn=(n.subtasks||[]).filter(L=>L.isCompleted).length,vi=(n.subtasks||[]).length,ru=vi===0?0:Math.round(tn/vi*100),Ma=(n.timeLogs||[]).reduce((L,$)=>L+$.duration,0),su=ac(Ma+(n.timerStartTime?U:0));return f.jsxs("div",{className:`fixed inset-0 z-50 flex justify-center items-center p-4 transition-all duration-300 ${A?"visible":"invisible"}`,role:"dialog","aria-modal":"true",children:[f.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${A?"opacity-60":"opacity-0"}`,onClick:t,"aria-hidden":"true"}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transition-all duration-300 relative z-10 transform ${A?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsxs("header",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center flex-shrink-0",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white truncate pr-4",children:n.title}),f.jsx("button",{onClick:t,className:"p-1 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white rounded-full flex-shrink-0",children:f.jsx(pi,{className:"w-6 h-6"})})]}),f.jsxs("main",{className:"p-6 overflow-y-auto flex-grow",children:[g&&f.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/40 border border-amber-200 dark:border-amber-700/50 rounded-lg p-3 flex items-center gap-3 mb-6",children:[f.jsx(ll,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["This task is blocked by: ",f.jsxs("span",{className:"font-semibold",children:['"',g.title,'"']})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[f.jsxs("div",{className:"flex items-center",children:[p&&f.jsx("img",{src:p.avatarUrl,alt:p.name,className:"w-8 h-8 rounded-full mr-3 border-2 border-white dark:border-slate-700"}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Assignee"}),f.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:(p==null?void 0:p.name)||"Unassigned"})]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Due Date"}),f.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:new Date(n.dueDate).toLocaleDateString()})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Created On"}),f.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:new Date(n.createdAt).toLocaleDateString()})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-1",children:"Priority"}),f.jsxs("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-sm font-medium ${Wp[n.priority].bg} ${Wp[n.priority].text}`,children:[f.jsx(sh,{className:"w-4 h-4"}),n.priority]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 block mb-2",children:"Tags"}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(n.tags||[]).map(L=>f.jsx(ql,{text:L,onRemove:()=>iu(L)},L)),se?f.jsxs("div",{className:"relative",children:[f.jsx("form",{onSubmit:Ia,className:"flex items-center",children:f.jsx("input",{type:"text",autoFocus:!0,value:Y,onChange:L=>q(L.target.value),onFocus:()=>H(!0),onBlur:()=>{setTimeout(()=>{Y||ye(!1),H(!1)},200)},className:"px-2 py-0.5 text-xs border border-slate-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"New tag..."})}),D&&Ze.length>0&&f.jsx("ul",{className:"absolute z-10 left-0 top-full mt-1 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-md shadow-lg max-h-40 overflow-y-auto w-40",children:Ze.map(L=>f.jsx("li",{onMouseDown:$=>{$.preventDefault(),nu(L)},className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-600 text-xs text-slate-700 dark:text-slate-200",children:L},L))})]}):f.jsxs("button",{onClick:()=>ye(!0),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 transition-colors",children:[f.jsx(Hi,{className:"w-3 h-3 mr-1"})," Add Tag"]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),f.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:n.description||"No description provided."})]}),f.jsxs("div",{className:"mb-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(ns,{className:`w-6 h-6 ${n.timerStartTime?"text-blue-600 dark:text-blue-400 animate-pulse":"text-slate-400"}`}),f.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Time Tracking"})]}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("div",{className:`text-6xl font-bold font-mono ${n.timerStartTime?"text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-300"}`,children:n.timerStartTime?ac(U):"0h 0m 0s"}),n.timerStartTime&&f.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2 animate-pulse font-medium",children:" Timer Running..."}),!n.timerStartTime&&Ma>0&&f.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:["Total logged: ",su]})]}),f.jsx("div",{className:"flex justify-center",children:f.jsx("button",{onClick:()=>o(n.id),className:`flex items-center justify-center gap-3 px-8 py-4 rounded-xl font-bold text-lg transition-all duration-200 transform hover:scale-105 shadow-lg ${n.timerStartTime?"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 shadow-red-500/50":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/50"}`,children:n.timerStartTime?f.jsxs(f.Fragment,{children:[f.jsx($f,{className:"w-6 h-6"})," Stop Timer"]}):f.jsxs(f.Fragment,{children:[f.jsx(Vf,{className:"w-6 h-6"})," Start Timer"]})})}),n.timeLogs&&n.timeLogs.length>0&&f.jsxs("div",{className:"mt-4 border-t border-slate-200 dark:border-slate-700 pt-3",children:[f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2 font-medium",children:"Session History"}),f.jsx("ul",{className:"space-y-1 max-h-32 overflow-y-auto",children:n.timeLogs.slice().reverse().map(L=>f.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex justify-between",children:[f.jsxs("span",{children:[new Date(L.startTime).toLocaleDateString()," ",new Date(L.startTime).toLocaleTimeString()]}),f.jsx("span",{className:"font-mono",children:ac(L.duration)})]},L.id))})]})]}),f.jsxs("div",{className:"mb-6 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsxs("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Subtasks (",tn,"/",vi,")"]}),f.jsxs("button",{onClick:Ra,disabled:M,className:"flex items-center text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 disabled:opacity-50",children:[f.jsx(Yt,{className:`w-4 h-4 mr-1 ${M?"animate-spin":""}`}),M?"Generating...":"Auto-Generate"]})]}),f.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-4",children:f.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:`${ru}%`}})}),f.jsx("ul",{className:"space-y-2 mb-3",children:(n.subtasks||[]).map(L=>f.jsxs("li",{className:"flex items-start group",children:[f.jsx("input",{type:"checkbox",checked:L.isCompleted,onChange:()=>dn(L.id),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded cursor-pointer"}),f.jsx("span",{className:`ml-2 text-sm flex-grow ${L.isCompleted?"text-slate-400 line-through":"text-slate-700 dark:text-slate-300"}`,children:L.title}),f.jsx("button",{onClick:()=>tu(L.id),className:"ml-2 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(sa,{className:"w-4 h-4"})})]},L.id))}),f.jsxs("form",{onSubmit:vt,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:R,onChange:L=>k(L.target.value),placeholder:"Add a new subtask...",className:"flex-grow text-sm px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),f.jsx("button",{type:"submit",disabled:!R.trim(),className:"p-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",children:f.jsx(Hi,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Yt,{className:"w-6 h-6 text-primary-500 dark:text-primary-400"}),f.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"AI Assistant"})]}),f.jsxs("form",{onSubmit:nt,className:"mb-4",children:[f.jsx("textarea",{value:v,onChange:L=>b(L.target.value),placeholder:"Ask AI for help with this task...",rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white resize-y"}),f.jsx("button",{type:"submit",className:"mt-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 w-full sm:w-auto",disabled:!v.trim()||x,children:x?"Thinking...":"Ask AI"})]}),x&&f.jsx("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:"Loading response..."}),S&&f.jsx("p",{className:"text-red-500 text-sm p-4 bg-red-50 dark:bg-red-900/30 rounded-md",children:S}),_&&f.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg whitespace-pre-wrap text-slate-600 dark:text-slate-300",children:_})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Activity"}),f.jsxs("div",{className:"space-y-4",children:[n.comments.map(L=>{const $=i.find(de=>de.id===L.authorId);return f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("img",{src:$==null?void 0:$.avatarUrl,alt:$==null?void 0:$.name,className:"w-8 h-8 rounded-full mt-1"}),f.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 rounded-lg px-3 py-2",children:[f.jsxs("div",{className:"flex items-baseline space-x-2",children:[f.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-100",children:$==null?void 0:$.name}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Gn(L.timestamp)})]}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:L.content})]})]},L.id)}),n.comments.length===0&&f.jsx("p",{className:"text-sm text-center text-slate-500 dark:text-slate-400 py-4",children:"No comments yet."})]})]})]}),f.jsx("footer",{className:"p-4 border-t bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 flex-shrink-0",children:f.jsxs("form",{onSubmit:j,className:"flex items-start space-x-3",children:[m&&f.jsx("img",{src:m.avatarUrl,alt:m.name,className:"w-8 h-8 rounded-full"}),f.jsx("textarea",{value:l,onChange:L=>c(L.target.value),placeholder:"Add a comment...",rows:1,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white resize-none"}),f.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",disabled:!l.trim(),children:"Send"})]})})]})]})},Ob=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),FD=({tasks:e,onViewTask:t})=>{const[n,i]=T.useState(new Date),r=new Date(n.getFullYear(),n.getMonth(),1),s=new Date(n.getFullYear(),n.getMonth()+1,0),a=new Date(r);a.setDate(a.getDate()-a.getDay());const o=new Date(s);o.setDate(o.getDate()+(6-o.getDay()));const l=[];let c=new Date(a);for(;c<=o;)l.push(new Date(c)),c.setDate(c.getDate()+1);const h={};e.forEach(g=>{const v=g.dueDate;h[v]||(h[v]=[]),h[v].push(g)});const p=g=>{i(new Date(n.getFullYear(),n.getMonth()+g,1))},m=g=>{const v=new Date;return g.getDate()===v.getDate()&&g.getMonth()===v.getMonth()&&g.getFullYear()===v.getFullYear()};return f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 border border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("button",{onClick:()=>p(-1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:f.jsx(Ob,{className:"w-6 h-6"})}),f.jsx("h2",{className:"text-xl font-bold",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>p(1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:f.jsx(zf,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"grid grid-cols-7 gap-px",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>f.jsx("div",{className:"text-center font-semibold text-sm text-slate-500 dark:text-slate-400 py-2",children:g},g))}),f.jsx("div",{className:"grid grid-cols-7 gap-px bg-slate-200 dark:bg-slate-700 border-t border-l border-slate-200 dark:border-slate-700",children:l.map(g=>{const v=g.toISOString().split("T")[0],b=h[v]||[],_=g.getMonth()===n.getMonth();return f.jsxs("div",{className:`p-2 h-32 overflow-y-auto ${_?"bg-white dark:bg-slate-800":"bg-slate-50 dark:bg-slate-800/50"}`,children:[f.jsx("span",{className:`text-sm font-semibold ${m(g)?"bg-indigo-600 text-white rounded-full flex items-center justify-center w-6 h-6":_?"text-slate-800 dark:text-slate-200":"text-slate-400 dark:text-slate-500"}`,children:g.getDate()}),f.jsx("div",{className:"mt-1 space-y-1",children:b.map(y=>f.jsx("div",{onClick:()=>t(y),className:"text-xs p-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-200 rounded truncate cursor-pointer hover:bg-indigo-200 dark:hover:bg-indigo-900",children:y.title},y.id))})]},g.toString())})})]})},Id=({isOpen:e,onClose:t,onConfirm:n,title:i,message:r,confirmText:s="Delete",cancelText:a="Cancel"})=>{const[o,l]=T.useState(!1),c=T.useRef(null);return T.useEffect(()=>{if(e){const h=setTimeout(()=>l(!0),10),p=setTimeout(()=>{var g;(g=c.current)==null||g.focus()},50),m=g=>{g.key==="Escape"&&t()};return document.addEventListener("keydown",m),()=>{clearTimeout(h),clearTimeout(p),document.removeEventListener("keydown",m)}}else l(!1)},[e,t]),e?f.jsxs("div",{className:`fixed inset-0 z-50 flex justify-center items-center p-4 transition-all duration-300 ${o?"visible":"invisible"}`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[f.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${o?"opacity-60":"opacity-0"}`,onClick:t,"aria-hidden":"true"}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6 relative z-10 transition-all duration-300 transform ${o?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"}`,children:[f.jsx("h2",{id:"modal-title",className:"text-xl font-bold mb-4 text-slate-800 dark:text-white",children:i}),f.jsx("p",{id:"modal-description",className:"text-slate-600 dark:text-slate-300 mb-6",children:r}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{ref:c,onClick:t,className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800",children:a}),f.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800",children:s})]})]})]}):null},Xp=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),JD=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-6.364-.386 1.591-1.591M3 12h2.25m.386-6.364 1.591 1.591M12 12a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"})}),YD=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})}),Qp={indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"}},KD=()=>{const[e,t]=T.useState(()=>{if(typeof window>"u")return"light";const o=localStorage.getItem("theme");return o==="dark"||o==="light"?o:"light"}),[n,i]=T.useState(()=>{if(typeof window>"u")return"indigo";const o=localStorage.getItem("colorScheme");return o&&Qp[o]?o:"indigo"}),r=T.useCallback(o=>{const l=Qp[o],c=document.documentElement;Object.entries(l).forEach(([h,p])=>{c.style.setProperty(`--primary-${h}`,p)})},[]);T.useEffect(()=>{r(n)},[]);const s=T.useCallback(()=>{t(o=>{const l=o==="light"?"dark":"light";return localStorage.setItem("theme",l),document.documentElement.classList.toggle("dark",l==="dark"),l})},[]),a=T.useCallback(o=>{i(o),localStorage.setItem("colorScheme",o),r(o)},[r]);return[e,s,n,a]},xs=({enabled:e,onChange:t})=>f.jsx("button",{type:"button",onClick:()=>t(!e),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${e?"bg-primary-600":"bg-slate-200 dark:bg-slate-700"}`,children:f.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})}),WD=({color:e,selected:t,onSelect:n})=>{const i={indigo:"bg-indigo-500",emerald:"bg-emerald-500",rose:"bg-rose-500",amber:"bg-amber-500",violet:"bg-violet-500",sky:"bg-sky-500"};return f.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${i[e]} ${t?"ring-4 ring-offset-2 ring-slate-300 dark:ring-slate-600 scale-110":"hover:scale-105"}`,title:e.charAt(0).toUpperCase()+e.slice(1),children:t&&f.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})},XD=({isOpen:e,onClose:t,user:n,currentUserEmployee:i,onSave:r,onLogout:s})=>{const[a,o]=T.useState("profile"),[l,c]=T.useState(!1),[h,p]=T.useState(""),[m,g]=T.useState(""),[v,b,_,y]=KD(),[x,w]=T.useState(!1),[S,E]=T.useState(!0),[A,C]=T.useState(!0),[R,k]=T.useState(!0);if(T.useEffect(()=>{if(e){i?(p(i.name),g(i.avatarUrl)):p(n.username);const q=setTimeout(()=>c(!0),10),se=ye=>{ye.key==="Escape"&&t()};return document.addEventListener("keydown",se),()=>{clearTimeout(q),document.removeEventListener("keydown",se)}}else c(!1),setTimeout(()=>o("profile"),300)},[e,t,n,i]),!e)return null;const M=q=>{q.preventDefault(),h.trim()&&r(h,m)},G=[{id:"profile",label:"My Profile",icon:ol},{id:"preferences",label:"Preferences",icon:Hl},{id:"notifications",label:"Notifications",icon:Xp}],Y=["indigo","emerald","rose","amber","violet","sky"];return f.jsxs("div",{className:`fixed inset-0 z-50 flex justify-center items-center p-4 transition-all duration-300 ${l?"visible":"invisible"}`,role:"dialog","aria-modal":"true",children:[f.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,onClick:t,"aria-hidden":"true"}),f.jsxs("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-4xl h-[600px] flex overflow-hidden relative z-10 transition-all duration-300 transform ${l?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsxs("div",{className:"w-64 bg-slate-50 dark:bg-slate-900/50 border-r border-slate-200 dark:border-slate-800 flex flex-col",children:[f.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Account"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Manage your info & settings"})]}),f.jsx("nav",{className:"flex-1 p-4 space-y-1",children:G.map(q=>{const se=q.icon;return f.jsxs("button",{onClick:()=>o(q.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${a===q.id?"bg-primary-50 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[f.jsx(se,{className:"w-5 h-5"}),q.label]},q.id)})}),f.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800",children:s&&f.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/10 transition-colors",children:[f.jsx(Sx,{className:"w-5 h-5"}),"Sign Out"]})})]}),f.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-slate-900 overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800 sticky top-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur z-10",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white capitalize",children:a.replace("-"," ")}),f.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:f.jsx(pi,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"p-8 max-w-2xl",children:[a==="profile"&&f.jsxs("form",{onSubmit:M,className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"relative group",children:[f.jsx("img",{src:m||"https://via.placeholder.com/150",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-slate-100 dark:border-slate-800 shadow-md",onError:q=>{q.target.src=`https://ui-avatars.com/api/?name=${h}&background=random`}}),f.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:f.jsx("span",{className:"text-white text-xs font-bold",children:"Change"})})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Profile Picture"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 mb-3",children:"Supports .jpg, .png, or direct image links."}),f.jsx("input",{type:"text",value:m,onChange:q=>g(q.target.value),placeholder:"https://...",className:"w-full text-xs px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:text-white"})]})]}),f.jsx("hr",{className:"border-slate-200 dark:border-slate-800"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Display Name"}),f.jsx("input",{type:"text",value:h,onChange:q=>p(q.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:text-white sm:text-sm"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),f.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-md text-slate-500 dark:text-slate-400 text-sm capitalize",children:n.role})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Employee ID"}),f.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-md text-slate-500 dark:text-slate-400 text-sm font-mono",children:n.employeeId})]})]})]}),f.jsx("div",{className:"pt-4 flex justify-end",children:f.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-95",children:"Save Changes"})})]}),a==="preferences"&&f.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300",children:[f.jsxs("section",{children:[f.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:"Appearance"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-200 dark:border-slate-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-2 rounded-lg ${v==="dark"?"bg-primary-500/20 text-primary-400":"bg-orange-500/20 text-orange-500"}`,children:v==="dark"?f.jsx(YD,{className:"w-5 h-5"}):f.jsx(JD,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Interface Theme"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select your preferred lighting mode."})]})]}),f.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>v==="dark"&&b(),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${v==="light"?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Light"}),f.jsx("button",{onClick:()=>v==="light"&&b(),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${v==="dark"?"bg-slate-600 text-white shadow":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Dark"})]})]})}),f.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-200 dark:border-slate-800",children:[f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Accent Color"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Choose a primary color for buttons and highlights."})]}),f.jsx("div",{className:"flex flex-wrap gap-4",children:Y.map(q=>f.jsx(WD,{color:q,selected:_===q,onSelect:()=>y(q)},q))})]})]})]}),f.jsxs("section",{children:[f.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:"Interface"}),f.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Compact Mode"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reduce spacing for higher density."})]}),f.jsx(xs,{enabled:x,onChange:w})]})})]})]}),a==="notifications"&&f.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300",children:[f.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-xl p-4 flex gap-3",children:[f.jsx(Xp,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 flex-shrink-0"}),f.jsx("p",{className:"text-sm text-primary-800 dark:text-primary-200",children:"Notification settings are currently simulated for demonstration. Changes will be saved to your local session."})]}),f.jsxs("section",{children:[f.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:"Email Alerts"}),f.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:[f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Daily Digest"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"A summary of your tasks at 9:00 AM."})]}),f.jsx(xs,{enabled:S,onChange:E})]}),f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Task Assignments"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"When someone assigns a new task to you."})]}),f.jsx(xs,{enabled:!0,onChange:()=>{}})]})]})]}),f.jsxs("section",{children:[f.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:"Push Notifications"}),f.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:[f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Due Date Reminders"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"1 hour before a task is due."})]}),f.jsx(xs,{enabled:A,onChange:C})]}),f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Mentions & Comments"}),f.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"When someone mentions you in a task."})]}),f.jsx(xs,{enabled:R,onChange:k})]})]})]})]})]})]})]})]})},QD=({isOpen:e,onClose:t,onCreate:n})=>{const[i,r]=T.useState(!1),[s,a]=T.useState(""),[o,l]=T.useState("");if(T.useEffect(()=>{if(e){const h=setTimeout(()=>r(!0),10);return()=>clearTimeout(h)}else r(!1),a(""),l("")},[e]),!e)return null;const c=h=>{h.preventDefault(),s.trim()&&(n(s,o.trim()||void 0),t())};return f.jsxs("div",{className:`fixed inset-0 z-[60] flex justify-center items-center p-4 transition-all duration-300 ${i?"visible":"invisible"}`,children:[f.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onClick:t}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 relative z-10 transition-all duration-300 transform ${i?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:"Create New Space"}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Create a separate workspace for your team or project. You'll get a unique code to invite others."}),f.jsxs("form",{onSubmit:c,children:[f.jsxs("div",{className:"mb-4",children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Space Name ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",autoFocus:!0,value:s,onChange:h=>a(h.target.value),placeholder:"e.g. Marketing Q4, Alpha Team...",className:"w-full px-4 py-2.5 border border-neutral-300 dark:border-neutral-600 rounded-xl focus:ring-2 focus:ring-neutral-900 dark:focus:ring-white focus:border-neutral-900 dark:focus:border-white dark:bg-neutral-800 dark:text-white transition-all duration-200"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Description ",f.jsx("span",{className:"text-xs text-neutral-500",children:"(optional)"})]}),f.jsx("textarea",{value:o,onChange:h=>l(h.target.value),placeholder:"What's this space about? (e.g. Q4 Marketing campaigns and strategy)",rows:3,maxLength:200,className:"w-full px-4 py-2.5 border border-neutral-300 dark:border-neutral-600 rounded-xl focus:ring-2 focus:ring-neutral-900 dark:focus:ring-white focus:border-neutral-900 dark:focus:border-white dark:bg-neutral-800 dark:text-white resize-none transition-all duration-200"}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:[o.length,"/200 characters"]})]}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 disabled:opacity-50 transition-colors shadow-lg shadow-primary-500/20",children:"Create Space"})]})]})]})]})},ZD=({isOpen:e,onClose:t,onJoin:n})=>{const[i,r]=T.useState(!1),[s,a]=T.useState("");if(T.useEffect(()=>{if(e){const l=setTimeout(()=>r(!0),10);return()=>clearTimeout(l)}else r(!1),a("")},[e]),!e)return null;const o=l=>{l.preventDefault(),s.trim()&&(n(s.trim()),t())};return f.jsxs("div",{className:`fixed inset-0 z-[60] flex justify-center items-center p-4 transition-all duration-300 ${i?"visible":"invisible"}`,children:[f.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onClick:t}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 relative z-10 transition-all duration-300 transform ${i?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:"Join a Space"}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Enter the Join Code provided by the space administrator (found in Space Settings)."}),f.jsxs("form",{onSubmit:o,children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Join Code"}),f.jsx("input",{type:"text",autoFocus:!0,value:s,onChange:l=>a(l.target.value.toUpperCase().replace(/[\s-]/g,"")),placeholder:"e.g. ABC123",className:"w-full px-4 py-3 text-center text-2xl font-mono tracking-widest uppercase border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 disabled:opacity-50 transition-colors shadow-lg shadow-primary-500/20",children:"Join Space"})]})]})]})]})},e5=({isOpen:e,onClose:t,space:n,members:i})=>{const[r,s]=T.useState(!1),[a,o]=T.useState(!1);T.useEffect(()=>{if(e){const c=setTimeout(()=>s(!0),10);return()=>clearTimeout(c)}else s(!1),o(!1)},[e]);const l=()=>{navigator.clipboard.writeText(n.joinCode),o(!0),setTimeout(()=>o(!1),2e3)};return e?f.jsxs("div",{className:`fixed inset-0 z-[60] flex justify-center items-center p-4 transition-all duration-300 ${r?"visible":"invisible"}`,children:[f.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${r?"opacity-100":"opacity-0"}`,onClick:t}),f.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden relative z-10 transition-all duration-300 transform ${r?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Space Settings"}),f.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:f.jsx(pi,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Invite New Members"}),f.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4",children:'Share this code with your team. They can enter it after clicking "Join Space".'}),f.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl p-4 flex items-center justify-between gap-4",children:[f.jsx("code",{className:"text-2xl font-mono font-bold text-primary-600 dark:text-primary-400 tracking-widest",children:n.joinCode}),f.jsx("button",{onClick:l,className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a?"bg-green-500 text-white":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:a?"Copied!":"Copy Code"})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-4",children:["Active Members (",i.length,")"]}),f.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:i.map(c=>f.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:c.avatarUrl,alt:"",className:"w-8 h-8 rounded-lg"}),f.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:c.name})]}),c.id===n.ownerId&&f.jsx("span",{className:"px-2 py-1 text-[10px] font-bold uppercase bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400 rounded",children:"Owner"})]},c.id))})]})]})]})]}):null},t5=({space:e,members:t,allEmployees:n,currentUserId:i,onRemoveMember:r,onAddMember:s,onDeleteSpace:a})=>{const[o,l]=T.useState(!1),[c,h]=T.useState(!1),[p,m]=T.useState(""),[g,v]=T.useState(!1),[b,_]=T.useState(null),[y,x]=T.useState(!1),w=()=>{navigator.clipboard.writeText(e.joinCode),l(!0),setTimeout(()=>l(!1),2e3)},S=()=>{p&&(s(e.id,p),m(""),h(!1))},E=G=>{_(G),v(!0)},A=()=>{b&&(r(e.id,b.id),v(!1),_(null))},C=()=>{x(!0)},R=()=>{a(e.id),x(!1)},k=n.filter(G=>!t.some(Y=>Y.id===G.id)),M=i===e.ownerId;return f.jsxs("div",{className:"h-full flex flex-col bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl rounded-2xl border border-neutral-200/50 dark:border-neutral-800/50 overflow-hidden animate-fade-in",children:[f.jsx("div",{className:"p-6 border-b border-neutral-200/50 dark:border-neutral-800/50",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2.5 bg-neutral-900 dark:bg-white rounded-xl",children:f.jsx(Hl,{className:"w-6 h-6 text-white dark:text-neutral-900"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-semibold text-neutral-900 dark:text-white",children:"Workspace Settings"}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:e.name})]})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[f.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-xl p-6 border border-neutral-200/50 dark:border-neutral-700/50",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white mb-4 uppercase tracking-wider",children:"Workspace Information"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Name"}),f.jsx("p",{className:"text-base font-semibold text-neutral-900 dark:text-white mt-1",children:e.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Description"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:e.description||"No description provided"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Created"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),f.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-xl p-6 border border-neutral-200/50 dark:border-neutral-700/50",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white mb-2 uppercase tracking-wider",children:"Invite New Members"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-4",children:'Share this code with your team. They can enter it after clicking "Join with Code" in the sidebar.'}),f.jsxs("div",{className:"bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-700 rounded-xl p-5 flex items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-1",children:"Join Code"}),f.jsx("code",{className:"text-3xl font-mono font-bold text-neutral-900 dark:text-white tracking-widest",children:e.joinCode})]}),f.jsx("button",{onClick:w,className:`px-6 py-3 rounded-xl text-sm font-semibold transition-all duration-300 ${o?"bg-green-500 text-white":"bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 hover:bg-neutral-800 dark:hover:bg-neutral-100 active:scale-95"}`,children:o?"Copied!":"Copy Code"})]})]}),f.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-xl p-6 border border-neutral-200/50 dark:border-neutral-700/50",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white uppercase tracking-wider",children:["Active Members (",t.length,")"]}),M&&k.length>0&&f.jsxs("button",{onClick:()=>h(!c),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-medium transition-all duration-200",children:[f.jsx(Hi,{className:"w-4 h-4"}),"Add Member"]})]}),c&&M&&f.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-neutral-900 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:[f.jsx("label",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-2 block",children:"Select Member to Add"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("select",{value:p,onChange:G=>m(G.target.value),className:"flex-1 px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:bg-neutral-800 dark:text-white transition-all duration-200",children:[f.jsx("option",{value:"",children:"Select a member..."}),k.map(G=>f.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),f.jsx("button",{onClick:S,disabled:!p,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-neutral-400 text-white rounded-xl font-medium transition-all duration-200 disabled:cursor-not-allowed",children:"Add"}),f.jsx("button",{onClick:()=>{h(!1),m("")},className:"px-4 py-2 bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 text-neutral-900 dark:text-white rounded-xl transition-all duration-200",children:"Cancel"})]})]}),f.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map(G=>f.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-white dark:hover:bg-neutral-900/50 transition-all duration-200 border border-transparent hover:border-neutral-200 dark:hover:border-neutral-700",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:G.avatarUrl,alt:"",className:"w-10 h-10 rounded-xl object-cover border border-neutral-200/50 dark:border-neutral-700/50"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white",children:G.name}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:G.email})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:G.id===e.ownerId?f.jsx("span",{className:"px-3 py-1 text-xs font-bold uppercase bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 rounded-lg",children:"Owner"}):M&&f.jsxs("button",{onClick:()=>E(G),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[f.jsx(pi,{className:"w-4 h-4"}),"Remove"]})})]},G.id))})]}),M&&f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 border-2 border-red-200 dark:border-red-800",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg",children:f.jsx(sa,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-sm font-bold text-red-900 dark:text-red-200 mb-2 uppercase tracking-wider",children:"Danger Zone"}),f.jsx("p",{className:"text-sm text-red-800 dark:text-red-300 mb-4",children:"Deleting this workspace will permanently remove all tasks, time logs, and data. This action cannot be undone."}),f.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold transition-all duration-200 active:scale-95",children:[f.jsx(sa,{className:"w-5 h-5"}),"Delete Workspace"]})]})]})})]}),f.jsx(Id,{isOpen:g,onClose:()=>{v(!1),_(null)},onConfirm:A,title:"Remove Member",message:b?`Are you sure you want to remove ${b.name} from "${e.name}"? They will lose access to all tasks and data in this workspace.`:"",confirmText:"Remove Member",cancelText:"Cancel"}),f.jsx(Id,{isOpen:y,onClose:()=>x(!1),onConfirm:R,title:"Delete Workspace",message:`Are you sure you want to permanently delete "${e.name}"? This action cannot be undone and will delete all tasks, time logs, comments, and data in this workspace.`,confirmText:"Delete Workspace",cancelText:"Cancel"})]})},n5=({tasks:e,employees:t,onViewTask:n})=>{var g;const[i,r]=T.useState(new Date),s=T.useMemo(()=>{const v=[],b=new Date(i);b.setDate(b.getDate()-b.getDay());for(let _=0;_<14;_++){const y=new Date(b);y.setDate(b.getDate()+_),v.push(y)}return v},[i]),a=v=>v.toLocaleDateString("en-US",{weekday:"short",day:"numeric"}),o=v=>{const b=new Date;return v.toDateString()===b.toDateString()},l=v=>{const b=new Date(v.dueDate),_=v.createdAt?new Date(v.createdAt):new Date(b.getTime()-3*24*60*60*1e3),y=s.findIndex(E=>E.toDateString()===_.toDateString()),x=s.findIndex(E=>E.toDateString()===b.toDateString());if(y===-1&&x===-1)return null;const w=Math.max(0,y===-1?0:y),S=Math.min(s.length-1,x===-1?s.length-1:x);return{start:w,span:S-w+1}},c=v=>{switch(v){case J.DONE:return"bg-green-500 dark:bg-green-400";case J.IN_PROGRESS:return"bg-blue-500 dark:bg-blue-400";default:return"bg-neutral-400 dark:bg-neutral-500"}},h=v=>{const b=new Date(i);b.setDate(b.getDate()+v*7),r(b)},p=v=>{var b;return((b=t.find(_=>_.id===v))==null?void 0:b.name)||"Unassigned"},m=T.useMemo(()=>{const v={};return e.forEach(b=>{const _=b.assigneeId||"unassigned";v[_]||(v[_]=[]),v[_].push(b)}),v},[e]);return f.jsxs("div",{className:"bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl rounded-2xl border border-neutral-200/50 dark:border-neutral-800/50 overflow-hidden animate-fade-in",children:[f.jsx("div",{className:"p-6 border-b border-neutral-200/50 dark:border-neutral-800/50",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:"Gantt Chart"}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:(g=s[0])==null?void 0:g.toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>h(-1),className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-xl transition-all duration-200",children:f.jsx(Ob,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:()=>r(new Date),className:"px-4 py-2 text-sm font-medium text-neutral-900 dark:text-white bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl transition-all duration-200",children:"Today"}),f.jsx("button",{onClick:()=>h(1),className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-xl transition-all duration-200",children:f.jsx(zf,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-400"})})]})]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("div",{className:"min-w-[900px]",children:[f.jsxs("div",{className:"flex border-b border-neutral-200/50 dark:border-neutral-800/50",children:[f.jsx("div",{className:"w-48 flex-shrink-0 p-3 bg-neutral-50/50 dark:bg-neutral-800/30 border-r border-neutral-200/50 dark:border-neutral-800/50",children:f.jsx("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Assignee"})}),f.jsx("div",{className:"flex-1 flex",children:s.map((v,b)=>f.jsx("div",{className:`flex-1 p-3 text-center border-r border-neutral-100 dark:border-neutral-800/50 last:border-r-0 ${o(v)?"bg-neutral-900 dark:bg-white":"bg-neutral-50/50 dark:bg-neutral-800/30"}`,children:f.jsx("span",{className:`text-xs font-medium ${o(v)?"text-white dark:text-neutral-900":"text-neutral-500 dark:text-neutral-400"}`,children:a(v)})},b))})]}),Object.entries(m).map(([v,b])=>f.jsx("div",{className:"border-b border-neutral-100 dark:border-neutral-800/50 last:border-b-0",children:f.jsxs("div",{className:"flex min-h-[60px]",children:[f.jsx("div",{className:"w-48 flex-shrink-0 p-3 bg-neutral-50/30 dark:bg-neutral-800/20 border-r border-neutral-200/50 dark:border-neutral-800/50 flex items-center",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center text-xs font-semibold text-neutral-600 dark:text-neutral-300",children:p(v).charAt(0)}),f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-white truncate",children:p(v)})]})}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx("div",{className:"absolute inset-0 flex",children:s.map((_,y)=>f.jsx("div",{className:`flex-1 border-r border-neutral-100 dark:border-neutral-800/30 last:border-r-0 ${o(_)?"bg-neutral-100/50 dark:bg-neutral-800/30":""}`},y))}),f.jsx("div",{className:"relative p-2 space-y-1",children:b.map(_=>{const y=l(_);if(!y)return null;const x=y.span/s.length*100,w=y.start/s.length*100;return f.jsx("div",{onClick:()=>n(_),className:`absolute h-8 rounded-lg ${c(_.status)} cursor-pointer hover:opacity-90 transition-all duration-200 flex items-center px-3 shadow-sm hover:shadow-md`,style:{left:`${w}%`,width:`${x}%`,minWidth:"80px"},children:f.jsx("span",{className:"text-xs font-medium text-white truncate",children:_.title})},_.id)})})]})]})},v)),e.length===0&&f.jsx("div",{className:"p-12 text-center",children:f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"No tasks to display"})})]})}),f.jsxs("div",{className:"p-4 border-t border-neutral-200/50 dark:border-neutral-800/50 flex items-center gap-6",children:[f.jsx("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Status:"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-neutral-400 dark:bg-neutral-500"}),f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"To Do"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 dark:bg-blue-400"}),f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"In Progress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-green-500 dark:bg-green-400"}),f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"Done"})]})]})]})]})},i5=()=>{const[e,t]=T.useState([]),[n,i]=T.useState(""),[r,s]=T.useState("");T.useEffect(()=>{const m=localStorage.getItem("todayTasks");let g=[];if(m)try{g=JSON.parse(m)}catch(v){console.error("Failed to load daily tasks",v)}if(!m||g.length===0){const v=[{id:"1",name:"Christian",text:"DMRCE Development (NRCK LM MCP)",completed:!1},{id:"2",name:"Sage",text:"Lifetime usernormal & Admin Cupdates",completed:!1},{id:"3",name:"Christian",text:"QA Interview Responses (Email)",completed:!1},{id:"4",name:"Mark",text:"Pearl 27 - AI Interview (Admin)",completed:!1},{id:"5",name:"Angelo",text:"Pearl 27 - Assist to Projects & QA Grading System",completed:!1}];t(v),localStorage.setItem("todayTasks",JSON.stringify(v))}else t(g)},[]),T.useEffect(()=>{e.length>0?localStorage.setItem("todayTasks",JSON.stringify(e)):localStorage.removeItem("todayTasks")},[e]);const a=()=>{const m=n.trim(),g=r.trim();if(!m||!g)return;const v={id:Date.now().toString(),name:m,text:g,completed:!1};t(b=>[...b,v]),i(""),s("")},o=m=>{t(g=>g.map(v=>v.id===m?{...v,completed:!v.completed}:v))},l=m=>{t(g=>g.filter(v=>v.id!==m))},c=()=>{confirm("Are you sure you want to clear all tasks?")&&(t([]),localStorage.removeItem("todayTasks"))},h=()=>{const m=new Date,g={weekday:"long",year:"numeric",month:"long",day:"numeric"};return m.toLocaleDateString("en-US",g)},p=m=>{m.key==="Enter"&&a()};return f.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden animate-fade-in",children:[f.jsx("div",{className:"p-6 border-b border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Task of Today"}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:h()})]}),f.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all duration-200",children:[f.jsx(sa,{className:"w-4 h-4"}),"Clear All"]})]})}),f.jsx("div",{className:"p-6 border-b border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex gap-3",children:[f.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),placeholder:"Name...",className:"w-48 px-4 py-3 text-base border border-neutral-300 dark:border-neutral-700 rounded-xl focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:bg-neutral-800 dark:text-white transition-all duration-200"}),f.jsx("input",{type:"text",value:r,onChange:m=>s(m.target.value),onKeyPress:p,placeholder:"Type task description and press Enter...",className:"flex-1 px-4 py-3 text-base border border-neutral-300 dark:border-neutral-700 rounded-xl focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:bg-neutral-800 dark:text-white transition-all duration-200"}),f.jsxs("button",{onClick:a,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all duration-200 flex items-center gap-2 font-medium",children:[f.jsx(Hi,{className:"w-5 h-5"}),"Add"]})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.length===0?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-lg",children:"No tasks yet"}),f.jsx("p",{className:"text-sm text-neutral-400 dark:text-neutral-600 mt-2",children:"Add your first task above!"})]})}):f.jsx("div",{className:"space-y-3 max-w-4xl mx-auto",children:e.map((m,g)=>f.jsxs("div",{className:"flex items-start gap-4 p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl group hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all duration-200",children:[f.jsxs("span",{className:"text-lg font-bold text-neutral-400 dark:text-neutral-500 min-w-[2rem]",children:[g+1,"."]}),f.jsx("input",{type:"checkbox",checked:m.completed,onChange:()=>o(m.id),className:"mt-1 w-5 h-5 rounded border-2 border-neutral-300 dark:border-neutral-600 text-blue-600 focus:ring-2 focus:ring-blue-500 cursor-pointer"}),f.jsxs("span",{className:`flex-1 text-base leading-relaxed ${m.completed?"line-through text-neutral-400 dark:text-neutral-500":"text-neutral-900 dark:text-white"}`,children:[f.jsx("span",{className:"font-semibold",children:m.name})," - ",m.text]}),f.jsx("button",{onClick:()=>l(m.id),className:"opacity-0 group-hover:opacity-100 p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg transition-all duration-200",title:"Delete task",children:f.jsx(pi,{className:"w-5 h-5"})})]},m.id))})}),f.jsx("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800",children:f.jsxs("p",{className:"text-xs text-center text-neutral-400 dark:text-neutral-500",children:[e.length," ",e.length===1?"task":"tasks","  Tasks are saved locally"]})})]})},r5=({tasks:e,employees:t,currentSpace:n,user:i})=>{const r=new Date().toISOString().split("T")[0],s=e.filter(g=>g.assigneeId===i.employeeId),a=s.filter(g=>g.dueDate===r),o=s.filter(g=>g.dueDate<r&&g.status!==J.DONE);s.filter(g=>g.completedAt&&g.completedAt.split("T")[0]===r);const l=s.length,c=s.filter(g=>g.status===J.DONE).length,h=s.filter(g=>g.status===J.IN_PROGRESS).length,p=()=>{const g=new Date().getHours();return g<12?"Good morning":g<18?"Good afternoon":"Good evening"},m=g=>{switch(g){case W.URGENT:return"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400";case W.HIGH:return"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400";case W.MEDIUM:return"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400";default:return"bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-400"}};return f.jsxs("div",{className:"space-y-8 animate-fade-in",children:[f.jsxs("div",{className:"bg-gradient-to-br from-neutral-900 to-neutral-800 dark:from-white dark:to-neutral-100 rounded-3xl p-8 text-white dark:text-neutral-900",children:[f.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[p(),", ",i.username,"!"]}),f.jsx("p",{className:"text-neutral-300 dark:text-neutral-600 text-lg",children:a.length>0?`You have ${a.length} task${a.length>1?"s":""} due today`:"No tasks due today. Great job staying ahead!"}),f.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[f.jsxs("div",{className:"bg-white/10 dark:bg-neutral-900/10 rounded-2xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:l}),f.jsx("p",{className:"text-sm text-neutral-300 dark:text-neutral-600",children:"Total Tasks"})]}),f.jsxs("div",{className:"bg-white/10 dark:bg-neutral-900/10 rounded-2xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:h}),f.jsx("p",{className:"text-sm text-neutral-300 dark:text-neutral-600",children:"In Progress"})]}),f.jsxs("div",{className:"bg-white/10 dark:bg-neutral-900/10 rounded-2xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:c}),f.jsx("p",{className:"text-sm text-neutral-300 dark:text-neutral-600",children:"Completed"})]}),f.jsxs("div",{className:"bg-white/10 dark:bg-neutral-900/10 rounded-2xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold text-red-400 dark:text-red-500",children:o.length}),f.jsx("p",{className:"text-sm text-neutral-300 dark:text-neutral-600",children:"Overdue"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl rounded-2xl border border-neutral-200/50 dark:border-neutral-800/50 p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"p-2 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:f.jsx(Hf,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Today's Tasks"}),f.jsx("p",{className:"text-sm text-neutral-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]})]}),f.jsx("div",{className:"space-y-3",children:a.length===0?f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-center py-8",children:"No tasks due today"}):a.slice(0,5).map(g=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${g.status===J.DONE?"bg-green-500":g.status===J.IN_PROGRESS?"bg-blue-500":"bg-neutral-400"}`}),f.jsx("span",{className:`flex-1 text-sm font-medium ${g.status===J.DONE?"line-through text-neutral-400":"text-neutral-900 dark:text-white"}`,children:g.title}),f.jsx("span",{className:`text-xs px-2 py-1 rounded-lg font-medium ${m(g.priority)}`,children:g.priority})]},g.id))})]}),f.jsxs("div",{className:"bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl rounded-2xl border border-neutral-200/50 dark:border-neutral-800/50 p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-500/20 rounded-xl",children:f.jsx(ns,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Overdue Tasks"}),f.jsxs("p",{className:"text-sm text-neutral-500",children:[o.length," task",o.length!==1?"s":""," need attention"]})]})]}),f.jsx("div",{className:"space-y-3",children:o.length===0?f.jsxs("div",{className:"text-center py-8",children:[f.jsx(rh,{className:"w-12 h-12 text-green-500 mx-auto mb-2"}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"All caught up!"})]}):o.slice(0,5).map(g=>f.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-500/10 rounded-xl border border-red-200/50 dark:border-red-500/20",children:[f.jsx(sh,{className:"w-4 h-4 text-red-500"}),f.jsx("span",{className:"flex-1 text-sm font-medium text-neutral-900 dark:text-white",children:g.title}),f.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Due ",new Date(g.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]},g.id))})]})]}),f.jsxs("div",{className:"bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl rounded-2xl border border-neutral-200/50 dark:border-neutral-800/50 p-6",children:[f.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Team Members"}),f.jsx("div",{className:"flex items-center gap-4 flex-wrap",children:t.slice(0,8).map(g=>f.jsxs("div",{className:"flex items-center gap-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl px-4 py-2",children:[f.jsx("img",{src:g.avatarUrl,alt:g.name,className:"w-8 h-8 rounded-lg object-cover"}),f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:g.name})]},g.id))})]})]})},Pb=e=>({id:e.id,spaceId:e.space_id,title:e.title,description:e.description||"",assigneeId:e.assignee_id,dueDate:e.due_date,status:e.status,priority:e.priority,tags:e.tags||[],timerStartTime:e.timer_start_time,createdAt:e.created_at,completedAt:e.completed_at,blockedById:e.blocked_by_id,comments:e.comments?e.comments.map(jb):[],subtasks:e.subtasks?e.subtasks.map(s5):[],timeLogs:e.time_logs?e.time_logs.map(a5):[]}),jb=e=>({id:e.id,authorId:e.author_id,content:e.content,timestamp:e.created_at}),s5=e=>({id:e.id,title:e.title,isCompleted:e.is_completed}),a5=e=>({id:e.id,startTime:e.start_time,endTime:e.end_time,duration:e.duration}),eu=e=>({id:e.id,name:e.name,joinCode:e.join_code,ownerId:e.owner_id,members:[]}),o5=e=>({id:e.id,name:e.username||"Unknown",avatarUrl:e.avatar_url||"https://via.placeholder.com/150"}),l5=async e=>{const{data:t,error:n}=await ge.from("spaces").select("*, space_members!inner(user_id)").eq("space_members.user_id",e);if(n)throw n;return await Promise.all(t.map(async r=>{const{data:s}=await ge.from("space_members").select("user_id").eq("space_id",r.id);return{...eu(r),members:s?s.map(a=>a.user_id):[]}}))},u5=async(e,t,n)=>{const i=Math.random().toString(36).substring(2,8).toUpperCase(),{data:r,error:s}=await ge.from("spaces").insert({name:e,description:n||null,join_code:i,owner_id:t}).select().single();if(s)throw s;const{error:a}=await ge.from("space_members").insert({space_id:r.id,user_id:t,role:"admin"});if(a)throw a;return{...eu(r),members:[t]}},c5=async(e,t)=>{const n=e.toUpperCase().replace(/[\s-]/g,"").trim(),{data:i,error:r}=await ge.rpc("join_space_v2",{input_code:n});if(r)throw r.message.includes("not found")?new Error("Invalid join code. Please check the code and try again."):new Error(r.message);if(!i)throw new Error("Invalid join code. Please check the code and try again.");return eu(i)},d5=async e=>{const{data:t,error:n}=await ge.from("tasks").select(`
      *,
      subtasks(*),
      comments(*),
      time_logs(*)
    `).eq("space_id",e).order("created_at",{ascending:!1});if(n)throw n;return t.map(Pb)},bs=async e=>{const t={space_id:e.spaceId,title:e.title,description:e.description||"",assignee_id:e.assigneeId||"",due_date:e.dueDate||new Date().toISOString(),status:e.status||"To Do",priority:e.priority||"Medium",tags:e.tags||[],timer_start_time:e.timerStartTime||null,blocked_by_id:e.blockedById||null,completed_at:e.completedAt||null};e.id&&(t.id=e.id);const{data:n,error:i}=await ge.from("tasks").upsert(t).select().single();if(i)throw i;const r=Pb(n);return e.subtasks&&(e.id&&await ge.from("subtasks").delete().eq("task_id",e.id),e.subtasks.length>0&&await ge.from("subtasks").insert(e.subtasks.map(s=>({task_id:n.id,title:s.title,is_completed:s.isCompleted})))),r},f5=async(e,t,n)=>{const{data:i,error:r}=await ge.from("comments").insert({task_id:e,author_id:t,content:n}).select().single();if(r)throw r;return jb(i)},h5=async(e,t,n,i)=>{const{error:r}=await ge.from("time_logs").insert({task_id:e,start_time:t,end_time:n,duration:i});if(r)throw r},m5=async()=>{const{data:e,error:t}=await ge.from("profiles").select("*");if(t)throw t;return e.map(o5)},p5=async e=>{const{error:t}=await ge.from("tasks").delete().eq("id",e);if(t)throw t},Zp=async e=>{const{data:t,error:n}=await ge.from("spaces").select("*").eq("id",e).single();if(n)throw n;const{data:i,error:r}=await ge.from("space_members").select("user_id").eq("space_id",e);if(r)throw r;const s=i.map(a=>a.user_id);return{...eu(t),members:s}},g5=async(e,t)=>{const{error:n}=await ge.from("space_members").insert({space_id:e,user_id:t});if(n)throw n.code==="23505"?new Error("User is already a member of this workspace"):n},v5=async(e,t)=>{const{error:n}=await ge.from("space_members").delete().eq("space_id",e).eq("user_id",t);if(n)throw n},y5=async e=>{const{error:t}=await ge.from("tasks").delete().eq("space_id",e);if(t)throw t;const{error:n}=await ge.from("space_members").delete().eq("space_id",e);if(n)throw n;const{error:i}=await ge.from("spaces").delete().eq("id",e);if(i)throw i},eg=({children:e})=>{const{user:t,loading:n}=Zl(),i=Zt();return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?f.jsx(f.Fragment,{children:e}):f.jsx(al,{to:"/login",state:{from:i},replace:!0})},tg=()=>{const e=jl(),t=Zt(),{user:n,updateUser:i,logout:r}=Zl(),{showNotification:s}=Lb(),[a,o]=T.useState([]),[l,c]=T.useState([]),[h,p]=T.useState([]),[m,g]=T.useState([]),[v,b]=T.useState(!0),[_,y]=T.useState(""),[x,w]=T.useState(""),E=(()=>{const I=t.pathname;return I.includes("/board")?"board":I.includes("/calendar")?"calendar":I.includes("/dashboard")?"dashboard":I.includes("/gantt")?"gantt":I.includes("/whiteboard")?"whiteboard":I.includes("/overview")?"overview":I.includes("/settings")?"settings":(I.includes("/home"),"home")})(),A=I=>{e(`/app/${I}`)},[C,R]=T.useState(!1),[k,M]=T.useState(!1),[G,Y]=T.useState(!1),[q,se]=T.useState(!1),[ye,D]=T.useState(!1),[H,U]=T.useState(!1),[K,ce]=T.useState(!1),[Ze,j]=T.useState(!1),[nt,vt]=T.useState(!1),[dn,tu]=T.useState(!1),[Ra,Ia]=T.useState(!1),[nu,iu]=T.useState(null),[Gn,tn]=T.useState(null),[vi,ru]=T.useState(null);T.useEffect(()=>{n&&(Ma(),su())},[n]),T.useEffect(()=>{_?L(_):o([])},[_]);const Ma=async()=>{try{const I=await m5();c(I)}catch(I){console.error("Failed to load employees",I)}},su=async()=>{if(n)try{const I=await l5(n.employeeId);p(I),I.length>0&&!_&&y(I[0].id)}catch(I){console.error("Failed to load spaces",I)}},L=async I=>{Ia(!0);try{const P=await d5(I);o(P)}catch(P){console.error("Failed to load tasks",P),s("Failed to load tasks","error")}finally{Ia(!1)}};T.useEffect(()=>{if(!Ra&&_&&n&&!dn){const I=new Date().toDateString();a.some(Z=>Z.assigneeId===n.employeeId&&new Date(Z.createdAt).toDateString()===I)||vt(!0),tu(!0)}},[Ra,_,n,a,dn]);const $=T.useMemo(()=>l.find(I=>I.id===(n==null?void 0:n.employeeId)),[l,n]),de=h.find(I=>I.id===_),ut=T.useMemo(()=>{if(!_)return[];let I=a.filter(P=>P.spaceId===_);if(x){const P=x.toLowerCase();I=I.filter(Z=>Z.title.toLowerCase().includes(P)||Z.tags&&Z.tags.some(ae=>ae.toLowerCase().includes(P)))}return I},[a,_,x]),it=T.useMemo(()=>de?l.filter(I=>de.members.includes(I.id)):[],[de,l]),fn=I=>{if(!n)return;const P=l.find(ae=>ae.id===n.employeeId);if(!P)return;const Z={id:Date.now(),timestamp:new Date().toISOString(),message:I,user:{name:P.name,avatarUrl:P.avatarUrl}};g(ae=>[Z,...ae].slice(0,50))},ah=async(I,P)=>{if(n)try{const Z=await u5(I,n.employeeId,P);p([...h,Z]),y(Z.id),s(`Created space "${I}"`)}catch(Z){s(Z.message,"error")}},Bb=async I=>{if(n)try{const P=await c5(I,n.employeeId),Z=h.findIndex(ae=>ae.id===P.id);if(Z>=0){const ae=[...h];ae[Z]=P,p(ae),s(`Switched to "${P.name}"`)}else p([...h,P]),s(`Joined "${P.name}"`);y(P.id)}catch(P){s(P.message,"error")}},Hb=async(I,P)=>{var Z;try{await g5(I,P);const ae=await Zp(I);p(h.map(et=>et.id===I?ae:et));const Re=((Z=l.find(et=>et.id===P))==null?void 0:Z.name)||"Member";s(`${Re} added to workspace`,"success")}catch(ae){s(ae.message||"Failed to add member","error")}},qb=async(I,P)=>{var Z;try{await v5(I,P);const ae=await Zp(I);p(h.map(et=>et.id===I?ae:et));const Re=((Z=l.find(et=>et.id===P))==null?void 0:Z.name)||"Member";s(`${Re} removed from workspace`,"success")}catch(ae){s(ae.message||"Failed to remove member","error")}},Vb=async I=>{try{if(await y5(I),p(h.filter(P=>P.id!==I)),_===I){const P=h.filter(Z=>Z.id!==I);y(P.length>0?P[0].id:null),A("dashboard")}s("Workspace deleted successfully","success")}catch(P){s(P.message||"Failed to delete workspace","error")}},au=(I=null)=>{iu(I),R(!0)},oh=async(I,P)=>{if(!_||!n)return;const Z={...I,id:P||void 0,spaceId:_,assigneeId:I.assigneeId||n.employeeId};try{const ae=await bs(Z);P?(o(a.map(Re=>Re.id===P?{...Re,...ae}:Re)),fn(`updated "${I.title}"`)):(o([ae,...a]),fn(`created "${ae.title}"`)),R(!1)}catch(ae){console.error(ae),s("Failed to save task","error")}},lh=async(I,P)=>{const Z=a.find(nn=>nn.id===I);if(!Z||Z.status===P)return;const ae=P===J.DONE?new Date().toISOString():Z.completedAt,Re={...Z,status:P,completedAt:ae},et=a.map(nn=>nn.blockedById===I?{...nn,blockedById:null}:nn);o(et.map(nn=>nn.id===I?Re:nn));try{await bs(Re),fn(`moved "${Z.title}" to ${P}`),s(`Moved to ${P}`,"success")}catch{s("Failed to update status","error"),L(_)}},ou=async I=>{const P=a.find(Re=>Re.id===I);if(!P)return;const Z=new Date;let ae;if(P.timerStartTime){const Re=new Date(P.timerStartTime),et=Z.getTime()-Re.getTime();try{await h5(P.id,P.timerStartTime,Z.toISOString(),et),await bs({...P,timerStartTime:null}),ae={...P,timerStartTime:null,timeLogs:[{id:"temp",startTime:P.timerStartTime,endTime:Z.toISOString(),duration:et},...P.timeLogs||[]]},fn(`logged time on "${P.title}"`),s(`Timer stopped: ${Math.floor(et/1e3/60)}m ${Math.floor(et/1e3%60)}s`,"success")}catch{s("Failed to log time","error");return}}else try{await bs({...P,timerStartTime:Z.toISOString()}),ae={...P,timerStartTime:Z.toISOString()},fn(`started timer on "${P.title}"`),s("Timer started!","success")}catch{s("Failed to start timer","error");return}o(a.map(Re=>Re.id===I?ae:Re)),Gn&&Gn.id===I&&tn(ae)};return n?f.jsxs("div",{className:"flex h-screen overflow-hidden text-slate-900 dark:text-slate-100 transition-colors duration-300",children:[f.jsx(TE,{isOpen:v,activeSpaceId:_,spaces:h,currentView:E,onSelectSpace:I=>{y(I)},onViewChange:A,onToggle:()=>b(!v),onOpenProfile:()=>se(!0),onLogout:r,onCreateSpace:()=>U(!0),onJoinSpace:()=>ce(!0),currentUserEmployee:$,user:n}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 transition-all duration-300",children:[["list","board","calendar","gantt","dashboard","settings"].includes(E)&&f.jsx(xE,{activeSpace:de?de.name:"No Space Selected",currentView:E,onViewChange:A,onAddTask:()=>_?au():s("Select a space first","error"),onGenerateTasks:()=>_?M(!0):s("Select a space first","error"),searchTerm:x,onSearchChange:w,user:n}),f.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6 scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-white/10 scrollbar-track-transparent",children:f.jsxs("div",{className:"max-w-[1600px] mx-auto animate-in fade-in duration-500",children:[E==="home"&&f.jsx(r5,{tasks:ut,employees:it,currentSpace:de,user:{username:n.username,employeeId:n.employeeId}}),E==="overview"&&f.jsx(Kp,{tasks:ut,employees:it,activityLogs:m}),E==="whiteboard"&&f.jsx("div",{className:"h-[calc(100vh-140px)]",children:f.jsx(i5,{})}),!_&&!["home","overview","whiteboard"].includes(E)?f.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-8",children:[f.jsx("div",{className:"w-20 h-20 bg-neutral-100 dark:bg-neutral-800 rounded-full flex items-center justify-center mb-4",children:f.jsx(Hl,{className:"w-10 h-10 text-neutral-400"})}),f.jsx("h2",{className:"text-xl font-bold text-neutral-800 dark:text-white mb-2",children:"No Space Selected"}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 max-w-md mb-6",children:"Join an existing team space using a code, or create a new one to get started."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>U(!0),className:"px-6 py-3 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 font-semibold rounded-xl hover:bg-neutral-800 dark:hover:bg-neutral-100 shadow-lg transition-all duration-300",children:"Create Space"}),f.jsx("button",{onClick:()=>ce(!0),className:"px-6 py-3 bg-white dark:bg-neutral-800 text-neutral-700 dark:text-white font-semibold rounded-xl border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-all duration-300",children:"Join Space"})]})]}):_&&f.jsxs(f.Fragment,{children:[E==="dashboard"&&f.jsx(Kp,{tasks:ut,employees:it,activityLogs:m}),E==="list"&&f.jsx(UE,{tasks:ut,employees:it,onEditTask:au,onViewTask:I=>{tn(I),Y(!0)},onUpdateTaskStatus:lh,onToggleTimer:ou}),E==="board"&&f.jsx(IE,{tasks:ut,allTasks:a,employees:it,onEditTask:au,onDeleteTask:I=>{ru(I),D(!0)},onUpdateTaskStatus:lh,onViewTask:I=>{tn(I),Y(!0)},onToggleTimer:ou}),E==="gantt"&&f.jsx(n5,{tasks:ut,employees:it,onViewTask:I=>{tn(I),Y(!0)}}),E==="calendar"&&f.jsx(FD,{tasks:ut,onViewTask:I=>{tn(I),Y(!0)}}),E==="settings"&&de&&f.jsx(t5,{space:de,members:it,allEmployees:l,currentUserId:n==null?void 0:n.employeeId,onAddMember:Hb,onRemoveMember:qb,onDeleteSpace:Vb})]})]})})]}),C&&f.jsx(tI,{isOpen:C,onClose:()=>R(!1),onSave:oh,employees:it,taskToEdit:nu,allTasks:ut}),k&&f.jsx(nI,{isOpen:k,onClose:()=>M(!1),onTasksGenerated:async I=>{if(!(!_||!n)){for(const P of I)await oh(P,null);s(`Generated ${I.length} tasks`,"success")}},employees:it}),G&&Gn&&f.jsx(zD,{isOpen:G,onClose:()=>Y(!1),task:Gn,employees:it,allTasks:ut,onAddComment:async(I,P)=>{if(n)try{const Z=await f5(I,n.employeeId,P),ae={...Gn,comments:[...Gn.comments,Z]};o(a.map(Re=>Re.id===I?ae:Re)),tn(ae)}catch(Z){console.error(Z)}},onUpdateTask:async I=>{try{await bs(I),o(a.map(P=>P.id===I.id?I:P)),tn(I)}catch(P){console.error(P)}},onToggleTimer:ou}),ye&&f.jsx(Id,{isOpen:ye,onClose:()=>D(!1),onConfirm:async()=>{if(vi){try{await p5(vi),o(a.filter(I=>I.id!==vi)),s("Deleted","success")}catch{s("Delete failed","error")}D(!1)}},title:"Delete Task",message:"This will permanently remove the task."}),q&&n&&f.jsx(XD,{isOpen:q,onClose:()=>se(!1),user:n,currentUserEmployee:$,onSave:(I,P)=>{i({username:I})},onLogout:()=>{se(!1),r()}}),f.jsx(QD,{isOpen:H,onClose:()=>U(!1),onCreate:ah}),f.jsx(ZD,{isOpen:K,onClose:()=>ce(!1),onJoin:Bb}),de&&f.jsx(e5,{isOpen:Ze,onClose:()=>j(!1),space:de,members:it})]}):null},x5=()=>f.jsxs(jT,{children:[f.jsx(Ei,{path:"/login",element:f.jsx(Yp,{})}),f.jsx(Ei,{path:"/signup",element:f.jsx(Yp,{})}),f.jsx(Ei,{path:"/app",element:f.jsx(eg,{children:f.jsx(tg,{})})}),f.jsx(Ei,{path:"/app/:view",element:f.jsx(eg,{children:f.jsx(tg,{})})}),f.jsx(Ei,{path:"/",element:f.jsx(al,{to:"/app/home",replace:!0})}),f.jsx(Ei,{path:"*",element:f.jsx(al,{to:"/app/home",replace:!0})})]}),Gb=document.getElementById("root");if(!Gb)throw new Error("Could not find root element to mount to");const b5=HS.createRoot(Gb);b5.render(f.jsx(lc.StrictMode,{children:f.jsx(lE,{children:f.jsx(OD,{children:f.jsx(GD,{children:f.jsx(x5,{})})})})}));
